import{o as B,a as q}from"./request.f67eab9d.js";import{r as N}from"./index.5a8313eb.js";import{d as P,r as b,p as V,b as i,o as $,l as D,m as _,g as e,w as a,q as v,u as t,C as y,D as h}from"./.pnpm.1f1cfb31.js";import{_ as z}from"./_plugin-vue_export-helper.c27b6911.js";const E={class:"database-container"},F={class:"database"},I={class:"item"},L={class:"item"},M={class:"item"},R={class:"action"},S={class:"item"},T={class:"item"},W=P({__name:"index",setup(j){const c={layout:"vertical"},o=b({type:"mysql",host:"127.0.0.1",username:"",database:"",password:"",port:"3306",prefix:"xb_",charset:"utf8mb4"}),p=b({host:"127.0.0.1",port:"6379",password:"",prefix:"xb_"}),r=b({web_name:"",web_url:"",username:"",password:""}),w=b(!1),k=()=>{const m={database:o.value,redis:p.value,site:r.value};w.value=!0,q("install/install?step=cache",m).then(()=>{N.push("/install")}).finally(()=>{w.value=!1})};return V(()=>{const m=location.protocol,l=location.hostname,f=`${m}//${l}/`;r.value.web_url=f}),(m,l)=>{const f=i("a-divider"),u=i("a-input"),n=i("a-form-item"),d=i("a-col"),g=i("a-input-password"),x=i("a-row"),U=i("a-form"),C=i("a-button");return $(),D("div",E,[_("div",F,[_("div",I,[e(f,{class:"title"},{default:a(()=>[v(" 数据库设置 ")]),_:1}),e(U,y(h(c)),{default:a(()=>[e(x,{gutter:30},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(n,{label:"数据库类型",name:"mysql"},{default:a(()=>[e(u,{value:t(o).type,"onUpdate:value":l[0]||(l[0]=s=>t(o).type=s),placeholder:"请输入数据库类型",disabled:""},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(n,{label:"数据库主机",name:"host"},{default:a(()=>[e(u,{value:t(o).host,"onUpdate:value":l[1]||(l[1]=s=>t(o).host=s),placeholder:"请输入数据库主机"},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(n,{label:"数据库名称",name:"database"},{default:a(()=>[e(u,{value:t(o).database,"onUpdate:value":l[2]||(l[2]=s=>t(o).database=s),placeholder:"请输入数据库名称"},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(n,{label:"数据库用户",name:"db_user"},{default:a(()=>[e(u,{value:t(o).username,"onUpdate:value":l[3]||(l[3]=s=>t(o).username=s),placeholder:"请输入数据库用户"},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(n,{label:"数据库密码",name:"db_pass"},{default:a(()=>[e(g,{value:t(o).password,"onUpdate:value":l[4]||(l[4]=s=>t(o).password=s),placeholder:"请输入数据库密码"},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(n,{label:"数据库端口",name:"port"},{default:a(()=>[e(u,{value:t(o).port,"onUpdate:value":l[5]||(l[5]=s=>t(o).port=s),placeholder:"请输入安全端口"},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(n,{label:"数据表前缀",name:"prefix"},{default:a(()=>[e(u,{value:t(o).prefix,"onUpdate:value":l[6]||(l[6]=s=>t(o).prefix=s),placeholder:"请输入数据表前缀"},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(n,{label:"数据字符集",name:"charset"},{default:a(()=>[e(u,{value:t(o).charset,"onUpdate:value":l[7]||(l[7]=s=>t(o).charset=s),placeholder:"请输入数据字符集",disabled:""},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},16)]),_("div",L,[e(f,{class:"title"},{default:a(()=>[v(" redis配置 ")]),_:1}),e(U,y(h(c)),{default:a(()=>[e(x,{gutter:30},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(n,{label:"redis地址"},{default:a(()=>[e(u,{value:t(p).host,"onUpdate:value":l[8]||(l[8]=s=>t(p).host=s),placeholder:"请输入redis地址"},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(n,{label:"redis端口"},{default:a(()=>[e(u,{value:t(p).port,"onUpdate:value":l[9]||(l[9]=s=>t(p).port=s),placeholder:"请输入redis端口"},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(n,{label:"安全密码"},{default:a(()=>[e(u,{value:t(p).password,"onUpdate:value":l[10]||(l[10]=s=>t(p).password=s),placeholder:"redis安全密码，可留空"},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(n,{label:"数据前缀"},{default:a(()=>[e(u,{value:t(p).prefix,"onUpdate:value":l[11]||(l[11]=s=>t(p).prefix=s),placeholder:"请输入数据前缀"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},16)]),_("div",M,[e(f,{class:"title"},{default:a(()=>[v(" 站点设置 ")]),_:1}),e(U,y(h(c)),{default:a(()=>[e(x,{gutter:30},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(n,{label:"站点名称",name:"web_name"},{default:a(()=>[e(u,{value:t(r).web_name,"onUpdate:value":l[12]||(l[12]=s=>t(r).web_name=s),placeholder:"请输入站点名称"},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(n,{label:"站点域名（斜杠结尾）",disabled:"",name:"domain"},{default:a(()=>[e(u,{value:t(r).web_url,"onUpdate:value":l[13]||(l[13]=s=>t(r).web_url=s),placeholder:"请输入站点域名"},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(n,{label:"管理员账号",name:"username"},{default:a(()=>[e(u,{value:t(r).username,"onUpdate:value":l[14]||(l[14]=s=>t(r).username=s),placeholder:"请输入管理员账号"},null,8,["value"])]),_:1})]),_:1}),e(d,{span:12},{default:a(()=>[e(n,{label:"管理员密码",name:"password"},{default:a(()=>[e(g,{value:t(r).password,"onUpdate:value":l[15]||(l[15]=s=>t(r).password=s),placeholder:"请输入管理员密码"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},16)])]),_("div",R,[_("div",S,[e(C,{onClick:l[16]||(l[16]=s=>t(B)("/environment"))},{default:a(()=>[v(" 上一步 ")]),_:1})]),_("div",T,[e(C,{type:"primary",disabled:t(w),danger:"",onClick:k},{default:a(()=>[v(" 下一步 ")]),_:1},8,["disabled"])])])])}}});const K=z(W,[["__scopeId","data-v-227fbd36"]]);export{K as default};
