import"./vendor/vue-7c9b4e57.js";import{m as H,u as Z,a as Ie,r as Ve,b as O}from"./views/login/component/login-35e8a419.js";import{u as Pe}from"./vendor/vue-router-776dd066.js";import{v as Te}from"./vendor/@vueuse-2006ee9f.js";import{r as g,Z as X,h as qe,af as Oe,d as C,ai as E,o as y,I as R,w as Le,k as B,c as x,a as p,P as S,u as r,F as ae,W as he,au as z,aG as Be,aH as fe,M as I,ah as Me,l as Y,J as W,L as Qe,R as Q,Q as ce,a6 as re,y as We,E as $e,j as Fe,aI as Ke,V as Xe,O as ie}from"./vendor/@vue-b9898b5a.js";import{c as Ue,d as De}from"./vendor/pinia-29b2e896.js";import{s as Je}from"./vendor/pinia-plugin-persistedstate-ed167f96.js";import{a as V,r as _,u as U,E as A,e as je,j as Ge,c as $,f as F,d as He,k as Ze,m as ee,h as P,n as T,g as ze,i as Ye,p as et,q as tt,b as le,s as ue,t as de,v as nt,w as ot,x as st,y as at}from"./views/builder/index-bbe75387.js";import{N as te}from"./vendor/nprogress-bf0b4bc4.js";import{E as ct,c as ye,b as L,i as rt,z as it,e as lt}from"./vendor/element-plus-616bd1f6.js";import{a as ve}from"./vendor/axios-a921b253.js";import{q as ut}from"./vendor/qs-43fbfb33.js";import{D as pe}from"./vendor/dplayer-292bf7b5.js";import{e as dt}from"./vendor/echarts-02a375f3.js";import{l as mt}from"./vendor/less-27190d88.js";import{N as D}from"./vendor/@vicons-4f55c573.js";import{Q as J}from"./vendor/@element-plus-950f8d06.js";import"./vendor/vue-demi-09065cd0.js";import"./vendor/call-bind-apply-helpers-be8cb158.js";import"./vendor/function-bind-48f717dc.js";import"./vendor/es-errors-c75f5a96.js";import"./vendor/lodash-es-4da90d2e.js";import"./vendor/@sxzz-c75af06c.js";import"./vendor/@ctrl-f8748455.js";import"./vendor/dayjs-f13f0179.js";import"./vendor/async-validator-dee29e8b.js";import"./vendor/memoize-one-297ddbcb.js";import"./vendor/normalize-wheel-es-ed76fb12.js";import"./vendor/@floating-ui-606f2ab9.js";import"./vendor/side-channel-0dbdc6f7.js";import"./vendor/object-inspect-c0ea0ea8.js";import"./vendor/side-channel-list-813b42be.js";import"./vendor/side-channel-map-b5cc23df.js";import"./vendor/get-intrinsic-dea6481b.js";import"./vendor/es-object-atoms-11ea1ab9.js";import"./vendor/math-intrinsics-9389030e.js";import"./vendor/gopd-30775706.js";import"./vendor/es-define-property-27915812.js";import"./vendor/has-symbols-76fb15e9.js";import"./vendor/get-proto-15e8f36b.js";import"./vendor/dunder-proto-2a4d8230.js";import"./vendor/hasown-31deb62f.js";import"./vendor/call-bound-a02b33b4.js";import"./vendor/side-channel-weakmap-cc03a2a3.js";import"./vendor/tslib-54e39b60.js";import"./vendor/zrender-744c9c42.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const _e=e=>{let t=new Map;for(const n of e)if(n.menu_key){if(n.children&&n.children.length>0){const o=_e(n.children);t=new Map([...t,...o])}t.set(`/${n.path}`,n.menu_key)}return t},ht=()=>{const e=H(),t=Pe(),n=X({active:""}),o=a=>{const c=_e(e.menus).get(a)??"";n.active=c};return qe(()=>t.fullPath,()=>{o(t.path)}),{...Oe(n),updateActive:o}},[ft,yt]=Te(ht),Bo=()=>yt()??{active:g(""),updateActive:()=>{}},vt=C({__name:"App",setup(e){return ft(),(t,n)=>{const o=E("xb-view");return y(),R(o)}}}),be=Ue();be.use(Je);te.configure({easing:"ease",speed:500,showSpinner:!0,trickleSpeed:200,minimum:.3});const pt=async e=>{var o,a;const{siteInfo:t}=V(),n=((o=t==null?void 0:t.public_api)==null?void 0:o.layouts)??"";return e={...((a=_.currentRoute.value)==null?void 0:a.query)??{},...e},await U(n,e).then(s=>s.data)},j=g("OS"),G=matchMedia("(prefers-color-scheme: dark)"),K=()=>{G.matches?document.documentElement.dataset.theme="dark":document.documentElement.dataset.theme="light"};Le(()=>{j.value==="OS"?(G.addEventListener("change",K),K()):(document.documentElement.dataset.theme=j.value,G.removeEventListener("change",K))});function _t(){return{theme:j}}const bt={layoutMode:"",theme:"OS",isCollapse:!1,footerHeight:40,headerHeight:60,logoSize:40,sideMenuOrdinaryWidth:200,sideMenuCollapseWidth:64},gt=De("layout",()=>{const e=g({...bt});return{layoutInfo:e,getLayout:async s=>{s={layout:"sideBar",...s};const c=await pt(s);return c?(e.value=c,c):(A.confirm({type:"error",title:"温馨提示",message:"获取主题配置失败",showCancelButton:!1,confirmButtonText:"确定"}),Promise.reject("获取主题配置失败"))},setTheme:s=>{e.value.theme=s,_t().theme.value=s},setLayout:s=>{e.value.layoutMode=s},hanldCollapse:s=>{e.value.isCollapse=s}}});_.beforeEach(async(e,t,n)=>{var u;if(te.start(),e.path===je)return n();const o=V();if((u=o.siteInfo)!=null&&u.web_version||await o.getSite(),Ge.includes(e.path))return n();const a=$();if(!a.value&&e.path!==F)return n({path:F,query:{redirect:e.fullPath}});const s=Z();if(!s.userInfo&&a.value&&await s.getUserInfo(),a.value&&e.path===F)return n({path:"/"});const c=H();if(c.menus.length===0&&a.value){await c.getMenus();const d=Ie(c.menus);return Ve(d),n({...e,replace:!0})}const i=gt();!i.layoutInfo.layoutMode&&a.value&&await i.getLayout(),n()});_.afterEach(e=>{var c;const{siteInfo:t}=V(),n=(t==null?void 0:t.web_name)||"积木云",o=(t==null?void 0:t.web_version)||"1.0.0",a=`${n} ${o}`;let s=(c=e.meta)!=null&&c.title?e.meta.title:n;s&&(s=`${s} - ${a}`),document.title=s,te.done()});const xt=(e,t=0,n="_blank")=>{if(!e){He("缺少重定向地址","温馨提示");return}const o=/^http?:\/\//.test(e),a=/^https?:\/\//.test(e);if(o||a){window.open(e,n);return}const s=_.getRoutes().some(c=>c.path===e);t>0?Ze(`页面将在 ${t} 秒后跳转`,"温馨提示",{duration:t*1e3,onClose:()=>{s?_.push(e):window.open(e,n)}}):s?_.push(e):window.open(e,n)};A.on("EVENT:ROUTE",e=>{const t=e;_.push(t)});A.on("EVENT:NOTIFY",e=>{ct(e)});A.on("EVENT:MESSAGE",e=>{ye(e)});A.on("EVENT:CONFIRM",e=>{const{message:t}=e,n=e;L.confirm(t,n)});A.on("EVENT:REFRESH",e=>{const{refreshType:t,refreshToken:n}=e;console.log("Refresh token:",n,"Type:",t)});A.on("EVENT:REFRESH",()=>{_.push({path:"/redirect",query:{redirect:_.currentRoute.value.fullPath}})});A.on("EVENT:RELOAD",()=>{window.location.reload()});A.on("EVENT:KICKOUT",e=>{const{clearLoginOut:t}=Z();t(),ee((e==null?void 0:e.message)??"已踢出用户登录",(e==null?void 0:e.type)??"error",(e==null?void 0:e.title)??"温馨提示")});A.on("EVENT:REDIRECT",e=>{const{url:t,delay:n=0,target:o="_blank"}=e;xt(t,n,o)});function ne(e){e.use(be),e.use(_),e.use(rt),window.vueApp=e}const wt="/backend/assets/static/png/play.b9bcc63d.png",Ct="data:image/png;base64,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";function kt(){const e=g(null),t=g(null),n=g(0),o=g(0),a=g(0),s=g(!1);B(()=>{setTimeout(()=>{d()},200)});const c=h=>{d(),m()};function i(h){const l=Math.floor(h/60),f=h%60,b=String(l).padStart(2,"0"),k=String(f).padStart(2,"0");return`${b}:${k}`}const u=h=>{const l=t.value.getBoundingClientRect();let b=(h.clientX-l.left)/l.width,k=b*100;o.value=k;let N=b*e.value.duration;n.value=i(Math.floor(N)),e.value.currentTime=N,m()},d=()=>{var f,b,k;let h=((f=e.value)==null?void 0:f.currentTime)??0,l=isNaN(((b=e.value)==null?void 0:b.duration)??0)?0:((k=e.value)==null?void 0:k.duration)??0;n.value=i(Math.floor(h)),a.value=i(Math.floor(l)),o.value=Math.floor(h)/Math.floor(l)*100},m=h=>{if(!e.value)return s.value=!1,!1;e.value.paused?(e.value.play().catch(l=>{console.error(l)}),s.value=!0):(e.value.pause(),s.value=!1)};return{aduio:e,setbacksBox:t,currentTime:n,progress:o,duration:a,isPlay:s,handlePlay:m,handleBacks:u,handleTimeUpdate:d,handleCanPlay:c,handleEnd:()=>{m()}}}const Et={class:"xb-audio"},St={class:"audio-container flex justify-between"},At={class:"flex-1"},Rt={class:"title"},Nt={class:"flex justify-between"},It={class:"mgl-6"},Vt={class:"play-btn"},Pt=["src"],Tt=C({__name:"index",props:{title:{type:String,default:"未知音频"},url:{type:String,default:""}},setup(e){const{aduio:t,setbacksBox:n,currentTime:o,progress:a,duration:s,isPlay:c,handlePlay:i,handleBacks:u,handleTimeUpdate:d,handleCanPlay:m,handleEnd:v}=kt();return(h,l)=>(y(),x("div",Et,[p("div",St,[p("div",At,[p("div",Rt,S(e.title),1),p("div",Nt,[p("span",null,S(r(o)),1),p("span",It,S(r(s)),1)]),p("div",{class:"audio-setbacks",ref_key:"setbacksBox",ref:n,onClick:l[0]||(l[0]=(...f)=>r(u)&&r(u)(...f))},[p("i",{class:"audio-this-setbacks",style:ae({width:r(a)+"%"})},l[6]||(l[6]=[p("span",{class:"audio-backs-btn"},null,-1)]),4),p("span",{class:"audio-cache-setbacks",style:ae({width:r(a)+"%"})},null,4)],512)]),p("div",Vt,[r(c)?(y(),x("img",{key:1,src:Ct,class:"play-icon",onClick:l[2]||(l[2]=(...f)=>r(i)&&r(i)(...f))})):(y(),x("img",{key:0,src:wt,class:"play-icon",onClick:l[1]||(l[1]=(...f)=>r(i)&&r(i)(...f))}))])]),p("audio",{ref_key:"aduio",ref:t,src:e.url,class:"custom-audio",onCanplay:l[3]||(l[3]=(...f)=>r(m)&&r(m)(...f)),onEnded:l[4]||(l[4]=(...f)=>r(v)&&r(v)(...f)),onTimeupdate:l[5]||(l[5]=(...f)=>r(d)&&r(d)(...f)),controls:""}," 您的浏览器不支持音频元素。 ",40,Pt)]))}});const qt=P(Tt,[["__scopeId","data-v-fbc3a5cd"]]),Ot=()=>{var o,a;const e=$(),n=((a=(o=V().siteInfo)==null?void 0:o.upload_api)==null?void 0:a.upload)??"";return{context:{API_HOST:T,TOKEN:e.value,UPLOAD_FILE_API:`${T}${n}`,UPLOAD_IMAGE_API:`${T}${n}`},data:{}}},ge=(e,t,n)=>{ye({message:e,type:t,...n})},Lt=(e,t)=>{ee(t,e,"温馨提示")},Bt=e=>{ge(e,"温馨提示","info")},Mt=(e,t,n)=>O(e,t??"温馨提示","warning"),Qt=e=>{const t=`/${_.currentRoute.value.path}`;return(e.split("?")[0]??"")===t},Wt=(e,t)=>{if(e==="goBack")return _.back();if(t&&t.actionType==="url"){t.blank===!1?_.push(e):window.open(e);return}if(t&&e&&t.target){window.open(e,t.target);return}/^https?:\/\//.test(e)?_.replace(e):_.push(e)},$t=(e,t)=>{if(e==="goBack")return _.go(-2);const n=_.currentRoute.value,o={pathname:n.path,hash:n.hash,query:n.query,search:`?${ut.stringify(n.query)}`},{normalizeLink:a}=window.amisRequire("amis-core");e=a(e,o),ze(e.split("?")[1]||"")},Ft=e=>{e.baseURL=T,e.timeout=6e4,e.withCredentials=!0,e.headers=e.headers||{};const t=$();e.headers.Authorization=t.value||"";const n=_.currentRoute.value.query||null;return n&&(e.params={...e.params,...n}),ve(e)},Kt=e=>{e.url=`${T}${e.url}`;const t=$();t.value&&(e.headers.Authorization=t.value)},Xt=(e,t,n,o,a)=>t,Ut=()=>({notify:Lt,alert:Bt,confirm:Mt,jumpTo:Wt,isCurrentUrl:Qt,updateLocation:$t,fetcher:Ft,requestAdaptor:Kt,responseAdaptor:Xt,isCancel:e=>ve.isCancel(e)}),Dt=(e,t)=>{mt.render(t).then(n=>{const o=document.createElement("style");o.setAttribute("id",e),o.setAttribute("type","text/css");const a=document.createTextNode(n.css);o.appendChild(a);const s=document.getElementsByTagName("head");s.length?s[0].appendChild(o):document.documentElement.appendChild(o)})},xe=(e,t,n=!1)=>{if(!document.querySelector(`style[id=${e}]`)){let o="";n?(o=`#${e} ${t}`,o=o.replace(`#${e}
`,`#${e}`)):o=t,Dt(e,o)}},Jt=`<template>\r
  <div class="template-container">\${content}</div>\r
</template>\r
\r
<script>\r
export default {\r
  data() {\r
    return {}\r
  },\r
  methods: {},\r
}\r
<\/script>\r
`,me=(e="")=>Jt.replace("${content}",e),we=e=>{e||(e=me("渲染错误，组件内容为空")),e.includes("<template>")||(e=me(e));const t=Be(e),{template:n,scriptSetup:o,script:a,styles:s}=t.descriptor,i=((o==null?void 0:o.content)??(a==null?void 0:a.content)??"").split("export default")??[],u=i[0]??"";let d=(i[1]??"").replaceAll("};","}");const m=`${u}
return ${d}`,v=new Function(m)();v.template=(n==null?void 0:n.content)??"";const h=(s==null?void 0:s.map(b=>b.content).join(`
`))??"",l=(s==null?void 0:s.map(b=>b.lang).join(`
`))??"",f=s==null?void 0:s.map(b=>b.scoped).toString();return v.style=h,v.styleLang=l,v.styleScoped=(f&&f==="true")??!1,v},jt=(e,t,n)=>{const o=we(t),a=fe(()=>new Promise(i=>{i(o)})),s=he(),c=z(a,{...s,...n});return xe(e,o.style,o.styleScoped),ne(c),Se(c),c.component(e,a),c.mount(`#${e}`),c},Gt=["id"],Ht=C({__name:"render",props:{template:{},vars:{}},setup(e){const t=g(`xb-render-${Date.now()}`);return B(()=>jt(t.value,e.template,e.vars)),(n,o)=>(y(),x("div",{id:r(t),class:"xb-render-component"},null,8,Gt))}});const Zt=P(Ht,[["__scopeId","data-v-5bd8b205"]]),Ce=C({__name:"index",props:{url:{},method:{},query:{},headers:{},vars:{}},setup(e){const t=g("");var n={};return Ye(e.url,e.method,e.query,e.headers).then(o=>{var c,i;const a=((c=o==null?void 0:o.data)==null?void 0:c.body[0].body)??"";t.value=a,n={...((i=o==null?void 0:o.data)==null?void 0:i.body[0].vars)??{},...e.vars}}),(o,a)=>r(t)?(y(),R(Zt,{key:0,template:r(t),vars:r(n)},null,8,["template","vars"])):I("",!0)}}),ke=(e,t={},n={})=>L({title:"常用模态框",draggable:!0,showClose:!1,closeOnClickModal:!1,showCancelButton:!0,showConfirmButton:!0,...n,message:()=>Me(e,t)}),Ee=async(e,t,n,o)=>ke(Ce,{url:e,query:t,vars:{...n,onOpen:c=>{const i=c.url||"",u=c.vars||{},d=c.option||{};if(!i){O("远程组件地址不能为空","温馨提示","error");return}L.close(),Ee(i,u,d)},onClose:()=>{L.close()}}},{title:"远程组件模态框",customClass:"xb-render-modal",customStyle:{width:"50vw",height:"50vh"},draggable:!1,closeOnClickModal:!1,showClose:!0,showCancelButton:!1,showConfirmButton:!1,...o}),zt=(e,t="温馨提示",n="",o)=>L.alert(e,{confirmButtonText:"确定",type:n,title:t,...o}),Yt=e=>{const t=Z(),n=V(),o=H(),a=et(),s={get:U,post:le,put:ue,delete:de},c={token:t.getToken,userApp:t,siteApp:n,menuApp:o,moduleName:a,dplayer:pe,echarts:dt,utils:tt,baseURL:T,axios:s,useGet:U,usePost:le,usePut:ue,useDelete:de,useAlert:zt,useConfirm:O,useMessage:ge,useNotify:ee,useLoading:nt,useRemoteModal:Ee};e.config.globalProperties.$xbcode=c},en=e=>{const t=_.currentRoute.value.query;e.config.globalProperties.$route.query={...t}},Se=e=>{en(e),Yt(e),Re(e)},oe=(e,t,n,o)=>{const a=z(t,{...o,amis:n});return ne(a),Se(a),a.mount(e),a},M=(e,t,n,o)=>{typeof t!="string"&&(t="该远程组件内容并非组件模板字符串");const a=e.id||`xb-${Date.now()}`;e.id=a;const s=we(t),c=fe(()=>new Promise(i=>{i(s)}));return xe(e.id,s.style,s.styleScoped),oe(e,c,n,o)};function tn(e){var u,d,m;const t=((u=e==null?void 0:e.$schema)==null?void 0:u.className)??"",n=((d=e==null?void 0:e.$schema)==null?void 0:d.height)??"auto",o=((m=e==null?void 0:e.$schema)==null?void 0:m.style)??{},a=(e==null?void 0:e.body)??"",s=(e==null?void 0:e.vars)??{},c=window.amisRequire("react");let i=c.useRef(null);return c.useEffect(function(){const v=M(i.current,a,e,s);return()=>v.unmount}),c.createElement("div",{ref:i,className:`xb-amis-component xb-amis-render-view ${t}`,style:{height:n,...o}})}function nn(e){var v,h,l,f,b,k,N;const t=((v=e==null?void 0:e.$schema)==null?void 0:v.url)??"",n=((h=e==null?void 0:e.$schema)==null?void 0:h.method)??"get",o=((l=e==null?void 0:e.$schema)==null?void 0:l.headers)??{},a=((f=e==null?void 0:e.$schema)==null?void 0:f.data)??{},s=((b=e==null?void 0:e.$schema)==null?void 0:b.height)??"auto",c=((k=e==null?void 0:e.$schema)==null?void 0:k.style)??{},i=((N=e==null?void 0:e.$schema)==null?void 0:N.className)??"",u=(e==null?void 0:e.vars)??{},d=window.amisRequire("react");let m=d.useRef(null);return d.useEffect(function(){if(!t){M(m.current,"缺少远程组件地址",e);return}ot({url:t,method:n,data:a,headers:o}).then(w=>{const q=(w==null?void 0:w.data)??"";M(m.current,q,e,u)}).catch(()=>{M(m.current,"渲染组件错误",e)})}),d.createElement("div",{ref:m,className:`xb-amis-component xb-amis-remote-view ${i}`,style:{height:s,...c}})}const Ae=C({__name:"index",props:{icon:{},size:{default:18},color:{default:""}},setup(e){const t=Y(()=>{if(J[e.icon])return J[e.icon];if(D[e.icon])return D[e.icon]});return(n,o)=>{const a=E("el-icon");return y(),R(a,{size:n.size,color:n.color},{default:W(()=>[(y(),R(Qe(r(t))))]),_:1},8,["size","color"])}}});function on(e){var m,v,h,l;const t=((m=e==null?void 0:e.$schema)==null?void 0:m.name)??"";let n=(e==null?void 0:e.data[t])??"";n||(n=((v=e==null?void 0:e.$schema)==null?void 0:v.value)??"");const o=(h=e==null?void 0:e.$schema)==null?void 0:h.size,a=(l=e==null?void 0:e.$schema)==null?void 0:l.color;delete e.$schema.icon,delete e.$schema.size,delete e.$schema.color;const s=(e==null?void 0:e.$schema)??{},c=window.amisRequire("react"),i=c.useRef(null),d=`xb-icons-${st()}`;return c.useEffect(function(){const f=oe(i.current,Ae,e,{icon:n,size:o,color:a});return()=>f.unmount()}),c.createElement("div",{ref:i,id:d,...s})}const sn={class:"xb-icon-list"},an={class:"tools"},cn={class:"title"},rn={class:"options"},ln={class:"list"},un=["onDblclick","onClick"],dn={class:"icon-title"},mn=C({__name:"modal",emits:["update:init"],setup(e,{expose:t,emit:n}){const o=Fe(),a=n,s=g("element"),c=g([{title:"ElementPlus",type:"element",icons:Object.keys(J)},{title:"viconsAntd",type:"naiveui",icons:Object.keys(D)}]),i=g(null),u=Y(()=>{var h;return((h=c.value.find(l=>l.type===s.value))==null?void 0:h.icons)||[]}),d=h=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(h).then(l=>{});else{const l=document.createElement("input");l.value=h,document.body.appendChild(l),l.select(),document.execCommand("Copy"),l.remove()}at("复制成功")},m=h=>{i.value=h},v=()=>i.value;return B(()=>{a("update:init",o.exposed)}),t({confirm:v}),(h,l)=>{var N;const f=E("el-option"),b=E("el-select"),k=E("xbIcons");return y(),x("div",sn,[p("div",an,[p("div",cn,S((N=r(c).find(w=>w.type===r(s)))==null?void 0:N.title)+" 图标库 ",1),p("div",rn,[Q(b,{modelValue:r(s),"onUpdate:modelValue":l[0]||(l[0]=w=>We(s)?s.value=w:null)},{default:W(()=>[(y(!0),x(ce,null,re(r(c),(w,q)=>(y(),R(f,{key:q,label:w.title,value:w.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),p("div",ln,[(y(!0),x(ce,null,re(r(u),(w,q)=>(y(),x("div",{key:q,class:$e(["item",{active:w===r(i)}]),onDblclick:Ne=>d(w),onClick:Ne=>m(w)},[Q(k,{icon:w,size:26,type:r(s),color:"#888"},null,8,["icon","type"]),p("div",dn,S(w),1)],42,un))),128))])])}}});const hn=P(mn,[["__scopeId","data-v-abcd86bf"]]),fn=e=>new Promise((t,n)=>{const o=g(),a={"onUpdate:init":c=>{o.value=c}},s={...e,title:"图标选择器",customClass:"xb-icon-modal",beforeClose:(c,i,u)=>{var d;if(c==="confirm"){if(!((d=o.value)!=null&&d.confirm)){O("确认事件错误","温馨提示","error"),n(new Error("确认事件错误"));return}const m=o.value.confirm();if(!m){O("请选择图标","温馨提示","error"),n(new Error("请选择图标"));return}t(m)}u()}};ke(hn,a,s)}),yn={key:1},vn=C({__name:"picker",props:{amis:{}},setup(e){const t=e,n=()=>{fn().then(o=>{t.amis.onChange(o,t.amis.name)})};return(o,a)=>{const s=E("xbIcons"),c=E("el-input");return y(),R(c,{placeholder:"请选择图标",onClick:n,value:o.amis.value,readonly:""},{prepend:W(()=>[o.amis.value?(y(),R(s,{key:0,icon:o.amis.value},null,8,["icon"])):(y(),x("span",yn,"无"))]),_:1},8,["value"])}}});function pn(e){var s,c;const t=((s=e==null?void 0:e.$schema)==null?void 0:s.name)??"";var n=(e==null?void 0:e.data[t])??"";n||(n=((c=e==null?void 0:e.$schema)==null?void 0:c.value)??"");const o=window.amisRequire("react"),a=o.useRef(null);return o.useEffect(()=>{const i=oe(a.current,vn,e);return()=>i.unmount()}),o.createElement("div",{ref:a})}const _n={xbComponentRender:{isFormItem:!1,component:tn},xbComponentRemote:{isFormItem:!1,component:nn},xbIcons:{isFormItem:!1,component:on},xbIconsPicker:{isFormItem:!0,component:pn}},bn=()=>{const e=window.amisRequire("amis");Object.entries(_n).forEach(([t,n])=>{n.isFormItem?e.FormItem({name:"static",test:new RegExp(`(^|/)${t}$`)})(n.component):e.Renderer({name:"static",test:new RegExp(`(^|/)${t}$`)})(n.component)})};function gn(e,t){const n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",e),n.onload=()=>t(),n.onerror=()=>t(new Error(`Failed to load ${e}`)),document.body.appendChild(n)}function xn(e){for(const t of e){const n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",t),document.head.insertBefore(n,document.head.firstChild)}}function wn(){return new Promise((e,t)=>{if(window.amisRequire){e(new Error("SDK already loaded"));return}const n="backend",o="assets/amis",s=["sdk.css","helper.css","iconfont.css","theme/default.css"].map(c=>`/${n}/${o}/${c}`);xn(s),gn(`/${n}/${o}/sdk.js`,c=>{if(c){t(c);return}e("SDK loaded successfully")})})}const Cn={ref:"amis-render",style:{position:"relative"}},kn=C({__name:"index",props:{schema:{}},emits:["ready"],setup(e,{emit:t}){const n=t,o=Ke("amis-render"),a=g(null),s=async()=>{await wn();const c=window.amisRequire("amis/embed");bn();const i=c.embed(o.value,e.schema,Ot(),Ut(),()=>{n("ready",{instance:i})});a.value=i,n("ready",a.value)};return B(()=>s()),Xe(()=>{var c;(c=a.value)==null||c.unmount()}),(c,i)=>(y(),x("div",Cn,null,512))}}),En={key:0,class:"copyright"},Sn=["href"],An=["href"],Rn=C({__name:"index",setup(e){const{siteInfo:t}=V(),n=t==null?void 0:t.about_name,o=t==null?void 0:t.about_url,a=t==null?void 0:t.web_name,s=t==null?void 0:t.web_url,c=t==null?void 0:t.web_version;return(i,u)=>r(n)&&r(o)&&r(a)&&r(s)?(y(),x("div",En,[u[0]||(u[0]=ie(" copyright © 2023-2025 ")),r(n)&&r(o)?(y(),x("a",{key:0,href:`${r(o)}`,target:"_blank",class:"pl-10px"},S(r(n)),9,Sn)):I("",!0),u[1]||(u[1]=ie(" All Rights Reserved ")),r(a)&&r(s)?(y(),x("a",{key:1,href:`${r(s)}`,target:"_blank",class:"pl-10px"},S(r(a))+" "+S(r(c)),9,An)):I("",!0)])):I("",!0)}});const Nn=P(Rn,[["__scopeId","data-v-ea549cd5"]]),In="/backend/assets/static/png/beian.gov.a20583c8.png",Vn={key:0,class:"beian-pro"},Pn="http://beian.miit.gov.cn/",Tn=C({__name:"beian",setup(e){const{siteInfo:t}=V(),n=`http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=${t==null?void 0:t.web_police_code}`;return(o,a)=>{var c,i,u,d,m,v,h;const s=E("el-image");return(c=r(t))!=null&&c.web_icp||(i=r(t))!=null&&i.web_police?(y(),x("div",Vn,[(u=r(t))!=null&&u.web_icp?(y(),x("a",{key:0,class:"item",href:Pn,target:"_blank"},S((d=r(t))==null?void 0:d.web_icp),1)):I("",!0),(m=r(t))!=null&&m.web_police&&((v=r(t))!=null&&v.web_police_code)?(y(),x("a",{key:1,class:"item",href:n,target:"_blank"},[Q(s,{class:"beian-gov",src:r(In)},null,8,["src"]),p("span",null,S((h=r(t))==null?void 0:h.web_police),1)])):I("",!0)])):I("",!0)}}});const qn=P(Tn,[["__scopeId","data-v-ed3d7bfd"]]),On={class:"xb-video"},Ln=C({__name:"index",props:{title:{},url:{}},setup(e){const t=e,n=he(),o=g({...n,video:{url:t.url}});return B(()=>{const a=document.getElementById("dplayer");new pe({container:a,...o.value})}),(a,s)=>(y(),x("div",On,s[0]||(s[0]=[p("div",{id:"dplayer"},null,-1)])))}});const Bn=P(Ln,[["__scopeId","data-v-b7e245fd"]]),Mn="www.xbcode.net",Qn=()=>{var n;const e=(n=document.getElementById("xbcode-link"))==null?void 0:n.getAttribute("href");return!e||e.replace(/https?:\/\//,"").replace(/\/$/,"")!==Mn},Wn={key:0,class:"empty"},$n=C({__name:"index",setup(e){const t=g("zh-cn"),n=Y(()=>t.value==="zh-cn"?it:lt),o=X({autoInsertSpace:!1}),a=X({max:1}),s=Qn();return(c,i)=>{const u=E("el-empty"),d=E("router-view"),m=E("el-config-provider");return y(),R(m,{button:r(o),message:r(a),locale:r(n)},{default:W(()=>[r(s)?(y(),x("div",Wn,[Q(u,{description:"异常错误，非法使用"})])):(y(),R(d,{key:1}))]),_:1},8,["button","message","locale"])}}});const Fn=P($n,[["__scopeId","data-v-10abcbf3"]]),Kn={xbAudio:qt,xbBuilder:kn,xbCopyright:Nn,xbBeian:qn,xbIcons:Ae,xbRender:Ce,xbVideo:Bn,xbView:Fn},Re=e=>{Object.entries(Kn).forEach(([t,n])=>{e.component(t,n)})},se=z(vt);ne(se);Re(se);se.mount("#app");export{gt as l,Dt as r,Bo as u};
