var G=Object.defineProperty;var K=(e,t,r)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var k=(e,t,r)=>K(e,typeof t!="symbol"?t+"":t,r);import"../../vendor/vue-b5f628c3.js";import{a as z}from"../../vendor/axios-a921b253.js";import{c as Y,a as Q,u as C,b as X}from"../../vendor/vue-router-18dbe4bf.js";import{s as Z,v as J}from"../../vendor/@vueuse-cb382515.js";import{E as ee,a as te}from"../../vendor/element-plus-2ce8f5a6.js";import{d as re}from"../../vendor/pinia-d0b1b439.js";import{a5 as ne,W as se,r as u,d as D,k as oe,ai as v,ar as ae,M as ce,u as m,o as T,c as N,T as S,L as A,Q as ie,P as x,K as ue}from"../../vendor/@vue-209dae6a.js";const le="modulepreload",de=function(e){return"/backend/"+e},V={},h=function(t,r,n){if(!r||r.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=de(o),o in V)return;V[o]=!0;const a=o.endsWith(".css"),E=a?'[rel="stylesheet"]':"";if(!!n)for(let i=s.length-1;i>=0;i--){const p=s[i];if(p.href===o&&(!a||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${E}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":le,a||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),a)return new Promise((i,p)=>{c.addEventListener("load",i),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})},me={path:"/",name:"default-router",component:()=>h(()=>import("../../index-d6964515.js"),["assets/index-d6964515.js","assets/vendor/vue-b5f628c3.js","assets/vendor/@vue-209dae6a.js","assets/vendor/vue-router-18dbe4bf.js","assets/vendor/@element-plus-61f2bffa.js","assets/index-5753bf99.js","assets/views/login/component/login-32a99be5.js","assets/vendor/pinia-d0b1b439.js","assets/vendor/vue-demi-b27b5f21.js","assets/vendor/element-plus-2ce8f5a6.js","assets/vendor/lodash-es-41619749.js","assets/vendor/@vueuse-cb382515.js","assets/vendor/@sxzz-c75af06c.js","assets/vendor/@ctrl-f8748455.js","assets/vendor/dayjs-be4529cb.js","assets/vendor/@wangeditor-788aa567.js","assets/static/css/@wangeditor.501cf061.css","assets/vendor/async-validator-dee29e8b.js","assets/vendor/memoize-one-297ddbcb.js","assets/vendor/normalize-wheel-es-ed76fb12.js","assets/vendor/@floating-ui-1ce37bfe.js","assets/static/css/element-plus.49c2137f.css","assets/static/css/login.df1f767a.css","assets/vendor/pinia-plugin-persistedstate-ed167f96.js","assets/vendor/nprogress-0a2c6fb0.js","assets/static/css/nprogress.771398e6.css","assets/vendor/axios-a921b253.js","assets/vendor/qs-8ba2d702.js","assets/vendor/side-channel-563153b6.js","assets/vendor/es-errors-c75f5a96.js","assets/vendor/object-inspect-0b216d8d.js","assets/vendor/side-channel-list-1349fdc5.js","assets/vendor/side-channel-map-4b712d1a.js","assets/vendor/get-intrinsic-50cfb5f2.js","assets/vendor/es-object-atoms-11ea1ab9.js","assets/vendor/math-intrinsics-9389030e.js","assets/vendor/gopd-30775706.js","assets/vendor/es-define-property-27915812.js","assets/vendor/has-symbols-76fb15e9.js","assets/vendor/get-proto-9c1ff8ae.js","assets/vendor/dunder-proto-a5399c94.js","assets/vendor/call-bind-apply-helpers-e4a24274.js","assets/vendor/function-bind-61637ca6.js","assets/vendor/hasown-20c58d17.js","assets/vendor/call-bound-c0bc6215.js","assets/vendor/side-channel-weakmap-9923858e.js","assets/vendor/dplayer-c0423fe2.js","assets/vendor/echarts-02a375f3.js","assets/vendor/tslib-54e39b60.js","assets/vendor/zrender-744c9c42.js","assets/vendor/less-0b36eefe.js","assets/vendor/@vicons-7419da81.js","assets/vendor/vditor-7933e40d.js","assets/static/css/vditor.410525cb.css","assets/static/css/index.68ff3202.css","assets/static/css/index.a9bc7432.css"]),redirect:"/workbench",meta:{title:"首页"},children:[{path:"/workbench",name:"Workbench",component:()=>h(()=>import("../workbench/index-0d9dc824.js"),["assets/views/workbench/index-0d9dc824.js","assets/vendor/vue-b5f628c3.js","assets/vendor/@vue-209dae6a.js","assets/vendor/vue-router-18dbe4bf.js","assets/vendor/axios-a921b253.js","assets/vendor/@vueuse-cb382515.js","assets/vendor/element-plus-2ce8f5a6.js","assets/vendor/lodash-es-41619749.js","assets/vendor/@element-plus-61f2bffa.js","assets/vendor/@sxzz-c75af06c.js","assets/vendor/@ctrl-f8748455.js","assets/vendor/dayjs-be4529cb.js","assets/vendor/@wangeditor-788aa567.js","assets/static/css/@wangeditor.501cf061.css","assets/vendor/async-validator-dee29e8b.js","assets/vendor/memoize-one-297ddbcb.js","assets/vendor/normalize-wheel-es-ed76fb12.js","assets/vendor/@floating-ui-1ce37bfe.js","assets/static/css/element-plus.49c2137f.css","assets/vendor/pinia-d0b1b439.js","assets/vendor/vue-demi-b27b5f21.js","assets/static/css/index.cf2fd17c.css"]),meta:{title:"工作台"}}]},Ee={path:"/exception",name:"exception",meta:{title:"抱歉，页面不存在~"},component:()=>h(()=>import("../exception/index-c8039d8b.js"),["assets/views/exception/index-c8039d8b.js","assets/vendor/vue-b5f628c3.js","assets/vendor/@vue-209dae6a.js","assets/vendor/vue-router-18dbe4bf.js","assets/vendor/axios-a921b253.js","assets/vendor/@vueuse-cb382515.js","assets/vendor/element-plus-2ce8f5a6.js","assets/vendor/lodash-es-41619749.js","assets/vendor/@element-plus-61f2bffa.js","assets/vendor/@sxzz-c75af06c.js","assets/vendor/@ctrl-f8748455.js","assets/vendor/dayjs-be4529cb.js","assets/vendor/@wangeditor-788aa567.js","assets/static/css/@wangeditor.501cf061.css","assets/vendor/async-validator-dee29e8b.js","assets/vendor/memoize-one-297ddbcb.js","assets/vendor/normalize-wheel-es-ed76fb12.js","assets/vendor/@floating-ui-1ce37bfe.js","assets/static/css/element-plus.49c2137f.css","assets/vendor/pinia-d0b1b439.js","assets/vendor/vue-demi-b27b5f21.js"])},pe={path:"/login",name:"Login",component:()=>h(()=>import("../login/index-a89e6900.js"),["assets/views/login/index-a89e6900.js","assets/vendor/vue-b5f628c3.js","assets/vendor/@vue-209dae6a.js","assets/views/login/component/login-32a99be5.js","assets/vendor/pinia-d0b1b439.js","assets/vendor/vue-demi-b27b5f21.js","assets/vendor/element-plus-2ce8f5a6.js","assets/vendor/lodash-es-41619749.js","assets/vendor/@vueuse-cb382515.js","assets/vendor/@element-plus-61f2bffa.js","assets/vendor/@sxzz-c75af06c.js","assets/vendor/@ctrl-f8748455.js","assets/vendor/dayjs-be4529cb.js","assets/vendor/@wangeditor-788aa567.js","assets/static/css/@wangeditor.501cf061.css","assets/vendor/async-validator-dee29e8b.js","assets/vendor/memoize-one-297ddbcb.js","assets/vendor/normalize-wheel-es-ed76fb12.js","assets/vendor/@floating-ui-1ce37bfe.js","assets/static/css/element-plus.49c2137f.css","assets/static/css/login.df1f767a.css","assets/views/login/component/remote-20e323b2.js","assets/vendor/axios-a921b253.js","assets/vendor/vue-router-18dbe4bf.js"]),meta:{title:"用户登录"}},_e={path:"/:pathMatch(.*)",component:()=>h(()=>import("../exception/index-c8039d8b.js"),["assets/views/exception/index-c8039d8b.js","assets/vendor/vue-b5f628c3.js","assets/vendor/@vue-209dae6a.js","assets/vendor/vue-router-18dbe4bf.js","assets/vendor/axios-a921b253.js","assets/vendor/@vueuse-cb382515.js","assets/vendor/element-plus-2ce8f5a6.js","assets/vendor/lodash-es-41619749.js","assets/vendor/@element-plus-61f2bffa.js","assets/vendor/@sxzz-c75af06c.js","assets/vendor/@ctrl-f8748455.js","assets/vendor/dayjs-be4529cb.js","assets/vendor/@wangeditor-788aa567.js","assets/static/css/@wangeditor.501cf061.css","assets/vendor/async-validator-dee29e8b.js","assets/vendor/memoize-one-297ddbcb.js","assets/vendor/normalize-wheel-es-ed76fb12.js","assets/vendor/@floating-ui-1ce37bfe.js","assets/static/css/element-plus.49c2137f.css","assets/vendor/pinia-d0b1b439.js","assets/vendor/vue-demi-b27b5f21.js"])},he={path:"/redirect",name:"Redirect",component:()=>h(()=>import("../redirect/index-90247cf8.js"),["assets/views/redirect/index-90247cf8.js","assets/vendor/vue-b5f628c3.js","assets/vendor/@vue-209dae6a.js","assets/vendor/vue-router-18dbe4bf.js"]),meta:{title:"正在重定向"}},fe=[me,he,pe,Ee,_e],f=Y({routes:fe,history:Q()}),Re="/workbench",ve="/login",O="/exception",Te="/layout/exception",ut=[ve,O],b=(e,t,r="",n)=>ee({message:e,title:r,duration:2e3,type:t,...n}),ye=(e,t="温馨提示",r)=>b(e,"success",t,r),Pe=(e,t="温馨提示",r)=>b(e,"error",t,r),lt=(e,t="温馨提示",r)=>b(e,"warning",t,r),w=()=>location.pathname.replace(/^\/+|\/+$/g,""),I=e=>{let t;try{t=new URL(e)}catch{return!1}return t.protocol==="http:"||t.protocol==="https:"},Ne=(e,t={},r="_blank")=>{I(e)?window.open(e,r):f.push({path:e,query:t})};function Se(e=6){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return t}const Oe=()=>{var r;const e=f.currentRoute.value;if(!((r=e.query)!=null&&r.redirect)){Pe("返回上次页面错误");return}const t=U(e.query.redirect);f.push({path:e.query.redirect,query:{...t}})},be=e=>e.replace(/\/(\w)/g,(t,r)=>r.toUpperCase());function we(e){return e.split("-").map((t,r)=>r===0?t:t.charAt(0).toUpperCase()+t.slice(1)).join("")}const ge=(e,t="Enter")=>{const r=n=>{n.key===t&&(e(),n.preventDefault())};ne(()=>document.addEventListener("keydown",r)),se(()=>document.removeEventListener("keydown",r))},U=e=>{if(!e)return{};const t=e.slice(e.indexOf("?")+1).split("&"),r={};for(const n of t){const[s,o]=n.split("=");r[s]=o}return r},ke=e=>{const t=new URLSearchParams;for(const[n,s]of Object.entries(e))t.append(n,s);return t.toString()},Ae=()=>window.location.origin,L=e=>e?e.toUpperCase():"",xe=e=>L(e)??"GET",Ve=e=>{var t;return(t=f.currentRoute.value.query)!=null&&t.redirect?f.currentRoute.value.query.redirect:e||Re},Ce=e=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(e).then(t=>{});else{const t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.remove()}ye("复制成功")},De=e=>{if(!e)return"";const{siteInfo:t}=Ge(),r=u(t==null?void 0:t.web_url);if(!r.value){const s="http://49.235.68.138:39900/",o=s.endsWith("/")?s.slice(0,-1):s;r.value=o}let n="";return r.value&&(n=`${r.value}${e}`),n},dt=Object.freeze(Object.defineProperty({__proto__:null,getBaseUrl:Ae,getMethodName:xe,getModuleName:w,getRanDom:Se,getUrlVars:U,getWebUrl:De,getWorkbenchPath:Ve,hanldToBack:Oe,isUrl:I,objectToVars:ke,openWin:Ne,strToUpperCase:L,toCamelCase:we,underlineToCamel:be,useCopy:Ce,useKeyCodeEvent:ge},Symbol.toStringTag,{value:"Module"}));let B="http://49.235.68.138:39900/";B=window.location.origin;const y=B,mt=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/")?`${y}${e}`:`${y}/${e}`:y;class Ie{constructor(){k(this,"events",{"EVENT:ROUTE":new Set,"EVENT:NOTIFY":new Set,"EVENT:MESSAGE":new Set,"EVENT:CONFIRM":new Set,"EVENT:RELOAD":new Set,"EVENT:REFRESH":new Set,"EVENT:KICKOUT":new Set,"EVENT:REDIRECT":new Set})}push(t){this.emit("EVENT:ROUTE",t)}notify(t){this.emit("EVENT:NOTIFY",t)}message(t){this.emit("EVENT:MESSAGE",t)}confirm(t){this.emit("EVENT:CONFIRM",t)}on(t,r){if(!this.events[t])throw new Error(`Event ${t} does not exist`);this.events[t].add(r)}emit(t,r){this.events[t]&&this.events[t].forEach(n=>n(r))}}const R=new Ie,Ue=["ECONNABORTED","ERR_NETWORK","ECONNRESET","ENOTFOUND","ERR_BAD_REQUEST","ERR_CANCELED","ERR_BAD_RESPONSE","ERR_BAD_OPTION_VALUE"],Le={ECONNABORTED:"请求超时~",ERR_NETWORK:"网络错误~",ECONNRESET:"服务器连接重置~",ENOTFOUND:"服务器未找到~",ERR_BAD_REQUEST:"请求错误~",ERR_CANCELED:"请求被取消~",ERR_BAD_RESPONSE:"服务器响应错误~",ERR_BAD_OPTION_VALUE:"请求参数错误~"},Be=e=>{const t=Le[e.code]??"请求错误，请稍后再试!~",n=f.currentRoute.value.matched.length>1?Te:O;return!e.code||!e.message?(R.push({path:n,query:{code:e.code,message:t,isBack:1,isRefresh:1,isHome:1}}),Promise.reject(e)):(Ue.includes(e.code)&&R.push({path:n,query:{code:e.code,message:t,isBack:1,isRefresh:1,isHome:1}}),Promise.reject(e))},q="authorization",qe=Z(()=>{const e=w();return J(`${e}_${q}`,null)}),je=(e,t)=>te.service({text:e,lock:!0,background:"rgba(0, 0, 0, 0.7)",...t}),Me=async e=>{var r,n;const t=qe();if(t.value&&e.headers.set(q,t.value),(r=e.data)!=null&&r.redirect&&delete e.data.redirect,(n=e.params)!=null&&n.redirect){const s=e.params.redirect;(s.includes("/")||s.includes("%"))&&delete e.params.redirect}if((e==null?void 0:e.loading)===!0){const s=(e==null?void 0:e.loadingText)??"加载中...",o=(e==null?void 0:e.loadingOptions)??{},a=je(s,o);e.loadingLock=a}return e},$e=(e,t)=>{R.emit(e,t)},We=e=>{var n,s;const t=e.data,r=e.headers["content-type"];if(e.headers["refresh-token"]&&e.headers["refresh-type"]){const o=e.headers["refresh-type"],a=e.headers["refresh-token"];R.emit("EVENT:REFRESH",{refreshType:o,refreshToken:a})}if(r.includes("application/json")&&((n=t.option)!=null&&n.eventName)){const o=t.option.eventName,a=t.option.state??!1;return delete t.option.eventName,delete t.option.state,$e(o,((s=t.option)==null?void 0:s.eventData)??{}),a?t:Promise.reject(t)}return t.status!==0?Promise.reject(new Error(t.msg||"请求失败")):t},l=z.create({baseURL:y,timeout:6e4,withCredentials:!0});l.interceptors.request.use(Me);l.interceptors.response.use(We,Be);const Et=e=>l.request(e),He=(e,t,r)=>l.request({url:e,params:t,method:"GET",...r}),pt=(e,t,r)=>l.request({url:e,data:t,method:"POST",...r}),_t=(e,t,r)=>l.request({url:e,data:t,method:"PUT",...r}),ht=(e,t,r)=>l.request({url:e,data:t,method:"DELETE",...r}),Fe=async e=>{const t=C(),n=`${w()}/Index/site`;return e={...t.query??{},...e},await He(n,e).then(o=>o.data)},Ge=re("app",()=>{const e=u(),t=n=>{var s,o,a,E,d;if(!((s=n.public_api)!=null&&s.login))return Promise.reject("未设置登录接口地址");if(!((o=n.public_api)!=null&&o.user))return Promise.reject("未设置获取用户信息接口地址");if(!((a=n.public_api)!=null&&a.menus))return Promise.reject("未设置获取菜单接口地址");if(!((E=n.public_api)!=null&&E.layouts))return Promise.reject("未设置主题布局接口地址");if(!((d=n.public_view)!=null&&d.workbench))return Promise.reject("未设置工作台视图接口地址");e.value=n};return{siteInfo:e,getSite:async n=>{try{const s=await Fe(n);return s?(await t(s),s):Promise.reject("获取站点配置数据失败")}catch(s){return R.push({path:O,query:{message:s}}),Promise.reject(s)}}}}),Ke=(e,t)=>{const r=e.__vccOpts||e;for(const[n,s]of t)r[n]=s;return r},ze=async(e,t="GET",r,n)=>await l({url:e,method:t,params:r,headers:n}),Ye={class:"builder-container","element-loading-text":"正在加载中..."},Qe={key:0,class:"back-container"},Xe={key:2,class:"empty"},Ze=D({name:"/builder"}),Je=D({...Ze,setup(e){var g;const t=C(),r=X(),n=(g=t.query)==null?void 0:g._redirect,s=u(!0),o=u(""),a=u(t.meta.path),E=u(t.meta.method??"GET"),d=u(t.meta.ajaxParams??{}),c=u(t.meta.headers??{}),i=u(),p=()=>{r.push(n)},j=()=>{const P=t.query;P&&(d.value={...d.value,...P}),ze(a.value,E.value,d.value,c.value).then(_=>{i.value=_.data}).catch(_=>{o.value=_.message||"加载失败"}).finally(()=>{s.value=!1})};return oe(()=>j()),(P,_)=>{const M=v("xb-icons"),$=v("el-button"),W=v("xbBuilder"),H=v("el-empty"),F=ae("loading");return ce((T(),N("div",Ye,[m(n)?(T(),N("div",Qe,[S($,{type:"primary",onClick:p},{icon:A(()=>[S(M,{icon:"ArrowLeft"})]),default:A(()=>[_[0]||(_[0]=ie(" 返回 "))]),_:1})])):x("",!0),m(i)&&!m(s)?(T(),ue(W,{key:1,schema:m(i)},null,8,["schema"])):m(o)?(T(),N("div",Xe,[S(H,{description:m(o)},null,8,["description"])])):x("",!0)])),[[F,m(s)]])}}});const et=Ke(Je,[["__scopeId","data-v-705e6975"]]),ft=Object.freeze(Object.defineProperty({__proto__:null,default:et},Symbol.toStringTag,{value:"Module"}));export{I as A,ft as B,R as E,h as _,Ge as a,pt as b,qe as c,Pe as d,O as e,ve as f,U as g,Ke as h,ze as i,ut as j,lt as k,Ee as l,b as m,mt as n,Ne as o,y as p,w as q,f as r,dt as s,_t as t,He as u,ht as v,je as w,Et as x,Se as y,ye as z};
