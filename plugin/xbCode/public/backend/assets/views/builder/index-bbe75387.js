var $=Object.defineProperty;var W=(e,t,n)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var b=(e,t,n)=>W(e,typeof t!="symbol"?t+"":t,n);import"../../vendor/vue-7c9b4e57.js";import{a as F}from"../../vendor/axios-a921b253.js";import{c as G,a as K,u as x,b as z}from"../../vendor/vue-router-776dd066.js";import{q as Y,s as X}from"../../vendor/@vueuse-2006ee9f.js";import{E as Q,a as J}from"../../vendor/element-plus-616bd1f6.js";import{d as Z}from"../../vendor/pinia-29b2e896.js";import{a4 as ee,V as te,r as u,d as C,k as ne,ai as T,ar as re,K as oe,u as R,o as y,c as w,R as g,J as k,O as se,M as A,I as ae}from"../../vendor/@vue-b9898b5a.js";const ce="modulepreload",ie=function(e){return"/backend/"+e},V={},E=function(t,n,r){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=ie(s),s in V)return;V[s]=!0;const a=s.endsWith(".css"),i=a?'[rel="stylesheet"]':"";if(!!r)for(let l=o.length-1;l>=0;l--){const m=o[l];if(m.href===s&&(!a||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${i}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":ce,a||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),a)return new Promise((l,m)=>{c.addEventListener("load",l),c.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})},ue={path:"/",name:"default-router",component:()=>E(()=>import("../../index-7b9316cb.js"),["assets/index-7b9316cb.js","assets/vendor/vue-7c9b4e57.js","assets/vendor/@vue-b9898b5a.js","assets/vendor/vue-router-776dd066.js","assets/vendor/@element-plus-950f8d06.js","assets/index-06f7ee7f.js","assets/views/login/component/login-35e8a419.js","assets/vendor/pinia-29b2e896.js","assets/vendor/vue-demi-09065cd0.js","assets/vendor/element-plus-616bd1f6.js","assets/vendor/lodash-es-4da90d2e.js","assets/vendor/@vueuse-2006ee9f.js","assets/vendor/@sxzz-c75af06c.js","assets/vendor/@ctrl-f8748455.js","assets/vendor/dayjs-f13f0179.js","assets/vendor/call-bind-apply-helpers-be8cb158.js","assets/vendor/function-bind-48f717dc.js","assets/vendor/es-errors-c75f5a96.js","assets/vendor/async-validator-dee29e8b.js","assets/vendor/memoize-one-297ddbcb.js","assets/vendor/normalize-wheel-es-ed76fb12.js","assets/vendor/@floating-ui-606f2ab9.js","assets/static/css/element-plus.c6a7ed46.css","assets/static/css/login.1fee52d3.css","assets/vendor/pinia-plugin-persistedstate-ed167f96.js","assets/vendor/nprogress-bf0b4bc4.js","assets/static/css/nprogress.771398e6.css","assets/vendor/axios-a921b253.js","assets/vendor/qs-43fbfb33.js","assets/vendor/side-channel-0dbdc6f7.js","assets/vendor/object-inspect-c0ea0ea8.js","assets/vendor/side-channel-list-813b42be.js","assets/vendor/side-channel-map-b5cc23df.js","assets/vendor/get-intrinsic-dea6481b.js","assets/vendor/es-object-atoms-11ea1ab9.js","assets/vendor/math-intrinsics-9389030e.js","assets/vendor/gopd-30775706.js","assets/vendor/es-define-property-27915812.js","assets/vendor/has-symbols-76fb15e9.js","assets/vendor/get-proto-15e8f36b.js","assets/vendor/dunder-proto-2a4d8230.js","assets/vendor/hasown-31deb62f.js","assets/vendor/call-bound-a02b33b4.js","assets/vendor/side-channel-weakmap-cc03a2a3.js","assets/vendor/dplayer-292bf7b5.js","assets/vendor/echarts-02a375f3.js","assets/vendor/tslib-54e39b60.js","assets/vendor/zrender-744c9c42.js","assets/vendor/less-27190d88.js","assets/vendor/@vicons-4f55c573.js","assets/static/css/index.64ea0739.css","assets/static/css/index.c3d41ecc.css"]),redirect:"/workbench",meta:{title:"首页"},children:[{path:"/workbench",name:"Workbench",component:()=>E(()=>import("../workbench/index-d1d105e3.js"),["assets/views/workbench/index-d1d105e3.js","assets/vendor/vue-7c9b4e57.js","assets/vendor/@vue-b9898b5a.js","assets/vendor/vue-router-776dd066.js","assets/vendor/axios-a921b253.js","assets/vendor/@vueuse-2006ee9f.js","assets/vendor/element-plus-616bd1f6.js","assets/vendor/lodash-es-4da90d2e.js","assets/vendor/@element-plus-950f8d06.js","assets/vendor/@sxzz-c75af06c.js","assets/vendor/@ctrl-f8748455.js","assets/vendor/dayjs-f13f0179.js","assets/vendor/call-bind-apply-helpers-be8cb158.js","assets/vendor/function-bind-48f717dc.js","assets/vendor/es-errors-c75f5a96.js","assets/vendor/async-validator-dee29e8b.js","assets/vendor/memoize-one-297ddbcb.js","assets/vendor/normalize-wheel-es-ed76fb12.js","assets/vendor/@floating-ui-606f2ab9.js","assets/static/css/element-plus.c6a7ed46.css","assets/vendor/pinia-29b2e896.js","assets/vendor/vue-demi-09065cd0.js","assets/static/css/index.efddd899.css"]),meta:{title:"工作台"}}]},le={path:"/exception",name:"exception",meta:{title:"抱歉，页面不存在~"},component:()=>E(()=>import("../exception/index-f4c527a1.js"),["assets/views/exception/index-f4c527a1.js","assets/vendor/vue-7c9b4e57.js","assets/vendor/@vue-b9898b5a.js","assets/vendor/vue-router-776dd066.js","assets/vendor/axios-a921b253.js","assets/vendor/@vueuse-2006ee9f.js","assets/vendor/element-plus-616bd1f6.js","assets/vendor/lodash-es-4da90d2e.js","assets/vendor/@element-plus-950f8d06.js","assets/vendor/@sxzz-c75af06c.js","assets/vendor/@ctrl-f8748455.js","assets/vendor/dayjs-f13f0179.js","assets/vendor/call-bind-apply-helpers-be8cb158.js","assets/vendor/function-bind-48f717dc.js","assets/vendor/es-errors-c75f5a96.js","assets/vendor/async-validator-dee29e8b.js","assets/vendor/memoize-one-297ddbcb.js","assets/vendor/normalize-wheel-es-ed76fb12.js","assets/vendor/@floating-ui-606f2ab9.js","assets/static/css/element-plus.c6a7ed46.css","assets/vendor/pinia-29b2e896.js","assets/vendor/vue-demi-09065cd0.js"])},de={path:"/login",name:"Login",component:()=>E(()=>import("../login/index-cd1376bc.js"),["assets/views/login/index-cd1376bc.js","assets/vendor/vue-7c9b4e57.js","assets/vendor/@vue-b9898b5a.js","assets/views/login/component/login-35e8a419.js","assets/vendor/pinia-29b2e896.js","assets/vendor/vue-demi-09065cd0.js","assets/vendor/element-plus-616bd1f6.js","assets/vendor/lodash-es-4da90d2e.js","assets/vendor/@vueuse-2006ee9f.js","assets/vendor/@element-plus-950f8d06.js","assets/vendor/@sxzz-c75af06c.js","assets/vendor/@ctrl-f8748455.js","assets/vendor/dayjs-f13f0179.js","assets/vendor/call-bind-apply-helpers-be8cb158.js","assets/vendor/function-bind-48f717dc.js","assets/vendor/es-errors-c75f5a96.js","assets/vendor/async-validator-dee29e8b.js","assets/vendor/memoize-one-297ddbcb.js","assets/vendor/normalize-wheel-es-ed76fb12.js","assets/vendor/@floating-ui-606f2ab9.js","assets/static/css/element-plus.c6a7ed46.css","assets/static/css/login.1fee52d3.css","assets/views/login/component/remote-e1759304.js","assets/vendor/axios-a921b253.js","assets/vendor/vue-router-776dd066.js"]),meta:{title:"用户登录"}},me={path:"/:pathMatch(.*)",component:()=>E(()=>import("../exception/index-f4c527a1.js"),["assets/views/exception/index-f4c527a1.js","assets/vendor/vue-7c9b4e57.js","assets/vendor/@vue-b9898b5a.js","assets/vendor/vue-router-776dd066.js","assets/vendor/axios-a921b253.js","assets/vendor/@vueuse-2006ee9f.js","assets/vendor/element-plus-616bd1f6.js","assets/vendor/lodash-es-4da90d2e.js","assets/vendor/@element-plus-950f8d06.js","assets/vendor/@sxzz-c75af06c.js","assets/vendor/@ctrl-f8748455.js","assets/vendor/dayjs-f13f0179.js","assets/vendor/call-bind-apply-helpers-be8cb158.js","assets/vendor/function-bind-48f717dc.js","assets/vendor/es-errors-c75f5a96.js","assets/vendor/async-validator-dee29e8b.js","assets/vendor/memoize-one-297ddbcb.js","assets/vendor/normalize-wheel-es-ed76fb12.js","assets/vendor/@floating-ui-606f2ab9.js","assets/static/css/element-plus.c6a7ed46.css","assets/vendor/pinia-29b2e896.js","assets/vendor/vue-demi-09065cd0.js"])},Ee={path:"/redirect",name:"Redirect",component:()=>E(()=>import("../redirect/index-db44fca7.js"),["assets/views/redirect/index-db44fca7.js","assets/vendor/vue-7c9b4e57.js","assets/vendor/@vue-b9898b5a.js","assets/vendor/vue-router-776dd066.js"]),meta:{title:"正在重定向"}},pe=[ue,Ee,de,le,me],p=G({routes:pe,history:K()}),_e="/workbench",he="/login",P="/exception",fe="/layout/exception",at=[he,P],N=(e,t,n="",r)=>Q({message:e,title:n,duration:2e3,type:t,...r}),Re=(e,t="温馨提示",n)=>N(e,"success",t,n),ve=(e,t="温馨提示",n)=>N(e,"error",t,n),ct=(e,t="温馨提示",n)=>N(e,"warning",t,n),O=()=>location.pathname.replace(/^\/+|\/+$/g,""),D=e=>{let t;try{t=new URL(e)}catch{return!1}return t.protocol==="http:"||t.protocol==="https:"},Te=(e,t={},n="_blank")=>{D(e)?window.open(e,n):p.push({path:e,query:t})};function ye(e=6){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return t}const Pe=()=>{var n;const e=p.currentRoute.value;if(!((n=e.query)!=null&&n.redirect)){ve("返回上次页面错误");return}const t=I(e.query.redirect);p.push({path:e.query.redirect,query:{...t}})},Ne=e=>e.replace(/\/(\w)/g,(t,n)=>n.toUpperCase());function Oe(e){return e.split("-").map((t,n)=>n===0?t:t.charAt(0).toUpperCase()+t.slice(1)).join("")}const Se=(e,t="Enter")=>{const n=r=>{r.key===t&&(e(),r.preventDefault())};ee(()=>document.addEventListener("keydown",n)),te(()=>document.removeEventListener("keydown",n))},I=e=>{if(!e)return{};const t=e.slice(e.indexOf("?")+1).split("&"),n={};for(const r of t){const[o,s]=r.split("=");n[o]=s}return n},be=e=>{const t=new URLSearchParams;for(const[r,o]of Object.entries(e))t.append(r,o);return t.toString()},we=()=>window.location.origin,U=e=>e?e.toUpperCase():"",ge=e=>U(e)??"GET",ke=e=>{var t;return(t=p.currentRoute.value.query)!=null&&t.redirect?p.currentRoute.value.query.redirect:e||_e},Ae=e=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(e).then(t=>{});else{const t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.remove()}Re("复制成功")},Ve=e=>{if(!e)return"";const{siteInfo:t}=We(),n=u(t==null?void 0:t.web_url);if(!n.value){const o="http://49.235.68.138:39800/",s=o.endsWith("/")?o.slice(0,-1):o;n.value=s}let r="";return n.value&&(r=`${n.value}${e}`),r},it=Object.freeze(Object.defineProperty({__proto__:null,getBaseUrl:we,getMethodName:ge,getModuleName:O,getRanDom:ye,getUrlVars:I,getWebUrl:Ve,getWorkbenchPath:ke,hanldToBack:Pe,isUrl:D,objectToVars:be,openWin:Te,strToUpperCase:U,toCamelCase:Oe,underlineToCamel:Ne,useCopy:Ae,useKeyCodeEvent:Se},Symbol.toStringTag,{value:"Module"}));let L="http://49.235.68.138:39800/";L=window.location.origin;const xe=L;class Ce{constructor(){b(this,"events",{"EVENT:ROUTE":new Set,"EVENT:NOTIFY":new Set,"EVENT:MESSAGE":new Set,"EVENT:CONFIRM":new Set,"EVENT:RELOAD":new Set,"EVENT:REFRESH":new Set,"EVENT:KICKOUT":new Set,"EVENT:REDIRECT":new Set})}push(t){this.emit("EVENT:ROUTE",t)}notify(t){this.emit("EVENT:NOTIFY",t)}message(t){this.emit("EVENT:MESSAGE",t)}confirm(t){this.emit("EVENT:CONFIRM",t)}on(t,n){if(!this.events[t])throw new Error(`Event ${t} does not exist`);this.events[t].add(n)}emit(t,n){this.events[t]&&this.events[t].forEach(r=>r(n))}}const h=new Ce,De=["ECONNABORTED","ERR_NETWORK","ECONNRESET","ENOTFOUND","ERR_BAD_REQUEST","ERR_CANCELED","ERR_BAD_RESPONSE","ERR_BAD_OPTION_VALUE"],Ie={ECONNABORTED:"请求超时~",ERR_NETWORK:"网络错误~",ECONNRESET:"服务器连接重置~",ENOTFOUND:"服务器未找到~",ERR_BAD_REQUEST:"请求错误~",ERR_CANCELED:"请求被取消~",ERR_BAD_RESPONSE:"服务器响应错误~",ERR_BAD_OPTION_VALUE:"请求参数错误~"},Ue=e=>{const t=Ie[e.code]??"请求错误，请稍后再试!~",r=p.currentRoute.value.matched.length>1?fe:P;return!e.code||!e.message?(h.push({path:r,query:{code:e.code,message:t,isBack:1,isRefresh:1,isHome:1}}),Promise.reject(e)):(De.includes(e.code)&&h.push({path:r,query:{code:e.code,message:t,isBack:1,isRefresh:1,isHome:1}}),Promise.reject(e))},B="authorization",Le=Y(()=>{const e=O();return X(`${e}_${B}`,null)}),Be=(e,t)=>J.service({text:e,lock:!0,background:"rgba(0, 0, 0, 0.7)",...t}),qe=async e=>{var n,r;const t=Le();if(t.value&&e.headers.set(B,t.value),(n=e.data)!=null&&n.redirect&&delete e.data.redirect,(r=e.params)!=null&&r.redirect){const o=e.params.redirect;(o.includes("/")||o.includes("%"))&&delete e.params.redirect}if((e==null?void 0:e.loading)===!0){const o=(e==null?void 0:e.loadingText)??"加载中...",s=(e==null?void 0:e.loadingOptions)??{},a=Be(o,s);e.loadingLock=a}return e},je=(e,t)=>{h.emit(e,t)},Me=e=>{var r,o;const t=e.data,n=e.headers["content-type"];if(e.headers["refresh-token"]&&e.headers["refresh-type"]){const s=e.headers["refresh-type"],a=e.headers["refresh-token"];h.emit("EVENT:REFRESH",{refreshType:s,refreshToken:a})}if(n.includes("application/json")&&((r=t.option)!=null&&r.eventName)){const s=t.option.eventName,a=t.option.state??!1;return delete t.option.eventName,delete t.option.state,je(s,((o=t.option)==null?void 0:o.eventData)??{}),a?t:Promise.reject(t)}return t},d=F.create({baseURL:xe,timeout:6e4,withCredentials:!0});d.interceptors.request.use(qe);d.interceptors.response.use(Me,Ue);const He=(e,t,n)=>d.request({url:e,params:t,method:"GET",...n}),ut=(e,t,n)=>d.request({url:e,data:t,method:"POST",...n}),lt=(e,t,n)=>d.request({url:e,data:t,method:"PUT",...n}),dt=(e,t,n)=>d.request({url:e,data:t,method:"DELETE",...n}),$e=async e=>{const t=x(),r=`${O()}/Index/site`;return e={...t.query??{},...e},await He(r,e).then(s=>s.data)},We=Z("app",()=>{const e=u(),t=r=>{var o,s,a,i,_;if(!((o=r.public_api)!=null&&o.login))return Promise.reject("未设置登录接口地址");if(!((s=r.public_api)!=null&&s.user))return Promise.reject("未设置获取用户信息接口地址");if(!((a=r.public_api)!=null&&a.menus))return Promise.reject("未设置获取菜单接口地址");if(!((i=r.public_api)!=null&&i.layouts))return Promise.reject("未设置主题布局接口地址");if(!((_=r.public_view)!=null&&_.workbench))return Promise.reject("未设置工作台视图接口地址");e.value=r};return{siteInfo:e,getSite:async r=>{try{const o=await $e(r);return o?(await t(o),o):Promise.reject("获取站点配置数据失败")}catch(o){return h.push({path:P,query:{message:o}}),Promise.reject(o)}}}}),Fe=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},Ge=async(e,t="GET",n,r)=>await d({url:e,method:t,params:n,headers:r}),Ke={class:"builder-container","element-loading-text":"正在加载中..."},ze={key:0,class:"back-container"},Ye=C({name:"/builder"}),Xe=C({...Ye,setup(e){var S;const t=x(),n=z(),r=(S=t.query)==null?void 0:S._redirect,o=u(!0),s=u(t.meta.path),a=u(t.meta.method??"GET"),i=u(t.meta.ajaxParams??{}),_=u(t.meta.headers??{}),c=u(),l=()=>{n.push(r)},m=()=>{const v=t.query;v&&(i.value={...i.value,...v}),Ge(s.value,a.value,i.value,_.value).then(f=>{c.value=f.data??{}}).finally(()=>{o.value=!1})};return ne(()=>m()),(v,f)=>{const q=T("xb-icons"),j=T("el-button"),M=T("xbBuilder"),H=re("loading");return oe((y(),w("div",Ke,[R(r)?(y(),w("div",ze,[g(j,{type:"primary",onClick:l},{icon:k(()=>[g(q,{icon:"ArrowLeft"})]),default:k(()=>[f[0]||(f[0]=se(" 返回 "))]),_:1})])):A("",!0),R(c)?(y(),ae(M,{key:1,schema:R(c)},null,8,["schema"])):A("",!0)])),[[H,R(o)]])}}});const Qe=Fe(Xe,[["__scopeId","data-v-fd0afd1a"]]),mt=Object.freeze(Object.defineProperty({__proto__:null,default:Qe},Symbol.toStringTag,{value:"Module"}));export{h as E,E as _,We as a,ut as b,Le as c,ve as d,P as e,he as f,I as g,Fe as h,Ge as i,at as j,ct as k,le as l,N as m,xe as n,Te as o,O as p,it as q,p as r,lt as s,dt as t,He as u,Be as v,d as w,ye as x,Re as y,mt as z};
