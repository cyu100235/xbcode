import{E as r,G as l}from"./.pnpm.d93a25db.js";import{r as c}from"./index.bce7efe0.js";const a=(t,e,s="")=>{if(s){window.open(t,s);return}c.push({path:t,query:{...e}})},m=[301,302],u={400:"请求错误",401:"未授权，请登录",403:"拒绝访问",404:"请求地址出错",408:"请求超时",500:"服务器内部错误",501:"服务未实现",502:"网关错误",503:"服务不可用",504:"网关超时",505:"HTTP版本不受支持"},p=t=>{const e=t.data,s=t.headers.get("content-type")||"";if(s.includes("application/json")){if(e.status===0)return e;if(m.includes(e.status)&&e.data.url)return a(e.data.url),Promise.reject(e);if(e.status===1e4&&c.currentRoute.value.path!=="/complete")return a("/complete"),Promise.reject(e);if(e!=null&&e.msg)return r.error({title:"温馨提示",message:e.msg||"网络错误",duration:2e3}),Promise.reject(e);if(u[e.status]){const n=u[e.status]??"未知错误";return r.error({title:"温馨提示",message:n||"网络错误",duration:2e3}),Promise.reject(e)}else return Promise.reject(e)}else return s.includes("application/octet-stream")?Promise.resolve(e):Promise.resolve(t)},d={400:"请求错误",401:"未授权，请登录",403:"拒绝访问",404:"请求错误,未找到该资源",405:"请求方法未允许",408:"请求超时",500:"服务器错误",501:"网络未实现",502:"网络错误",503:"服务不可用",504:"网络超时",505:"http版本不支持该请求"},f=t=>{if(t.response){const{data:s,status:n,statusText:i}=t.response;d[n]?r.error({title:"请求错误",message:(s==null?void 0:s.msg)||i,duration:2e3}):r.error({title:"系统错误",message:(s==null?void 0:s.msg)||i,duration:2e3})}const e=t;return e!=null&&e.data?Promise.reject(e.data):Promise.reject(t)},P=async t=>(t.headers.set("Content-Type","application/x-www-form-urlencoded"),t),g="/app/xbCode/install";let j=g;const T=j,o=l.create({baseURL:T,timeout:6e4});o.interceptors.request.use(P);o.interceptors.response.use(p,f);const w=(t,e,s)=>o.request({url:t,params:e,method:"GET",...s}),x=(t,e,s)=>o.request({url:t,data:e,method:"POST",...s});export{x as a,a as o,w as u};
