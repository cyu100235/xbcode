import{E as s,G as l}from"./.pnpm.d93a25db.js";import{r as u}from"./index.102fa56e.js";const c=(t,e,r="")=>{if(r){window.open(t,r);return}u.push({path:t,query:{...e}})},d=[301,302],a={400:"请求错误",401:"未授权，请登录",403:"拒绝访问",404:"请求地址出错",408:"请求超时",500:"服务器内部错误",501:"服务未实现",502:"网关错误",503:"服务不可用",504:"网关超时",505:"HTTP版本不受支持"},m=t=>{const e=t.data,r=t.headers.get("content-type")||"";if(r.includes("application/json")){if(e.code===200)return e;if(d.includes(e.code)&&e.data.url)return c(e.data.url),Promise.reject(e);if(e.code===1e4&&u.currentRoute.value.path!=="/complete")return c("/complete"),Promise.reject(e);if(e!=null&&e.msg)return s.error({title:"温馨提示",message:e.msg||"网络错误",duration:2e3}),Promise.reject(e);if(a[e.code]){const n=a[e.code]??"未知错误";return s.error({title:"温馨提示",message:n||"网络错误",duration:2e3}),Promise.reject(e)}else return Promise.reject(e)}else return r.includes("application/octet-stream")?Promise.resolve(e):Promise.resolve(t)},p={400:"请求错误",401:"未授权，请登录",403:"拒绝访问",404:"请求错误,未找到该资源",405:"请求方法未允许",408:"请求超时",500:"服务器错误",501:"网络未实现",502:"网络错误",503:"服务不可用",504:"网络超时",505:"http版本不支持该请求"},f=t=>{if(t.response){const{data:r,status:n,statusText:i}=t.response;p[n]?s.error({title:"请求错误",message:(r==null?void 0:r.msg)||i,duration:2e3}):s.error({title:"系统错误",message:(r==null?void 0:r.msg)||i,duration:2e3})}const e=t;return e!=null&&e.data?Promise.reject(e.data):Promise.reject(t)},P=async t=>(t.headers.set("Content-Type","application/x-www-form-urlencoded"),t),g="/app/xbCode/install";let j=g;const T=j,o=l.create({baseURL:T,timeout:6e4});o.interceptors.request.use(P);o.interceptors.response.use(m,f);const w=(t,e,r)=>o.request({url:t,params:e,method:"GET",...r}),x=(t,e,r)=>o.request({url:t,data:e,method:"POST",...r});export{x as a,c as o,w as u};
