var ka=Object.defineProperty;var wa=(t,e,a)=>e in t?ka(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var Fe=(t,e,a)=>(wa(t,typeof e!="symbol"?e+"":e,a),a);import{d as j,c as V,E as ot,N as nt,r as E,o as m,a as $,w as C,b as Rt,u as r,e as ba,g as ke,f as g,h as ue,i as x,j as w,k,p as we,l as be,m as Bt,n as Ut,t as M,F,q as K,s as T,v as L,H as yt,x as Pa,y as Ca,z as $a,A as Ia,B as Da,C as ja,D as Sa,G as oe,I as ie,J as ce,K as He,L as z,M as Z,O as Aa,P as O,Q as Pe,R as Mt,S as Lt,T as Va,U as Ea,V as Ta,W as de,X as xt,Y as re,Z as Ra,_ as Ba,$ as Ua,a0 as Ma,a1 as Ft,a2 as Ot,a3 as We,a4 as kt,a5 as La,a6 as Fa,a7 as Oa,a8 as qa,a9 as za,aa as qt,ab as je,ac as zt,ad as Be,ae as Nt,af as Na,ag as Ha,ah as st,ai as Wa,aj as Xa,ak as Qa,al as Za,am as Ga,an as Ja,ao as Ka,ap as Ht,aq as Ya,ar as eo,as as to}from"./.pnpm.b5502b09.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}})();const G=j({__name:"index",props:{icon:{},size:{default:18},color:{}},setup(t){const e=t,a=V(()=>{if(ot[e.icon])return ot[e.icon];if(nt[e.icon])return nt[e.icon]});return(n,s)=>{const o=E("el-icon");return m(),$(o,{size:n.size,color:n.color},{default:C(()=>[(m(),$(Rt(r(a))))]),_:1},8,["size","color"])}}}),Ee=(t,e,a="",n)=>{ba({message:t,title:a,duration:2e3,type:e,...n})},J=(t,e="温馨提示",a)=>{Ee(t,"success",e,a)},D=(t,e="温馨提示",a)=>{Ee(t,"error",e,a)},Ce=t=>(we("data-v-25334c0b"),t=t(),be(),t),ao={class:"category-container"},oo={class:"item"},no=Ce(()=>w("div",{class:"title"}," 附件名称 ",-1)),so={class:"item"},lo=Ce(()=>w("div",{class:"title"}," 文件名称 ",-1)),co={class:"item"},ro=Ce(()=>w("div",{class:"title"}," 文件路径 ",-1)),io={class:"item"},uo=Ce(()=>w("div",{class:"title"}," 文件链接 ",-1)),po={class:"item"},mo=Ce(()=>w("div",{class:"title"}," 文件格式 ",-1)),_o={class:"item"},fo=Ce(()=>w("div",{class:"title"}," 文件大小（字节） ",-1)),ho={class:"item"},vo=Ce(()=>w("div",{class:"title"}," 附件选定器 ",-1)),go=j({__name:"upload",props:{modelValue:{}},emits:["update:init"],setup(t,{expose:e,emit:a}){const n=t,s=ke(),o=g({...n.modelValue}),l=()=>o.value.title?o.value:(D("请输入附件名称"),!1);return ue(()=>{a("update:init",s.exposed)}),e({getFormData:l}),(c,i)=>{const u=E("el-input");return m(),x("div",ao,[w("div",oo,[no,k(u,{modelValue:r(o).title,"onUpdate:modelValue":i[0]||(i[0]=d=>r(o).title=d),placeholder:"请输入附件名称"},null,8,["modelValue"])]),w("div",so,[lo,k(u,{modelValue:r(o).filename,"onUpdate:modelValue":i[1]||(i[1]=d=>r(o).filename=d),placeholder:"请输入文件名称",disabled:""},null,8,["modelValue"])]),w("div",co,[ro,k(u,{modelValue:r(o).path,"onUpdate:modelValue":i[2]||(i[2]=d=>r(o).path=d),placeholder:"请输入文件路径",disabled:""},null,8,["modelValue"])]),w("div",io,[uo,k(u,{modelValue:r(o).url,"onUpdate:modelValue":i[3]||(i[3]=d=>r(o).url=d),placeholder:"请输入文件链接",disabled:""},null,8,["modelValue"])]),w("div",po,[mo,k(u,{modelValue:r(o).format,"onUpdate:modelValue":i[4]||(i[4]=d=>r(o).format=d),placeholder:"请输入文件格式",disabled:""},null,8,["modelValue"])]),w("div",_o,[fo,k(u,{modelValue:r(o).size,"onUpdate:modelValue":i[5]||(i[5]=d=>r(o).size=d),placeholder:"请输入文件大小",disabled:""},null,8,["modelValue"])]),w("div",ho,[vo,k(u,{modelValue:r(o).adapter,"onUpdate:modelValue":i[6]||(i[6]=d=>r(o).adapter=d),placeholder:"请输入附件选定器",disabled:""},null,8,["modelValue"])])])}}});const U=(t,e)=>{const a=t.__vccOpts||t;for(const[n,s]of e)a[n]=s;return a},yo=U(go,[["__scopeId","data-v-25334c0b"]]),xo={web_name:"",web_title:""},ko="modulepreload",wo=function(t){return"/view/"+t},wt={},ge=function(e,a,n){if(!a||a.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(a.map(o=>{if(o=wo(o),o in wt)return;wt[o]=!0;const l=o.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!n)for(let d=s.length-1;d>=0;d--){const h=s[d];if(h.href===o&&(!l||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":ko,l||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),l)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},Oe="/login",Wt="/Index/index",bo=["/exception","/401","/403","/404","/401","/500","/502"],Po={401:"您没有权限访问该页面",403:"资源错误",404:"资源错误",500:"服务器内部错误",502:"请求错误，无法获取到数据"},rt="authorization",it="appid",Ue=Bt(()=>{const t=Ie();return Ut(`${t}_${rt}`,null)}),$e=Bt(()=>{const t=Ie();return Ut(`${t}_${it}`,null)}),Xe=j({__name:"menu-item",props:{menuData:{}},setup(t){const e=$e(),a=n=>{const s=n.path,o=g({});n.ajaxParams&&(o.value=Je(n.ajaxParams));let l={...o.value};e.value&&(l={...l,appid:e.value}),ae(`/${s}`,l)};return(n,s)=>{const o=E("el-menu-item-group"),l=E("el-menu-item");return m(),x(F,null,[n.menuData.isGroup&&n.menuData.show?(m(),$(o,{key:0},{title:C(()=>[w("span",null,M(n.menuData.title),1)]),default:C(()=>[(m(!0),x(F,null,K(n.menuData.children,c=>(m(),$(Xe,{key:c.activeId,"menu-data":c},null,8,["menu-data"]))),128))]),_:1})):T("",!0),!n.menuData.isGroup&&n.menuData.show?(m(),$(l,{key:1,index:n.menuData.activeId,onClick:s[0]||(s[0]=c=>a(n.menuData))},{default:C(()=>[L(M(n.menuData.title),1)]),_:1},8,["index"])):T("",!0)],64)}}}),Co=j({__name:"menu-item-level",props:{menuData:{}},setup(t){const e=$e(),a=n=>{const s=n.path,o=g({});n.ajaxParams&&(o.value=Je(n.ajaxParams));let l={...o.value};e.value&&(l={...l,appid:e.value}),ae(`/${s}`,l)};return(n,s)=>{const o=E("el-sub-menu"),l=E("el-menu-item");return m(),x(F,null,[n.menuData.isGroup&&n.menuData.show?(m(),$(o,{key:0,index:n.menuData.activeId},{title:C(()=>[w("span",null,M(n.menuData.title),1)]),default:C(()=>[(m(!0),x(F,null,K(n.menuData.children,c=>(m(),$(Xe,{key:c.activeId,"menu-data":c},null,8,["menu-data"]))),128))]),_:1},8,["index"])):T("",!0),!n.menuData.isGroup&&n.menuData.show?(m(),$(l,{key:1,index:n.menuData.activeId,onClick:s[0]||(s[0]=c=>a(n.menuData))},{default:C(()=>[L(M(n.menuData.title),1)]),_:1},8,["index"])):T("",!0)],64)}}}),Ke={layout:"mix",layoutMenu:"level",layoutTabsTheme:"radius",layoutSize:!1,theme:"OS",sideMenuCollapse:!1,sideMenuWidth:80,sideWidth:220,headerHeight:50,logoHeight:30,footerHeight:35},bt={nickname:"",username:"",password:"",headimg:"",role:{},menus:[]},$o={form:{inline:!1,labelPosition:"top",labelSuffix:void 0,hideRequiredAsterisk:!0,labelWidth:"auto",showMessage:!0,inlineMessage:!0,statusIcon:!1,validateOnRuleChange:!0,disabled:!1,size:void 0,title:!0},row:{gutter:50,type:void 0,align:void 0,justify:void 0,tag:"div"},global:{"*":{}},submitBtn:!1,resetBtn:!1},Io=t=>t.map(e=>(e.handle=a=>{if((e==null?void 0:e.where)==="==")return a===e.value;if((e==null?void 0:e.where)==="!=")return a!==e.value;if((e==null?void 0:e.where)==="in"){const n=e.value;return n instanceof Array&&n instanceof Object?Re(a,e.value):(console.error("联动组件的IN条件值必须是数组或对象"),!1)}},e)),Do=t=>t.map(e=>(e!=null&&e.control&&(e.control=Io(e.control)),e)),jo={};function So(t,e){return m(),x("div",null," 高德地图 ")}const Ao=U(jo,[["render",So]]),Vo={};function Eo(t,e){return m(),x("div",null," 百度地图 ")}const To=U(Vo,[["render",Eo]]),Ro={};function Bo(t,e){return m(),x("div",null," 腾讯地图 ")}const Uo=U(Ro,[["render",Bo]]),Mo={javascript:Pa,php:Ca,python:$a,java:Ia,css:Da,xml:ja},Lo=t=>(yt.registerLanguage(t,Mo[t]),yt),Fo={class:"w-100%"},Oo=["innerHTML"],qo=j({__name:"index",props:{modelValue:{},language:{default:"javascript"},showLineNumbers:{type:Boolean}},setup(t){const e=t,a=Lo(e.language),n=g("");return Sa(()=>{n.value=a.highlight(e.modelValue,{language:e.language}).value}),(s,o)=>(m(),x("div",Fo,[w("pre",null,[L("    "),w("code",{class:"hljs",innerHTML:r(n)},null,8,Oo),L(`
    `)])]))}}),Xt=t=>(we("data-v-71347fa8"),t=t(),be(),t),zo={class:"xh-icons-modal"},No={class:"xh-icons"},Ho={class:"search-container"},Wo=Xt(()=>w("div",{class:"placeholder text-blueGray"}," 温馨提示：单击图标为选择，双击图标为复制 ",-1)),Xo={class:"icon-list"},Qo={class:"tools"},Zo=Xt(()=>w("div",{class:"title"}," 所有图标 ",-1)),Go={class:"options"},Jo={class:"list"},Ko=["onDblclick","onClick"],Yo={class:"icon-title"},en=j({__name:"modal",emits:["update:init"],setup(t,{expose:e,emit:a}){const n=ke(),s=g([{title:"Element-Plus",type:"element",icons:Object.keys(ot)},{title:"vicons/antd",type:"naiveui",icons:Object.keys(nt)}]),o=g(""),l=g("element"),c=g(""),i=g([]),u=p=>{i.value=[];const _=s.value.find(P=>P.type===p);_&&d(_.icons)};function d(p){let _=0;function P(){globalThis.requestIdleCallback(y=>{for(;y.timeRemaining()>0&&_<p.length;)i.value.push(p[_++]);_<p.length&&P()})}P()}const h=p=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(p).then(_=>{});else{const _=document.createElement("input");_.value=p,document.body.appendChild(_),_.select(),document.execCommand("Copy"),_.remove()}J("复制成功")},v=p=>{c.value=p===c.value?"":p};return e({confirm:()=>c.value}),ue(()=>{d(s.value[0].icons),a("update:init",n.exposed)}),(p,_)=>{const P=G,y=E("el-button"),S=E("el-button-group"),R=E("el-input"),I=E("el-option"),b=E("el-select");return m(),x("div",zo,[w("div",No,[w("div",Ho,[k(R,{modelValue:r(o),"onUpdate:modelValue":_[1]||(_[1]=A=>oe(o)?o.value=A:null),placeholder:"图标名称"},{prepend:C(()=>[k(P,{icon:"Search",type:"element"})]),append:C(()=>[k(S,null,{default:C(()=>[k(y,{onClick:_[0]||(_[0]=A=>o.value="")},{default:C(()=>[L(" 重置 ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),Wo]),w("div",Xo,[w("div",Qo,[Zo,w("div",Go,[k(b,{modelValue:r(l),"onUpdate:modelValue":_[2]||(_[2]=A=>oe(l)?l.value=A:null),onChange:u},{default:C(()=>[(m(!0),x(F,null,K(r(s),(A,N)=>(m(),$(I,{key:N,label:A.title,value:A.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),w("div",Jo,[(m(!0),x(F,null,K(r(i).filter(A=>A.includes(r(o))),(A,N)=>(m(),x("div",{key:N,class:ie(["item",{active:A===r(c)}]),onDblclick:H=>h(A),onClick:H=>v(A)},[k(P,{icon:A,size:26,type:r(l),color:"#888"},null,8,["icon","type"]),w("div",Yo,M(A),1)],42,Ko))),128))])])])])}}});const tn=U(en,[["__scopeId","data-v-71347fa8"]]),pe=(t,e,a)=>ce({title:"通用模态框",customStyle:{width:"60%",height:"90vh"},draggable:!0,showClose:!0,closeOnClickModal:!1,...a,showConfirmButton:!1,customClass:"xh-modal-mask",message:()=>He(t,e)}),me=(t,e,a)=>ce({title:"可主动关闭的模态框",customStyle:{width:"60%",height:"90vh"},draggable:!0,showClose:!0,closeOnClickModal:!1,...a,showCancelButton:!0,showConfirmButton:!0,customClass:"xh-modal-close-mask",message:()=>He(t,e)}),Pt=()=>{ce.close()},an={class:"icons-container"},on={key:0,class:"icon"},nn={key:1,class:"icon"},sn=j({__name:"index",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=()=>{const s=g();me(tn,{"onUpdate:init":o=>{s.value=o}},{title:"图标库",closeOnClickModal:!1,customStyle:{width:"60%",height:"85vh"},beforeClose:(o,l,c)=>{var i;if(o==="confirm"){const u=(i=s.value)==null?void 0:i.confirm();if(!u){D("请选择图标");return}e("update:modelValue",u),c()}else c()}})},n=()=>{e("update:modelValue",""),J("重置成功")};return(s,o)=>{const l=G,c=E("el-button");return m(),x("div",an,[s.modelValue?(m(),x("div",on,[k(l,{icon:s.modelValue,size:18},null,8,["icon"])])):(m(),x("div",nn)),s.modelValue?(m(),$(c,{key:2,onClick:n},{default:C(()=>[L(" 重置 ")]),_:1})):T("",!0),k(c,{type:"primary",onClick:a},{default:C(()=>[L(" 选择 ")]),_:1})])}}});const ln=U(sn,[["__scopeId","data-v-784ef829"]]),cn=j({__name:"index",props:{modelValue:{},style:{default:{}}},setup(t){return(e,a)=>(m(),x("div",z(Z(e.style)),M(e.modelValue),17))}}),rn={};function un(t,e){return m(),x("div",null," 自定义输入框（未实现） ")}const dn=U(rn,[["render",un]]),pn=["innerHTML"],mn=j({__name:"index",props:{text:{},icon:{default:""},style:{default:{color:"#666",padding:"5px 0 0 0",fontSize:"12px"}},iconSize:{default:16}},setup(t){return(e,a)=>{const n=G;return m(),x("div",{class:"form-prompt",style:Aa(e.style)},[e.icon?(m(),$(n,{key:0,icon:e.icon,size:e.iconSize},null,8,["icon","size"])):T("",!0),w("span",{class:"text",innerHTML:e.text},null,8,pn)],4)}}});const _n=U(mn,[["__scopeId","data-v-05bcd7b9"]]),fn=j({__name:"index",props:{modelValue:{},file:{},ajaxParams:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=o=>{e("update:modelValue",o)},s=g(a.modelValue);return(o,l)=>(m(),$(r(ne),O({modelValue:r(s),"onUpdate:modelValue":l[0]||(l[0]=c=>oe(s)?s.value=c:null),file:o.file},{ajaxParams:o.ajaxParams},{"onUpdate:modelValue":n}),null,16,["modelValue","file"]))}}),hn={};function vn(t,e){return m(),x("div",null," 表格展示器 ")}const gn=U(hn,[["render",vn]]),Qt=V(()=>t=>{const a=t.split("?")[0].split(".").pop();if(!a)return!1;const n=a.toLowerCase();return["png","jpg","jpeg","gif","webp","svg","bmp"].includes(n)}),yn={class:"upload-container"},xn=["onClick"],kn=j({__name:"index",props:{modelValue:{default:[]},limit:{default:1},suffix:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=()=>{const o=g(),l={limit:a.limit,suffix:a.suffix};me(ca,{...l,"onUpdate:init":c=>{o.value=c}},{title:"附件库",center:!0,customStyle:{width:"60%",height:"85vh"},beforeClose:(c,i,u)=>{var d;if(c==="confirm"){const h=(d=o.value)==null?void 0:d.getSelected();if(h.length){const v=h.map(f=>f==null?void 0:f.url);e("update:modelValue",v),u()}else D("请选择文件")}else u()}})},s=o=>{const l=a.modelValue.filter((c,i)=>i!==o);e("update:modelValue",l)};return ue(()=>{if(typeof a.modelValue=="string"){const o=a.modelValue===""?"":[a.modelValue];e("update:modelValue",o)}}),(o,l)=>{const c=E("el-image"),i=G,u=E("el-icon");return m(),x("div",yn,[(m(!0),x(F,null,K(o.modelValue,(d,h)=>(m(),x("div",{key:h,class:"item"},[r(Qt)(d)?(m(),$(c,{key:0,class:"image","preview-src-list":o.modelValue,"z-index":999,src:d,infinite:!1},null,8,["preview-src-list","src"])):(m(),$(u,{key:1,class:"file-thumb"},{default:C(()=>[k(i,{icon:"Document",size:28,type:"element"})]),_:1})),w("div",{class:"del-file",onClick:v=>s(h)},[k(i,{icon:"Delete",size:15,type:"element"})],8,xn)]))),128)),w("div",{class:"item",onClick:n},[k(i,{icon:"PlusOutlined",size:20,color:"#888"})])])}}});const wn=U(kn,[["__scopeId","data-v-360437ed"]]),bn={class:"editor-container"},Pn=j({__name:"index",props:{modelValue:{},toolbarConfig:{},editorConfig:{},editHeight:{default:300},isUploadify:{type:Boolean,default:!0},uploadifyLimit:{},uploadifyExt:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t;Pe(u=>({"4dbdd5bb":r(i)}));const n=Mt(),s=g(a.modelValue),o=g({defaultConfig:{insertKeys:{index:22,keys:["xhUploadify"]}}});Lt(()=>{n.value&&(n.value.destroy(),n.value=null)});const l=u=>{n.value=u},c=u=>{const d=u.getHtml();e("update:modelValue",d)},i=V(()=>`${a.editHeight}px`);return(u,d)=>(m(),x("div",bn,[k(r(Va),O({class:"toolbar",editor:r(n)},r(o)),null,16,["editor"]),k(r(Ea),{modelValue:r(s),"onUpdate:modelValue":d[0]||(d[0]=h=>oe(s)?s.value=h:null),"default-config":u.editorConfig,class:"editor-content",onOnCreated:l,onOnChange:c},null,8,["modelValue","default-config"])]))}});const Ct=U(Pn,[["__scopeId","data-v-274068df"]]),$t={amap:Ao,bmap:To,icons:ln,qmap:Uo,remote:fn,uploadify:wn,info:cn,HCode:qo,PromptTip:_n,wangEditor:Ct,tinymceEditor:Ct,XInput:dn,XTable:gn},Cn=t=>{Object.keys($t).forEach(e=>{t.component(e,$t[e])})};let Zt="/api";Zt=window.location.origin;const ut=Zt,X=Ta.create({baseURL:ut,timeout:6e4}),$n=async t=>{const e=Ue();e.value&&t.headers.set(rt,e.value);const a=$e();return a.value&&t.headers.set(it,a.value),t},In=t=>{var u,d,h,v,f;const e=Ue(),a=t.data,n=t.headers["content-type"],s=n.includes("application/json"),o=n.includes("application/octet-stream"),l=n.includes("text/html"),c=n.includes("text/javascript"),i=n.includes("text/css;");if(s){if((a==null?void 0:a.code)===301)return ae(((u=a==null?void 0:a.data)==null?void 0:u.url)??""),Promise.reject(a);if((a==null?void 0:a.code)===302)return D((a==null?void 0:a.msg)||"302.网络错误~"),ae(((d=a==null?void 0:a.data)==null?void 0:d.url)??""),Promise.reject(a);if((a==null?void 0:a.code)===303)return D((a==null?void 0:a.msg)||"303.网络错误~"),ae(((h=a==null?void 0:a.data)==null?void 0:h.url)??""),Promise.reject(a);if((a==null?void 0:a.code)===304)return window.location.reload(),Promise.reject(a);if((a==null?void 0:a.code)===305)return D((a==null?void 0:a.msg)||"305.网络错误~"),setTimeout(()=>{window.location.reload()},2500),Promise.reject(a);if([600,666,11e3].includes(a==null?void 0:a.code))return Promise.reject(a);if((a==null?void 0:a.code)===200)return a;if((a==null?void 0:a.code)===12e3){e.value="";let p=(v=W.currentRoute.value)==null?void 0:v.fullPath;return(f=W.currentRoute.value.query)!=null&&f.redirect&&(p=W.currentRoute.value.query.redirect),p===Oe&&(p="/"),W.replace({path:Oe,query:{redirect:p}}),D((a==null?void 0:a.msg)||"登录超时啦~"),Promise.reject(a)}return a!=null&&a.msg&&D((a==null?void 0:a.msg)||"网络错误~"),Promise.reject(a)}else return o||l||c||i?Promise.resolve(a):Promise.reject(a)},Dn=t=>{if(t.response){const{status:e}=t.response;e===401?ae("/exception",{code:401}):e===403?ae("/exception",{code:403}):e===500?ae("/exception",{code:500}):e===502&&ae("/exception",{code:502})}return Promise.reject(t)};X.interceptors.request.use($n);X.interceptors.response.use(In,Dn);const jn=Object.freeze(Object.defineProperty({__proto__:null,baseURL:ut,default:X,instance:X},Symbol.toStringTag,{value:"Module"})),dt=j({__name:"index",props:{api:{default:""},method:{default:"GET"},ajaxParams:{},isModal:{type:Boolean}},emits:["update:init","update:init-ok","update:init-error","update:submit","update:submit-ok","update:submit-error","update:rest","update:rest-ok"],setup(t,{expose:e,emit:a}){const n=t,s=de(),o=ke(),l=g({}),c=g({api:"",method:"POST"}),i=g({}),u=g(),d=g($o),h=g("");xt.use(Cn);const v=xt.$form(),f=()=>{const P=g({method:n.method,params:{...n.ajaxParams},data:{...n.ajaxParams}});n.method==="GET"?delete P.value.data:delete P.value.params,a("update:init"),X(n.api,P.value).then(y=>{const{data:S}=y;if(!(S!=null&&S.http))return D("提交接口获取失败"),Promise.reject(new Error("提交接口获取失败"));if(!(S!=null&&S.formRule))return D("表单规则获取失败"),Promise.reject(new Error("表单规则获取失败"));c.value=S.http,u.value=Do(S.formRule),d.value={...d.value,...S.config},h.value=(S==null?void 0:S.redirect)??"",a("update:init-ok",{response:S,exposed:o.exposed})}).catch(y=>{a("update:init-error",y)})},p=async()=>{var y,S,R;const P=g({method:((y=c.value)==null?void 0:y.method)??"GET",params:{...n.ajaxParams},data:{}});return((S=c.value)==null?void 0:S.method)==="GET"?P.value.params={...P.value.params,...i.value}:P.value.data={...P.value.data,...i.value},a("update:submit",{api:c.value.api,queryParams:P}),await X(((R=c.value)==null?void 0:R.api)??"",P.value).then(I=>{var b;return(b=s.query)!=null&&b.isBack&&!n.isModal&&!h.value?Ne():h.value&&ae(h.value),a("update:submit-ok",I),J((I==null?void 0:I.msg)??"操作失败"),I}).catch(I=>(a("update:submit-error",I),I))},_=()=>{a("update:rest-ok")};return ue(()=>f()),e({init:f,submit:p,reset:_}),(P,y)=>(m(),$(r(v),{api:r(l),"onUpdate:api":y[0]||(y[0]=S=>oe(l)?l.value=S:null),modelValue:r(i),"onUpdate:modelValue":y[1]||(y[1]=S=>oe(i)?i.value=S:null),modelModifiers:{lazy:!0},rule:r(u),option:r(d),title:""},null,8,["api","modelValue","rule","option"]))}}),Sn={class:"xh-modal-container"},An=j({__name:"info-modal",props:{api:{default:""},method:{default:"GET"},ajaxParams:{default:void 0},isModal:{type:Boolean}},setup(t){const e=g(),a=g({submitBtn:{},resetBtn:{}}),n=s=>{var l;const o=(l=s==null?void 0:s.response)==null?void 0:l.extraConfig;a.value=o};return(s,o)=>(m(),x("div",Sn,[k(r(dt),{ref_key:"formRef",ref:e,class:"xh-form-create",api:s.api,method:s.method,"ajax-params":s.ajaxParams,"is-modal":!0,"onUpdate:initOk":n},null,8,["api","method","ajax-params"])]))}});const pt=U(An,[["__scopeId","data-v-be00eddc"]]),Vn={class:"xh-modal-container"},En={class:"xh-modal-content"},Tn=j({__name:"form-modal",props:{api:{default:""},method:{default:"GET"},ajaxParams:{default:void 0},isModal:{type:Boolean}},emits:["update:init","update:init-ok","update:init-error","update:submit","update:submit-ok","update:submit-error","update:rest","update:rest-ok"],setup(t,{expose:e,emit:a}){const n=ke(),s=g();g({submitBtn:{},resetBtn:{}});const o=v=>{a("update:init-ok",n.exposed)},l=v=>{a("update:init-error",n.exposed)},c=()=>{a("update:submit-ok")},i=()=>{a("update:submit-error")},u=()=>{a("update:rest-ok")};return e({hanldSubmit:async()=>await s.value.submit(),hanldReset:()=>{s.value.reset(),a("update:rest")}}),(v,f)=>(m(),x("div",Vn,[w("div",En,[k(r(dt),{ref_key:"formRef",ref:s,class:"xh-form-create",api:v.api,method:v.method,"ajax-params":v.ajaxParams,"is-modal":!0,"onUpdate:initOk":o,"onUpdate:submitOk":c,"onUpdate:submitError":i,"onUpdate:restOk":u,"onUpdate:initError":l},null,8,["api","method","ajax-params"])])]))}});const mt=U(Tn,[["__scopeId","data-v-283ef23e"]]),Rn=j({__name:"xh-button",props:{type:{default:"default"},text:{type:Boolean}},setup(t){const e=t,a=V(()=>e.text?"":`xh-button-${e.type}`);return(n,s)=>(m(),x("button",{class:ie(["xh-button",r(a)])},[re(n.$slots,"loading",{},void 0,!0),re(n.$slots,"icon",{},void 0,!0),re(n.$slots,"default",{},void 0,!0)],2))}});const Bn=U(Rn,[["__scopeId","data-v-dbf03c62"]]),Qe=j({__name:"index",props:{type:{default:"default"}},setup(t){const e=t,a=["error","purple","cyan"],n=V(()=>a.includes(e.type));return(s,o)=>{const l=E("el-button");return r(n)?(m(),$(Bn,{key:0,type:s.type},{default:C(()=>[re(s.$slots,"loading"),re(s.$slots,"icon"),re(s.$slots,"default")]),_:3},8,["type"])):(m(),$(l,{key:1,type:s.type},{default:C(()=>[re(s.$slots,"loading"),re(s.$slots,"icon"),re(s.$slots,"default")]),_:3},8,["type"]))}}}),Un=j({__name:"buttons",props:{extraConfig:{}},emits:["update:init","update:submit","update:rest"],setup(t,{expose:e,emit:a}){const n=ke(),s=g(!1),o=i=>{s.value=i},l=()=>{o(!0),a("update:submit")},c=()=>{o(!0),a("update:rest")};return ue(()=>{a("update:init",{exposed:n.exposed})}),e({setDisabled:o}),(i,u)=>{var v;const d=Qe,h=E("el-space");return(v=i.extraConfig.submitBtn)!=null&&v.show?(m(),$(h,{key:0,alignment:"center",class:"footer-buttons",size:[30,0]},{default:C(()=>{var f,p,_,P;return[(f=i.extraConfig.submitBtn)!=null&&f.show?(m(),$(d,O({key:0,type:"primary",class:"xh-extra-button"},((p=i.extraConfig)==null?void 0:p.submitBtn)??{},{loading:r(s),disabled:r(s),onClick:l}),{default:C(()=>{var y;return[L(M(r(s)?"请求中...":((y=i.extraConfig.submitBtn)==null?void 0:y.content)??"提交"),1)]}),_:1},16,["loading","disabled"])):T("",!0),(_=i.extraConfig.resetBtn)!=null&&_.show?(m(),$(d,O({key:1,type:"warning",class:"xh-extra-button"},((P=i.extraConfig)==null?void 0:P.resetBtn)??{},{disabled:r(s),onClick:c}),{default:C(()=>{var y;return[L(M(((y=i.extraConfig.resetBtn)==null?void 0:y.content)??"重置"),1)]}),_:1},16,["disabled"])):T("",!0)]}),_:1})):T("",!0)}}});const Mn=U(Un,[["__scopeId","data-v-c3072cde"]]),Ln=(t,e,a,n,s)=>{var h,v;a==null||a.xGrid;const o=a==null?void 0:a.form,l=a==null?void 0:a.page,c=a==null?void 0:a.sort,i=a==null?void 0:a.filters;a!=null&&a.code&&((h=n.screenConfig)!=null&&h.api)&&(t=(v=n.screenConfig)==null?void 0:v.api);const u=W.currentRoute.value,d=g({method:e,params:{page:l.currentPage??1,limit:l.pageSize??20,...s??{},...o,...(u==null?void 0:u.query)??{}}});return JSON.stringify(c)!=="{}"&&d.value.params&&(d.value.params={...d.value.params,field:c.field,order:c.order}),i.length>0&&d.value.params&&i.forEach(({field:f,values:p})=>{d.value.params={...d.value.params,[f]:p.join(",")}}),new Promise((f,p)=>{X(t,d.value).then(_=>{f(_)}).catch(_=>{p(_)})})},Fn=(t,e,a)=>{X(a.file,{responseType:"blob"}).then(n=>{Ra.saveFile({filename:t,type:e,content:n.data})})},On=(t,e,a)=>new Promise((n,s)=>{var c;if(!((c=e.exportConfig)!=null&&c.api))return D("请设置请求API"),Promise.reject(new Error("请设置请求API"));const o=a==null?void 0:a.getProxyInfo(),l={format:t.type??"xlsx",filename:t.filename??"导出文件",sheetName:t.sheetName??"",isHeader:t.isHeader??!1,original:t.original??!1,mode:t.mode??"all",pager:o?o.pager:null,ids:t.mode==="selected"?t.data.map(i=>i.id):[],fields:t.columns.map(i=>({field:i.field,title:i.title}))};return new Promise(i=>{var h;const u={method:"POST",data:{...l}},d=((h=e.exportConfig)==null?void 0:h.api)??"";X(d,u).then(v=>{const{data:f}=v;if(!(f!=null&&f.file))return D("导出数据失败，缺少[file]地址"),Promise.reject(new Error("导出数据失败，缺少导出地址"));Fn(l.filename,l.format,f),i(v)})})}),qn=(t,e,a)=>{const n=new FormData;return n.append("file",t.file),new Promise(s=>{var c;const o=((c=e.importConfig)==null?void 0:c.api)??"";X(o,{method:"POST",data:n}).then(i=>{const{msg:u}=i;J(u||"操作成功"),a==null||a.commitProxy("query"),s(i)}).catch(i=>{console.error("导入失败",i)})})},zn=(t,e,a)=>new Promise(n=>{const s=new FileReader;s.onload=o=>{const l=o.target?o.target.result:"",c=Ba(l,{type:"binary"}),i=Ua.sheet_to_json(c.Sheets.Sheet1);t.$table.loadData(i),J("已将数据导入至本地表格"),n(i)},s.readAsBinaryString(t.file)}),Nn=(t,e,a)=>{var n,s;return(n=e.importConfig)!=null&&n.api&&((s=e.importConfig)!=null&&s.isRemote)?qn(t,e,a):zn(t)},Hn=(t,e,a,n,s)=>{const o={...a.toolbarConfig,slots:{buttons:"topButtonList"}};return a.toolbarConfig=o,o!=null&&o.import&&(a.importConfig={...a.importConfig,remote:!0,importMethod:l=>Nn(l,a,s)}),o!=null&&o.export&&(a.exportConfig={...a.exportConfig,remote:!0,exportMethod:l=>On(l,a,s)}),a.proxyConfig={...a.proxyConfig,ajax:{query:l=>Ln(t,e,l,a,n)}},a},ye=(t,e,a)=>X.request({url:t,params:e,method:"GET",...a}),xe=(t,e,a)=>X.request({url:t,data:e,method:"POST",...a}),qe=(t,e,a)=>X.request({url:t,data:e,method:"PUT",...a}),ze=(t,e,a)=>X.request({url:t,data:e,method:"DELETE",...a}),Y=(t,e)=>{const a=t.field;let n=e[a];if(a.includes(".")){const s=a.split(".");let o=e;s.forEach(l=>{o=o[l]}),n=o}return n},Ae=(t,e,a,n=!0)=>{if(!t){D("请设置请求API接口"),a==null||a.commitProxy("query");return}qe(t,e).then(s=>{a==null||a.commitProxy("query"),n&&J((s==null?void 0:s.msg)??"操作成功")})},Wn=(t,e,a,n)=>{var c,i;const s=((c=a==null?void 0:a.rowConfig)==null?void 0:c.keyField)??"id",o=e[t==null?void 0:t.field],l={[s]:e[s],keyField:s,field:t==null?void 0:t.field,value:o};Ae((i=t==null?void 0:t.params)==null?void 0:i.api,l,n)},Xn=(t,e)=>{let a={};for(const n in t){const s=t[n]||"id";a={...a,[s]:e[n]||""}}return a},Me=(t,e,a)=>{var l,c;const n=W.currentRoute.value;let o={...((l=t==null?void 0:t.pageData)==null?void 0:l.queryParams)??{},...n.query};return(c=t.pageData)!=null&&c.isBack&&(o={...o,isBack:1}),o},Qn=(t,e,a,n,s)=>{var u,d,h,v,f;const o=W.currentRoute.value,l=((u=t==null?void 0:t.pageData)==null?void 0:u.queryParams)??{},c=g({...o.query}),i=g({...c.value});if(l instanceof Object&&(i.value={...i.value,...l}),a&&!Re(JSON.stringify((d=t==null?void 0:t.pageData)==null?void 0:d.aliasParams),["[]","{}"]))i.value={...i.value,...Xn((h=t==null?void 0:t.pageData)==null?void 0:h.aliasParams,a)};else{const p=((v=n==null?void 0:n.rowConfig)==null?void 0:v.keyField)??"id";if(!a[p]){D("当前数据错误");return}const _=a[p];i.value={...i.value,[p]:_}}return(f=t.pageData)!=null&&f.isBack&&(i.value={...i.value,isBack:1}),i.value},Zn=(t,e,a)=>{var s,o;if(!((s=t==null?void 0:t.pageData)!=null&&s.path)){D("缺少跳转地址");return}const n=Me(t);W.push({path:(o=t==null?void 0:t.pageData)==null?void 0:o.path,query:{...n}})},Gn=(t,e,a,n)=>{var s,o;if(!((s=t==null?void 0:t.pageData)!=null&&s.path)){D("缺少跳转地址");return}W.push({path:(o=t==null?void 0:t.pageData)==null?void 0:o.path,query:{...e}})},Te=t=>{ht(t)||(t=`${window.location.origin}/${t}`),window.open(t)},Jn=(t,e,a)=>{var i,u,d;const n=((i=t==null?void 0:t.pageData)==null?void 0:i.api)??"",s=((u=t.pageData)==null?void 0:u.method)??"GET";let o=((d=t.pageData)==null?void 0:d.path)??"";const l=Me(t),c={method:s,params:{},data:{}};if(s==="GET"?c.params=l:c.data=l,o){Te(o);return}X(n,c).then(h=>{const{data:v}=h;if(!(v!=null&&v.url)){D("缺少目标跳转地址");return}o=v.url,Te(o)})},Kn=(t,e,a,n)=>{var d,h,v,f,p;const s=((d=t==null?void 0:t.pageData)==null?void 0:d.api)??"",o=((h=t.pageData)==null?void 0:h.method)??"GET";let l=((v=e.checkboxConfig)==null?void 0:v.labelField)??"";l||(l=((f=e==null?void 0:e.rowConfig)==null?void 0:f.keyField)??"id");let c=((p=t.pageData)==null?void 0:p.path)??"";const i=Me(t),u={method:o,params:{},data:{}};if(o==="GET"?u.params={...i,[l]:a}:u.data={...i,[l]:a},c){Te(c);return}X(s,u).then(_=>{const{data:P}=_;if(!(P!=null&&P.url)){D("缺少目标跳转地址");return}c=P.url,Te(c)})},Yn=(t,e,a,n)=>{var i,u,d;const s=((i=t==null?void 0:t.pageData)==null?void 0:i.api)??"",o=((u=t.pageData)==null?void 0:u.method)??"GET";let l=((d=t.pageData)==null?void 0:d.path)??"";const c=g({method:o,params:{...e},data:{...e}});if(o==="GET"?delete c.value.data:delete c.value.params,l){window.open(l);return}X(s,c.value).then(h=>{const{data:v}=h;if(!(v!=null&&v.url)){D("缺少目标跳转地址");return}l=v.url,Te(l)})},Ze=(t,e)=>Ma.service({text:t,lock:!0,background:"rgba(0, 0, 0, 0.7)",...e}),es=(t,e,a)=>{var l,c,i,u;if(!(((l=t.message)==null?void 0:l.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.api){D("请提供模态框接口");return}const s=g(),o={api:((c=t.pageData)==null?void 0:c.api)||"",method:((i=t.pageData)==null?void 0:i.method)||"GET",ajaxParams:((u=t.pageData)==null?void 0:u.queryParams)||{},"onUpdate:init-ok":d=>{s.value=d}};me(mt,o,{...t.message,beforeClose:(d,h,v)=>{var f;if(d==="confirm"){const p=Ze("正在提交中...");(f=s.value)==null||f.hanldSubmit().then(_=>{(_==null?void 0:_.code)===200&&(v(),a==null||a.commitProxy("reload"))}).finally(()=>{p.close()})}d==="cancel"&&(v(),a==null||a.commitProxy("reload"))}})},ts=(t,e,a,n)=>{var i,u,d,h,v;if(!(((i=t.message)==null?void 0:i.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.api){D("请提供模态框接口");return}const o=g(),l=g({api:((u=t.pageData)==null?void 0:u.api)||"",method:((d=t.pageData)==null?void 0:d.method)||"GET",ajaxParams:{...e},"onUpdate:init-ok":f=>{o.value=f}}),c=((h=t.pageData)==null?void 0:h.queryParams)??"";c instanceof Object&&(l.value.ajaxParams={...l.value.ajaxParams,...c}),(v=l.value.ajaxParams)!=null&&v.isBack&&delete l.value.ajaxParams.isBack,me(mt,l.value,{...t.message,beforeClose:(f,p,_)=>{var P;if(f==="confirm"){const y=Ze("正在提交中...");(P=o.value)==null||P.hanldSubmit().then(S=>{(S==null?void 0:S.code)===200&&(_(),n==null||n.commitProxy("reload"))}).finally(()=>{y.close()})}f==="cancel"&&(_(),n==null||n.commitProxy("reload"))}})},as=(t,e,a,n)=>{var c,i,u,d,h,v,f;if(!(((c=t.message)==null?void 0:c.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.api){D("请提供模态框接口");return}let o=((i=e.checkboxConfig)==null?void 0:i.labelField)??"";o||(o=((u=e==null?void 0:e.rowConfig)==null?void 0:u.keyField)??"id");const l=g({api:(d=t.pageData)==null?void 0:d.api,method:((h=t.pageData)==null?void 0:h.method)||"GET",ajaxParams:{[o]:a},"onUpdate:submit-ok":()=>{Pt(),n==null||n.commitProxy("reload")},"onUpdate:rest-ok":()=>{Pt(),n==null||n.commitProxy("reload")}});((v=t.pageData)==null?void 0:v.queryParams)instanceof Object&&(l.value.ajaxParams={...l.value.ajaxParams,...(f=t.pageData)==null?void 0:f.queryParams}),me(mt,l.value,{...t.message,beforeClose:(p,_,P)=>{P(),n==null||n.commitProxy("reload")}})},he=(t,e="温馨提示",a="",n)=>ce.confirm(t,e,{confirmButtonText:"确定",cancelButtonText:"取消",type:a,...n}),os=(t,e,a)=>{var d,h,v,f,p;const n=(d=t.pageData)==null?void 0:d.api,s=((h=t.pageData)==null?void 0:h.method)??"GET",o=Me(t);o!=null&&o.isBack&&delete o.isBack;const l=g({method:s,params:{...o},data:{...o}});s==="GET"?delete l.value.data:delete l.value.params;const c=((v=t.message)==null?void 0:v.content)??"",i=((f=t.message)==null?void 0:f.title)??"",u=((p=t.message)==null?void 0:p.type)??"";if(!n){D("接口地址不存在");return}he(c,i,u).then(()=>{X(n,l.value).then(_=>{J((_==null?void 0:_.msg)??"操作成功"),a==null||a.commitProxy("reload")})})},ns=(t,e,a,n)=>{var v,f,p,_,P,y,S;const s=(v=t.pageData)==null?void 0:v.api,o=((f=t.pageData)==null?void 0:f.method)??"GET",l=Me(t);l!=null&&l.isBack&&delete l.isBack;let c=((p=e.checkboxConfig)==null?void 0:p.labelField)??"";c||(c=((_=e==null?void 0:e.rowConfig)==null?void 0:_.keyField)??"id");const i=g({method:o,params:{...l,[c]:a},data:{...l,[c]:a}});o==="GET"?delete i.value.data:delete i.value.params;const u=((P=t.message)==null?void 0:P.content)??"",d=((y=t.message)==null?void 0:y.title)??"",h=((S=t.message)==null?void 0:S.type)??"";if(!s){D("接口地址不存在");return}he(u,d,h).then(()=>{X(s,i.value).then(R=>{J((R==null?void 0:R.msg)??"操作成功"),n==null||n.commitProxy("reload")})})},ss=(t,e,a,n)=>{var v,f,p,_,P,y,S,R;const s=(v=t.pageData)==null?void 0:v.api,o=((f=t.pageData)==null?void 0:f.method)??"GET";let l=((p=a.checkboxConfig)==null?void 0:p.labelField)??"";l||(l=((_=a==null?void 0:a.rowConfig)==null?void 0:_.keyField)??"id");const c=g({method:o,params:{...e},data:{...e}});o==="GET"?delete c.value.data:delete c.value.params;const i=((P=t.message)==null?void 0:P.content)??"",u=((y=t.message)==null?void 0:y.title)??"",d=((S=t.message)==null?void 0:S.type)??"",h=((R=t.message)==null?void 0:R.loading)??"正在处理中";if(!s){D("接口地址不存在");return}he(i,u,d).then(()=>{const I=Ze(h);X(s,c.value).then(b=>{J((b==null?void 0:b.msg)??"操作成功"),n==null||n.commitProxy("reload")}).finally(()=>{I.close()})})},ls=(t,e,a)=>{var o,l,c;if(!(((o=t.message)==null?void 0:o.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.path){D("请提供远程组件地址");return}const s={file:((l=t.pageData)==null?void 0:l.path)||"",ajaxParams:((c=t.pageData)==null?void 0:c.queryParams)||{},"onUpdate:close":()=>{ce.close(),a==null||a.commitProxy("reload")}};pe(Ge,s,{...t.message,beforeClose:(i,u,d)=>{d(),a==null||a.commitProxy("reload")}})},cs=(t,e,a,n)=>{var c,i,u,d,h,v;if(!(((c=t.message)==null?void 0:c.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.path){D("请提供远程组件地址");return}let o=((i=e.checkboxConfig)==null?void 0:i.labelField)??"";o||(o=((u=e==null?void 0:e.rowConfig)==null?void 0:u.keyField)??"id");const l=g({file:(d=t.pageData)==null?void 0:d.path,ajaxParams:{[o]:a},"onUpdate:close":()=>{ce.close(),n==null||n.commitProxy("reload")}});((h=t.pageData)==null?void 0:h.queryParams)instanceof Object&&(l.value.ajaxParams={...(v=t.pageData)==null?void 0:v.queryParams}),pe(Ge,l.value,{...t.message,beforeClose:(f,p,_)=>{_(),n==null||n.commitProxy("reload")}})},rs=(t,e,a,n)=>{var l,c;if(!(((l=t.message)==null?void 0:l.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.path){D("请提供远程组件地址");return}const o=g({file:(c=t.pageData)==null?void 0:c.path,ajaxParams:e,"onUpdate:close":()=>{ce.close(),n==null||n.commitProxy("reload")}});pe(Ge,o.value,{...t.message,beforeClose:(i,u,d)=>{d(),n==null||n.commitProxy("reload")}})},is=(t,e,a)=>{var o,l,c,i;if(!(((o=t.message)==null?void 0:o.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.api){D("请提供信息模态框接口");return}const s={api:((l=t.pageData)==null?void 0:l.api)||"",method:((c=t.pageData)==null?void 0:c.method)||"GET",ajaxParams:((i=t.pageData)==null?void 0:i.queryParams)||{}};pe(pt,s,{...t.message,beforeClose:(u,d,h)=>{h(),a==null||a.commitProxy("reload")}})},us=(t,e,a,n)=>{var i,u,d,h,v,f;if(!(((i=t.message)==null?void 0:i.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.api){D("请提供模态框接口");return}let o=((u=e.checkboxConfig)==null?void 0:u.labelField)??"";o||(o=((d=e==null?void 0:e.rowConfig)==null?void 0:d.keyField)??"id");const l=g({api:(h=t.pageData)==null?void 0:h.api,method:((v=t.pageData)==null?void 0:v.method)||"GET",ajaxParams:{[o]:a}}),c=((f=t==null?void 0:t.pageData)==null?void 0:f.queryParams)??"";c instanceof Object&&(l.value.ajaxParams={...l.value.ajaxParams,...c}),pe(pt,l.value,{...t.message,beforeClose:(p,_,P)=>{P(),n==null||n.commitProxy("reload")}})},ds=(t,e,a,n)=>{var c,i,u,d,h;if(!(((c=t.message)==null?void 0:c.title)||"")){D("信息模态框标题不能为空");return}if(!t.pageData.api){D("请提供信息模态框接口");return}const o=g({api:((i=t.pageData)==null?void 0:i.api)||"",method:((u=t.pageData)==null?void 0:u.method)||"GET",ajaxParams:{...e}}),l=((d=t.pageData)==null?void 0:d.queryParams)??"";l instanceof Object&&(o.value.ajaxParams={...o.value.ajaxParams,...l}),(h=o.value.ajaxParams)!=null&&h.isBack&&delete o.value.ajaxParams.isBack,pe(pt,o.value,{...t.message,beforeClose:(v,f,p)=>{p(),n==null||n.commitProxy("reload")}})},ps=(t,e,a)=>{var o,l,c,i;if(!(((o=t.message)==null?void 0:o.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.api){D("请提供表格模态框接口");return}const s={api:((l=t.pageData)==null?void 0:l.api)||"",method:((c=t.pageData)==null?void 0:c.method)||"GET",ajaxParams:((i=t.pageData)==null?void 0:i.queryParams)||{}};pe(ft,s,{...t.message,beforeClose:(u,d,h)=>{h(),a==null||a.commitProxy("reload")}})},ms=(t,e,a,n)=>{var c,i,u,d,h,v,f;if(!(((c=t.message)==null?void 0:c.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.api){D("请提供模态框接口");return}let o=((i=e.checkboxConfig)==null?void 0:i.labelField)??"";o||(o=((u=e==null?void 0:e.rowConfig)==null?void 0:u.keyField)??"id");const l=g({api:(d=t.pageData)==null?void 0:d.api,method:((h=t.pageData)==null?void 0:h.method)||"GET",ajaxParams:{[o]:a}});((v=t.pageData)==null?void 0:v.queryParams)instanceof Object&&(l.value.ajaxParams={...l.value.ajaxParams,...(f=t.pageData)==null?void 0:f.queryParams}),pe(ft,l.value,{...t.message,beforeClose:(p,_,P)=>{P(),n==null||n.commitProxy("reload")}})},_s=(t,e,a,n)=>{var c,i,u,d;if(!(((c=t.message)==null?void 0:c.title)||"")){D("模态框标题不能为空");return}if(!t.pageData.api){D("请提供模态框接口");return}const o=g({api:(i=t.pageData)==null?void 0:i.api,method:((u=t.pageData)==null?void 0:u.method)||"GET",ajaxParams:{...e}}),l=((d=t==null?void 0:t.pageData)==null?void 0:d.queryParams)??"";l instanceof Object&&(o.value.ajaxParams={...o.value.ajaxParams,...l}),pe(ft,o.value,{...t.message,beforeClose:(h,v,f)=>{f(),n==null||n.commitProxy("reload")}})},fs=(t,e,a,n)=>{},hs=(t,e,a)=>{var n;switch((n=e.pageData)==null?void 0:n.type){case"page":Zn(e);break;case"link":Jn(e);break;case"down":break;case"confirm":os(e,t,a);break;case"modal":es(e,t,a);break;case"info":is(e,t,a);break;case"table":ps(e,t,a);break;case"remote":ls(e,t,a);break;default:D("按钮类型错误");break}},vs=(t,e,a)=>{var c,i,u,d;const n=(c=t.columns)==null?void 0:c.filter(h=>h.type==="checkbox");if(!(n!=null&&n.length)){D("请先开启批量操作");return}const s=(a==null?void 0:a.getCheckboxRecords())??[];if(s.length<=0){D("请选择数据");return}let o=((i=t.checkboxConfig)==null?void 0:i.labelField)??"";o||(o=((u=t==null?void 0:t.rowConfig)==null?void 0:u.keyField)??"id");const l=s.map(h=>h[o]);switch((d=e.pageData)==null?void 0:d.type){case"link":Kn(e,t,l);break;case"down":break;case"confirm":ns(e,t,l,a);break;case"remote":cs(e,t,l,a);break;case"modal":as(e,t,l,a);break;case"info":us(e,t,l,a);break;case"table":ms(e,t,l,a);break;default:D("按钮类型错误");break}},It=(t,e,a,n,s)=>{var c,i;if(!n){D("行参数出错");return}const o=g({}),l=((c=e.pageData)==null?void 0:c.queryParams)??"";switch(l instanceof Object&&(o.value={...l}),o.value={...o.value,...Qn(e,a,n,t)},(i=e.pageData)==null?void 0:i.type){case"page":Gn(e,o.value);break;case"link":Yn(e,o.value);break;case"down":fs(e,o.value);break;case"confirm":ss(e,o.value,t,s);break;case"modal":ts(e,o.value,t,s);break;case"info":ds(e,o.value,t,s);break;case"table":_s(e,o.value,t,s);break;case"remote":rs(e,o.value,t,s);break;default:D("按钮类型错误");break}};const gs=()=>{const t=_e(),e=Ie(),a=(t==null?void 0:t.routeList)??[],n=[];for(const s of a){const o=`${e}${s.path}`;n.push(o)}return n},_t=t=>{const e=gs();return Re(t,e)},ys={class:"button-group"},xs={class:"pr-1"},ks={class:"no-group-buttons"},ws=j({__name:"index",props:{xGrid:{},column:{},rightButtonList:{},gridConfig:{},row:{}},setup(t){var f;const e=t,a=V(()=>{var p;return((p=e.column.params)==null?void 0:p.buttonGroupIcon)??"Operation"}),n=V(()=>{var p;return((p=e.column.params)==null?void 0:p.buttonGroupIconType)??"element"}),s={type:"primary",size:"small"},o=g(((f=e.column.params)==null?void 0:f.buttonStyle)??s),l=V(()=>e.rightButtonList.filter(p=>{var P,y,S,R,I,b,A,N,H,ee;const _=((P=p.pageData)==null?void 0:P.group)||((y=e.column.params)==null?void 0:y.group);return(R=(S=p.pageData)==null?void 0:S.params)!=null&&R.field&&((b=(I=p.pageData)==null?void 0:I.params)!=null&&b.value)&&_?(e.row[(N=(A=p.pageData)==null?void 0:A.params)==null?void 0:N.field]||"")===((ee=(H=p.pageData)==null?void 0:H.params)==null?void 0:ee.value):_})),c=V(()=>e.rightButtonList.filter(p=>{var _;return!((_=p.pageData)!=null&&_.group)})),i=V(()=>{var p;return((p=e.column.params)==null?void 0:p.groupText)||"更多"}),u=V(()=>p=>{var I,b,A,N,H,ee,fe;const _=((I=p.pageData)==null?void 0:I.api)??"";if(!_t(_))return!1;const P=((A=(b=p==null?void 0:p.pageData)==null?void 0:b.params)==null?void 0:A.where)??"",y=(H=(N=p==null?void 0:p.pageData)==null?void 0:N.params)==null?void 0:H.field,S=(fe=(ee=p==null?void 0:p.pageData)==null?void 0:ee.params)==null?void 0:fe.value;if(y===void 0&&S===void 0)return!0;if(y===void 0||y===""||y&&(S===void 0||S===""))return!1;const R=e.row[y];switch(P){case"!=":return S!==R;case"in":return S instanceof Array&&Re(R,S);case"notIn":return S instanceof Array&&!Re(R,S);default:return S===R}}),d=V(()=>p=>{const _={...p};return _!=null&&_.icon&&delete _.icon,_}),h=p=>{It(e.gridConfig,p,e.column,e.row,e.xGrid)},v=p=>{It(e.gridConfig,p,e.column,e.row,e.xGrid)};return(p,_)=>{const P=G,y=E("el-button"),S=E("el-dropdown-item"),R=E("el-dropdown-menu"),I=E("el-dropdown");return m(),x("div",ys,[r(l).length?(m(),$(I,{key:0,class:"mr-2",onCommand:h},{dropdown:C(()=>[k(R,null,{default:C(()=>[(m(!0),x(F,null,K(r(l),(b,A)=>(m(),x(F,{key:A},[r(u)(b)?(m(),$(S,{key:0,command:b},{default:C(()=>{var N,H,ee;return[(N=b==null?void 0:b.button)!=null&&N.icon?(m(),$(P,{key:0,icon:(H=b==null?void 0:b.button)==null?void 0:H.icon,type:(ee=b==null?void 0:b.button)==null?void 0:ee.iconType},null,8,["icon","type"])):T("",!0),w("span",null,M(b.title),1)]}),_:2},1032,["command"])):T("",!0)],64))),128))]),_:1})]),default:C(()=>[k(y,O({type:"danger"},r(o)),{default:C(()=>[w("span",xs,M(r(i)),1),r(a)?(m(),$(P,{key:0,icon:r(a),type:r(n)},null,8,["icon","type"])):T("",!0)]),_:1},16)]),_:1})):T("",!0),w("div",ks,[(m(!0),x(F,null,K(r(c),(b,A)=>{var N;return Ft((m(),x("div",{key:A,class:"item"},[(m(),$(y,O({key:A},r(d)((b==null?void 0:b.button)??{}),{onClick:H=>v(b)}),We({default:C(()=>[L(" "+M(b.title),1)]),_:2},[(N=b==null?void 0:b.button)!=null&&N.icon?{name:"icon",fn:C(()=>{var H,ee,fe;return[(H=b==null?void 0:b.button)!=null&&H.icon?(m(),$(P,{key:0,icon:(ee=b==null?void 0:b.button)==null?void 0:ee.icon,type:((fe=b==null?void 0:b.button)==null?void 0:fe.iconType)??""},null,8,["icon","type"])):T("",!0)]}),key:"0"}:void 0]),1040,["onClick"]))])),[[Ot,r(u)(b)]])}),128))])])}}});const bs=U(ws,[["__scopeId","data-v-f5cb3161"]]),Ps={class:"flex space-x-2"},Cs=j({__name:"index",props:{xGrid:{},topButtonList:{},gridConfig:{}},setup(t){const e=t,a=V(()=>e.topButtonList.filter(s=>{var o;return!((o=s.pageData)!=null&&o.group)})),n=V(()=>s=>{var l;const o=((l=s.pageData)==null?void 0:l.api)??"";return!!_t(o)});return(s,o)=>{const l=G,c=Qe,i=E("el-space");return m(),x("div",Ps,[r(a).length?(m(),$(i,{key:0},{default:C(()=>[(m(!0),x(F,null,K(r(a),(u,d)=>{var h;return m(),x(F,null,[r(n)(u)?(m(),$(c,O({key:d,type:"primary"},(u==null?void 0:u.button)??{},{onClick:v=>r(hs)(e.gridConfig,u,s.xGrid)}),We({default:C(()=>[L(" "+M(u.title),1)]),_:2},[(h=u==null?void 0:u.button)!=null&&h.icon?{name:"icon",fn:C(()=>{var v,f;return[k(l,{icon:(v=u==null?void 0:u.button)==null?void 0:v.icon,type:(f=u==null?void 0:u.button)==null?void 0:f.iconType},null,8,["icon","type"])]}),key:"0"}:void 0]),1040,["onClick"])):T("",!0)],64)}),256))]),_:1})):T("",!0)])}}}),$s={class:"flex space-x-2"},Is=j({__name:"index",props:{xGrid:{},gridConfig:{},selectButtonList:{}},setup(t){const e=t,a=V(()=>{var o;return((o=e.selectButtonList)==null?void 0:o.filter(l=>{var c;return!((c=l.pageData)!=null&&c.group)}))||[]}),n=V(()=>o=>{const l={...o};return l!=null&&l.icon&&delete l.icon,l}),s=V(()=>o=>{var c;const l=((c=o.pageData)==null?void 0:c.api)??"";return!!_t(l)});return(o,l)=>{const c=G,i=Qe,u=E("el-space");return m(),x("div",$s,[r(a).length?(m(),$(u,{key:0},{default:C(()=>[(m(!0),x(F,null,K(r(a),(d,h)=>{var v;return m(),x(F,null,[r(s)(d)?(m(),$(i,O({key:h,type:"primary"},r(n)((d==null?void 0:d.button)??{}),{onClick:f=>r(vs)(e.gridConfig,d,o.xGrid)}),We({default:C(()=>[L(" "+M(d.title),1)]),_:2},[(v=d==null?void 0:d.button)!=null&&v.icon?{name:"icon",fn:C(()=>{var f,p;return[k(c,{icon:(f=d==null?void 0:d.button)==null?void 0:f.icon,type:(p=d==null?void 0:d.button)==null?void 0:p.iconType},null,8,["icon","type"])]}),key:"0"}:void 0]),1040,["onClick"])):T("",!0)],64)}),256))]),_:1})):T("",!0)])}}}),Ds={class:"flex space-x-3"},js={key:1,class:"flex space-x-1"},Ss=j({__name:"index",props:{xGrid:{},gridConfig:{},topButton:{},topButtonList:{},selectButtonList:{}},setup(t){const e=de();return(a,n)=>{var o,l,c;const s=Qe;return m(),x("div",Ds,[(o=r(e).query)!=null&&o.isBack?(m(),$(s,{key:0,type:"primary",onClick:r(Ne)},{default:C(()=>[L(" 返回 ")]),_:1},8,["onClick"])):T("",!0),a.topButtonList.length||(l=a.selectButtonList)!=null&&l.length?(m(),x("div",js,[a.topButtonList.length?(m(),$(Cs,z(O({key:0},{xGrid:a.xGrid,gridConfig:a.gridConfig,topButtonList:a.topButtonList})),null,16)):T("",!0),(c=a.selectButtonList)!=null&&c.length?(m(),$(Is,z(O({key:1},{xGrid:a.xGrid,gridConfig:a.gridConfig,selectButtonList:a.selectButtonList})),null,16)):T("",!0)])):T("",!0)])}}}),As=t=>(we("data-v-c11e2f2f"),t=t(),be(),t),Vs=As(()=>w("div",null,null,-1)),Es={class:"assets-container"},Ts={class:"item"},Rs=["src"],Bs=["src"],Us=j({__name:"index",props:{xGrid:{},gridConfig:{},column:{},row:{}},setup(t){const e=t,a="",n=V(()=>{var o,l;return((l=(o=e.column)==null?void 0:o.params)==null?void 0:l.resource)??[]}),s=V(()=>Y(e.column,e.row));return(o,l)=>{const c=G,i=E("el-tooltip");return m(),x(F,null,[Vs,w("div",Es,[(m(!0),x(F,null,K(r(n),(u,d)=>(m(),$(i,{key:d,show:u==null?void 0:u.isUpdate,trigger:"hover",placement:"top"},{content:C(()=>[L(M((u==null?void 0:u.title)??"错误"),1)]),default:C(()=>[w("div",Ts,[(u==null?void 0:u.type)==="url"&&r(ht)(u==null?void 0:u.icon)?(m(),x("img",{key:0,class:"logo",src:u==null?void 0:u.icon},null,8,Rs)):(u==null?void 0:u.type)==="path"?(m(),x("img",{key:1,class:"logo",src:`${r(a)}${u==null?void 0:u.icon}`},null,8,Bs)):(m(),$(c,{key:2,icon:u.icon},null,8,["icon"])),w("span",null,M(r(s)[u.field]??"字段错误"),1)])]),_:2},1032,["show"]))),128))])],64)}}});const Ms=U(Us,[["__scopeId","data-v-c11e2f2f"]]),Ls=j({__name:"index",props:{xGrid:{},column:{},gridConfig:{},row:{}},setup(t){var s,o;const e=t,a=V(()=>Y(e.column,e.row)),n=g(((o=(s=e.column)==null?void 0:s.params)==null?void 0:o.props)??{});return(l,c)=>{const i=G;return m(),$(i,O({icon:r(a)},r(n)),null,16,["icon"])}}}),Fs={class:"xh-image-error"},Os=j({__name:"index",props:{xGrid:{},column:{},gridConfig:{},row:{}},setup(t){var s,o,l,c;const e=t,a=V(()=>Y(e.column,e.row)),n=g(((o=(s=e.column)==null?void 0:s.params)==null?void 0:o.props)??{});return(l=n.value)!=null&&l.style||(n.value.style={width:"30px",height:"30px"}),(c=n.value)!=null&&c.preview&&(n.value.previewSrcList=[a.value],delete n.value.preview),(i,u)=>{const d=G,h=E("el-image");return m(),$(h,O(r(n),{src:r(a),class:"xh-table-image"}),{error:C(()=>[w("div",Fs,[k(d,{icon:"Picture",type:"element"})])]),_:1},16,["src"])}}});const qs=U(Os,[["__scopeId","data-v-2e6bc660"]]),zs=t=>(we("data-v-257b233b"),t=t(),be(),t),Ns={class:"xh-image-error"},Hs=zs(()=>w("span",null,"加载失败",-1)),Ws=j({__name:"index",props:{xGrid:{},column:{},gridConfig:{},row:{}},setup(t){var l,c,i;const e=t,a=V(()=>{var u;return((u=e.column.params)==null?void 0:u.previewDisabled)??!0}),n=V(()=>{const u=Y(e.column,e.row);return u instanceof Array?u.map(d=>d.url):[]}),s=V(()=>{const u=Y(e.column,e.row);return u instanceof Array&&u.length>0?u:[]}),o=g(((c=(l=e.column)==null?void 0:l.params)==null?void 0:c.props)??{});return(i=o.value)!=null&&i.style||(o.value.style={width:"30px",height:"30px"}),(u,d)=>{const h=G,v=E("el-image");return m(!0),x(F,null,K(r(s),(f,p)=>(m(),$(v,O(r(o),{key:p,src:f==null?void 0:f.url,"preview-src-list":r(a)?[]:r(n)}),{error:C(()=>[w("div",Ns,[k(h,{icon:"Picture",type:"element"}),Hs])]),_:2},1040,["src","preview-src-list"]))),128)}}});const Xs=U(Ws,[["__scopeId","data-v-257b233b"]]),Qs=t=>(we("data-v-50a2462d"),t=t(),be(),t),Zs={class:"xh-image-error"},Gs=Qs(()=>w("span",null,"加载失败",-1)),Js=j({__name:"index",props:{column:{},row:{}},setup(t){var l,c,i;const e=t,a=V(()=>{var u;return((u=e.column.params)==null?void 0:u.previewDisabled)??!0}),n=V(()=>{const u=Y(e.column,e.row);return u instanceof Array?u.map(d=>d.url):[]}),s=V(()=>{const u=Y(e.column,e.row);return u instanceof Array&&u.length>0?u[0]:[]}),o=g(((c=(l=e.column)==null?void 0:l.params)==null?void 0:c.props)??{});return(i=o.value)!=null&&i.style||(o.value.style={width:"30px",height:"30px"}),(u,d)=>{var f;const h=G,v=E("el-image");return m(),$(v,O(r(o),{src:(f=r(s))==null?void 0:f.url,"preview-src-list":r(a)?[]:r(n)}),{error:C(()=>[w("div",Zs,[k(h,{icon:"Picture",type:"element"}),Gs])]),_:1},16,["src","preview-src-list"])}}});const Ks=U(Js,[["__scopeId","data-v-50a2462d"]]),Ys=j({__name:"index",props:{isBorder:{type:Boolean,default:!1},border:{default:"1px solid #b179ff"}},setup(t){const e=t;Pe(n=>({"564a0163":r(a)}));const a=V(()=>e.isBorder?e.border:"");return(n,s)=>{const o=E("el-input");return m(),$(o,{class:ie({"xh-input":n.isBorder})},null,8,["class"])}}});const el=j({__name:"index",props:{xGrid:{},gridConfig:{},column:{},row:{}},setup(t){var l,c;const e=t,a=V(()=>Y(e.column,e.row)),n=g(""),s=g(((c=(l=e.column)==null?void 0:l.params)==null?void 0:c.props)??{}),o=i=>{var f,p,_,P;const u=ve("rowEdit",!0),d=((f=e.column.params)==null?void 0:f.api)??u,h=((_=(p=e.gridConfig)==null?void 0:p.rowConfig)==null?void 0:_.keyField)??"id",v={[h]:e.row[h],keyField:h,field:(P=e.column)==null?void 0:P.field,value:i};Ae(d,v,e.xGrid)};return(i,u)=>{const d=Ys;return m(),$(d,O({modelValue:r(n),"onUpdate:modelValue":u[0]||(u[0]=h=>oe(n)?n.value=h:null),value:r(a),placeholder:"请输入"},r(s),{"is-border":!0,onChange:o}),null,16,["modelValue","value"])}}}),tl=j({__name:"index",setup(t){return(e,a)=>{const n=E("el-input-number");return m(),$(n)}}}),al=j({__name:"index",props:{xGrid:{},gridConfig:{},column:{},row:{}},setup(t){var c,i;const e=t,a=V(()=>Y(e.column,e.row)),n=V(()=>{var u;return((u=e.column.params)==null?void 0:u.isMessage)??!1}),s=g(a),o=g(((i=(c=e.column)==null?void 0:c.params)==null?void 0:i.props)??{}),l=u=>{var p,_,P,y;const d=ve("rowEdit",!0),h=((p=e.column.params)==null?void 0:p.api)??d,v=((P=(_=e.gridConfig)==null?void 0:_.rowConfig)==null?void 0:P.keyField)??"id",f={[v]:e.row[v],keyField:v,field:(y=e.column)==null?void 0:y.field,value:u};Ae(h,f,e.xGrid,n.value)};return(u,d)=>{const h=tl;return m(),$(h,O({modelValue:r(s),"onUpdate:modelValue":d[0]||(d[0]=v=>oe(s)?s.value=v:null),value:r(a)},r(o),{onChange:l}),null,16,["modelValue","value"])}}}),ol=j({__name:"index",props:{column:{},row:{}},setup(t){const e=t,a=V(()=>{var l;const o=((l=e.column)==null?void 0:l.params)??{};return o!=null&&o.type||delete o.type,o}),n=V(()=>{var o,l;return((l=(o=e.column)==null?void 0:o.params)==null?void 0:l.format)??"￥"}),s=V(()=>Y(e.column,e.row));return(o,l)=>(m(),x("div",z(Z(r(a))),M(r(n))+M(r(kt).commafy(r(kt).toNumber(r(s)),{digits:2})),17))}}),Gt=async t=>{const e=`${t}?t=${Date.now()}`;return await ye(e)},nl=async t=>{let e="",a="";for(let n=0;n<t.length;n++){const s=t[n],o=await Gt(s),l=s.includes(".js");!e&&l?e=o.toString():!e&&l&&(e+=o.toString());const c=s.includes(".css")||s.includes(".scss");!a&&c?a=o.toString():a&&c&&(a+=o.toString())}return{jsContent:e,cssContent:a}},lt=(t,e="el-icon-warning",a="font-size:26px;color:red;")=>({template:`
        <div class="remote-loading">
            <div class="${e}" style="${a}"></div>
            <div class="mt-5px">${t}</div>
        </div>
        `}),sl=t=>{const e=/<link[^>]*href="(.*?)"[^>]*>/g,a=Array.from(t.matchAll(e),u=>u[1]),n=Ie(),s=a.map(u=>u.includes("http")||u.includes("https")?u:`/${u.replace("{moduleName}",n)}`),o=t==null?void 0:t.match(/<template>([\s\S]*)<\/template>/),l=t==null?void 0:t.match(/<script.*>([\s\S]*)<\/script>/),c=t==null?void 0:t.match(/<style.*>([\s\S]*)<\/style>/);return{templates:o?o[1]:"",sctipts:l?l[1]:"",styles:c?c[1]:"",stylesHasScoped:t.match(/<style.*scoped>([\s\S]*)<\/style>/)!==null,links:s}},Jt={vue:null},ll=(t,e,a)=>ce.alert(t,{confirmButtonText:"确定",type:e,...a}),cl=(t,e,a)=>{La({message:t,type:e,...a})},rl=(t,e,a)=>ce({customStyle:{width:"45%",height:"500px"},showClose:!0,title:" ",...a,closeOnClickModal:!1,customClass:"xh-modal-mask",message:()=>He(Ge,{file:t,ajaxParams:e,"onUpdate:close":()=>{ce.close()}})}),il=async t=>{const e=sl(t);if(!e.sctipts||!e.templates)return Promise.resolve({ponentObj:lt("远程代码格式解析失败"),tplData:e});let a={jsContent:"",cssContent:""};e.links.length>0&&(a=await nl(e.links)),a.cssContent&&(e.styles=a.cssContent+e.styles);const n=e.sctipts.indexOf("{"),s=e.sctipts.lastIndexOf("}");if(n===-1||s===-1)return Promise.resolve({ponentObj:lt("解析代码错误"),tplData:e});const o=e.sctipts.slice(n,s+1),l=`${a.jsContent}return ${o}`,c=new Function(l)();return c.template=e==null?void 0:e.templates,Promise.resolve({ponentObj:c,tplData:e})},ul=()=>{const t=Jt.vue,e=_e(),a=Q(),n=Ie();t.config.globalProperties.$moduleName=n,t.config.globalProperties.$userApp=e,t.config.globalProperties.$siteApp=a,t.config.globalProperties.$axios=jn,t.config.globalProperties.$http={useGet:ye,usePost:xe,usePut:qe,useDelete:ze},t.config.globalProperties.$useGet=ye,t.config.globalProperties.$usePost=xe,t.config.globalProperties.$usePut=qe,t.config.globalProperties.$useDelete=ze,t.config.globalProperties.$echarts=Fa,t.config.globalProperties.$useKeyCodeEvent=Vr,t.component("XRemote")===void 0&&t.component("XRemote",ne),t.component("AppIcons")===void 0&&t.component("AppIcons",G),t.config.globalProperties.$useAlert=ll,t.config.globalProperties.$useConfirm=he,t.config.globalProperties.$useMessage=cl,t.config.globalProperties.$useNotify=Ee,t.config.globalProperties.$useLoading=Ze,t.config.globalProperties.$useRemote=rl},dl=(t,e)=>{Oa.render(t).then(a=>{const n=document.createElement("style");if(n.setAttribute("type","text/css"),n.setAttribute("id",`css${e}`),n.styleSheet)n.styleSheet.cssText=a.css;else{const o=document.createTextNode(a.css);n.appendChild(o)}const s=document.getElementsByTagName("head");s.length?s[0].appendChild(n):document.documentElement.appendChild(n)})},pl=(t,e,a)=>{if(t.setAttribute("class",`remote css${e}`),!document.querySelector(`style[id=css${e}]`)){let n="";a.stylesHasScoped?n=`
            .css${e}{
                ${a.styles}
            }
        `:n=a.styles,dl(n,e)}},ml=j({__name:"index",props:{file:{},ajaxParams:{},isApi:{type:Boolean},isModal:{type:Boolean}},emits:["update:init","update:modelValue","update:success","update:error","update:close"],setup(t,{emit:e}){const a=t,n=qa(),s=g(),o=g(tt()),l=g(a.isApi),c=g(a.file),i=async p=>await Gt(p).then(async _=>{const P=_.toString(),y=await il(P);return pl(s.value,o.value,y.tplData),y.ponentObj}).catch(_=>{e("update:error",_),console.error(_)}),u=za(async()=>c.value?await i(`${c.value}.vue`).then(p=>(ul(),e("update:init",p),p)):lt("请先配置远程文件")),d=p=>{e("update:modelValue",p)},h=p=>{l.value=!1,c.value=p,o.value=tt(),i(c.value)},v=()=>{o.value=tt(),i(c.value)},f=()=>{a!=null&&a.isModal&&e("update:close")};return(p,_)=>(m(),x("div",{ref_key:"remoteRef",ref:s,class:"h-100%"},[(m(),$(Rt(r(u)),O({...r(n),...p.ajaxParams},{"onUpdate:modelValue":d,"onUpdate:openWin":h,"onUpdate:reloadWin":v,"onUpdate:closeWin":f}),null,16))],512))}});const ne=U(ml,[["__scopeId","data-v-b3333b63"]]),_l=j({__name:"index",props:{xGrid:{},gridConfig:{},column:{},row:{}},setup(t){var l;const e=t,a=V(()=>{var c,i;return(i=(c=e.column)==null?void 0:c.params)==null?void 0:i.file}),n=((l=e.column)==null?void 0:l.field)??"",s=V(()=>Y(e.column,e.row)),o=c=>{var v,f,p,_;const i=ve("rowEdit",!0),u=((v=e.column.params)==null?void 0:v.api)??i,d=((p=(f=e.gridConfig)==null?void 0:f.rowConfig)==null?void 0:p.keyField)??"id",h={[d]:e.row[d],keyField:d,field:(_=e.column)==null?void 0:_.field,value:c};Ae(u,h,e.xGrid)};return(c,i)=>{const u=ne;return m(),$(u,O({modelValue:r(s),"onUpdate:modelValue":i[0]||(i[0]=d=>oe(s)?s.value=d:null),file:r(a)},{column:c.column,field:r(n),row:c.row},{"onUpdate:value":o}),null,16,["modelValue","file"])}}}),fl={key:0,class:"tabs-container"},hl={class:"tabs-list"},vl=["onClick"],gl={class:"pl-1"},yl=j({__name:"index",props:{xGrid:{},gridConfig:{},tabsConfig:{}},setup(t){var i;const e=t,a=de(),n=qt(),s=((i=e.tabsConfig)==null?void 0:i.field)??"",o=a==null?void 0:a.query[s],l=V(()=>{var u;return o??((u=e.tabsConfig)==null?void 0:u.active)}),c=u=>{n.push({query:{[s]:u.value}})};return(u,d)=>{var f,p;const h=G,v=E("el-space");return(p=(f=u.tabsConfig)==null?void 0:f.list)!=null&&p.length?(m(),x("div",fl,[w("div",hl,[k(v,null,{default:C(()=>[(m(!0),x(F,null,K(u.tabsConfig.list,(_,P)=>(m(),x("div",{key:P,class:ie(["item",{active:r(l)===(_==null?void 0:_.value)}]),onClick:y=>c(_)},[_!=null&&_.icon?(m(),$(h,{key:0,icon:_==null?void 0:_.icon},null,8,["icon"])):T("",!0),w("span",gl,M((_==null?void 0:_.label)??"错误"),1)],10,vl))),128))]),_:1})])])):T("",!0)}}});const xl=U(yl,[["__scopeId","data-v-ae382a3c"]]),kl=j({__name:"index",props:{xGrid:{},gridConfig:{},formScreen:{}},setup(t){const e=qt(),a=de(),n=s=>{e.push({path:a.fullPath,query:{...a.query,...s.data}})};return(s,o)=>{var c;const l=E("vxeForm");return m(),$(l,{items:s.formScreen.items,data:(c=s.formScreen)==null?void 0:c.data,onSubmit:n},null,8,["items","data"])}}}),wl=j({__name:"index",props:{gridConfig:{},xGrid:{},formRemote:{}},setup(t){return(e,a)=>{var s,o;const n=ne;return m(),$(n,O({file:((s=e.formRemote)==null?void 0:s.file)||""},{ajaxParams:(o=e.formRemote)==null?void 0:o.ajaxParams}),null,16,["file"])}}}),bl={class:"form-tabs-container"},Pl=j({__name:"index",props:{xGrid:{},gridConfig:{},formScreen:{},formRemote:{},tabsConfig:{}},setup(t){return(e,a)=>{var l,c,i,u;const n=wl,s=kl,o=xl;return m(),x("div",bl,[(l=e.formRemote)!=null&&l.file?(m(),$(n,z(O({key:0},{gridConfig:e.gridConfig,formRemote:e.formRemote,xGrid:e.xGrid})),null,16)):T("",!0),(c=e.formScreen)!=null&&c.data?(m(),$(s,z(O({key:1},{gridConfig:e.gridConfig,formScreen:e.formScreen,xGrid:e.xGrid})),null,16)):T("",!0),(u=(i=e.tabsConfig)==null?void 0:i.list)!=null&&u.length?(m(),$(o,z(O({key:2},{gridConfig:e.gridConfig,tabsConfig:e.tabsConfig,xGrid:e.xGrid})),null,16)):T("",!0)])}}});const Cl=U(Pl,[["__scopeId","data-v-4bb9ed66"]]),$l=["innerHTML"],Il=j({__name:"index",props:{xGrid:{},gridConfig:{},column:{},row:{}},setup(t){var s,o;const e=t,a=V(()=>Y(e.column,e.row)),n=g(((o=(s=e.column)==null?void 0:s.params)==null?void 0:o.props)??{});return(l,c)=>(m(),x("div",O(r(n),{innerHTML:r(a)}),null,16,$l))}}),Dl=j({__name:"index",props:{options:{},value:{default:""}},setup(t){const e=t,a=V(()=>e.value);return(n,s)=>{const o=E("el-option"),l=E("el-select");return m(),$(l,{modelValue:r(a),"onUpdate:modelValue":s[0]||(s[0]=c=>oe(a)?a.value=c:null),placeholder:"请选择"},{default:C(()=>[(m(!0),x(F,null,K(n.options,c=>(m(),$(o,{key:c.value,label:c.label,value:c.value,disabled:c.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])}}}),jl=j({__name:"index",props:{xGrid:{},gridConfig:{},column:{},row:{}},setup(t){var o;const e=t,a=V(()=>Y(e.column,e.row)),n=g(((o=e.column)==null?void 0:o.params)??{}),s=l=>{var h,v,f,p;const c=ve("rowEdit",!0),i=((h=e.column.params)==null?void 0:h.api)??c,u=((f=(v=e.gridConfig)==null?void 0:v.rowConfig)==null?void 0:f.keyField)??"id",d={[u]:e.row[u],keyField:u,field:(p=e.column)==null?void 0:p.field,value:l};Ae(i,d,e.xGrid)};return(l,c)=>{var u,d;const i=Dl;return(d=(u=r(n))==null?void 0:u.options)!=null&&d.length?(m(),$(i,O({key:0,value:r(a)},r(n),{onChange:s}),null,16,["value"])):T("",!0)}}}),Sl=j({__name:"index",props:{xGrid:{},gridConfig:{},column:{},row:{}},setup(t){const e=t,a=V(()=>Y(e.column,e.row)),n=s=>{var u,d,h,v;const o=ve("rowEdit",!0),l=((u=e.column.params)==null?void 0:u.api)??o,c=((h=(d=e.gridConfig)==null?void 0:d.rowConfig)==null?void 0:h.keyField)??"id",i={[c]:e.row[c],keyField:c,field:(v=e.column)==null?void 0:v.field,value:s};Ae(l,i,e.xGrid)};return(s,o)=>{var c,i,u,d,h,v,f,p,_,P,y,S,R,I,b,A,N,H;const l=E("el-switch");return m(),$(l,{modelValue:r(a),"onUpdate:modelValue":o[0]||(o[0]=ee=>oe(a)?a.value=ee:null),"active-action-icon":((u=(i=(c=s.column)==null?void 0:c.params)==null?void 0:i.checked)==null?void 0:u.icon)??"","active-text":(v=(h=(d=s.column)==null?void 0:d.params)==null?void 0:h.checked)==null?void 0:v.text,"active-value":(_=(p=(f=s.column)==null?void 0:f.params)==null?void 0:p.checked)==null?void 0:_.value,"inactive-action-icon":((S=(y=(P=s.column)==null?void 0:P.params)==null?void 0:y.unchecked)==null?void 0:S.icon)??"","inactive-text":(b=(I=(R=s.column)==null?void 0:R.params)==null?void 0:I.unchecked)==null?void 0:b.text,"inactive-value":(H=(N=(A=s.column)==null?void 0:A.params)==null?void 0:N.unchecked)==null?void 0:H.value,"inline-prompt":"",onChange:n},null,8,["modelValue","active-action-icon","active-text","active-value","inactive-action-icon","inactive-text","inactive-value"])}}}),Al=j({__name:"index",props:{column:{},row:{}},setup(t){const e=t,a=V(()=>Y(e.column,e.row)),n=V(()=>{var o;return(o=e.column.params)!=null&&o.options?e.column.params.options[a.value]||"标签错误":"选项错误"}),s=V(()=>{var c;const o=g({style:{},...e.column.params??{}});(c=o.value)!=null&&c.type&&delete o.value.type;const l=V(()=>{var i,u;if((i=e.column.params)!=null&&i.style)return((u=e.column.params)==null?void 0:u.style[a.value])||void 0});return o.value.style=l.value,o.value});return(o,l)=>{const c=E("el-tag");return m(),$(c,z(Z(r(s).style)),{default:C(()=>[L(M(r(n)),1)]),_:1},16)}}}),Vl={class:"flex"},El=["href","target"],Tl=j({__name:"index",props:{xGrid:{},column:{},gridConfig:{},row:{}},setup(t){var o,l;const e=t,a=V(()=>Y(e.column,e.row)),n=g(((l=(o=e.column)==null?void 0:o.params)==null?void 0:l.props)??{}),s=()=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(a.value).then(c=>{});else{const c=document.createElement("input");c.value=a.value,document.body.appendChild(c),c.select(),document.execCommand("Copy"),c.remove()}J("链接复制成功")};return(c,i)=>{var h;const u=G,d=E("el-button");return m(),x("div",Vl,[w("a",{href:r(a),target:r(n).target??"_blank"},M(r(n).text?r(n).text:r(a)),9,El),(h=r(n))!=null&&h.copy?(m(),$(d,{key:0,type:"primary",size:"small",text:"",onClick:s},{icon:C(()=>[k(u,{icon:"CopyDocument",size:14})]),default:C(()=>[L(" 复制 ")]),_:1})):T("",!0)])}}}),Rl=(t,e,a,n)=>{if(e.length<=0){D("请先导入数据");return}if(!t){D("请设置导入API接口");return}xe(t,{import:a,data:e}).then(o=>{var l;(l=n.xGrid)==null||l.commitProxy("query"),J((o==null?void 0:o.msg)??"操作成功")})},Bl=t=>{je.commands.add("importAllData",{commandMethod:e=>{var o;const{$table:a}=e,n=a==null?void 0:a.getTableData(),s=n==null?void 0:n.fullData;Rl(((o=t.vxeTableConfig.importConfig)==null?void 0:o.api)??"",s,"all",t)}})},Ul=w("div",null,"子数据",-1),Kt=j({__name:"index",props:{api:{},method:{default:"GET"},ajaxParams:{default:void 0}},emits:["update:init","update:init-ok","update:init-error","update:submit","update:submit-ok","update:submit-error","update:rest","update:rest-ok"],setup(t,{emit:e}){const a=t,n=g(),s=g(),o=g(),l=g(),c=g([]),i=g([]),u=g([]),d=async()=>{const v=g({method:a.method,params:{},data:{}});a.ajaxParams&&(a.method==="GET"?v.value.params=a.ajaxParams:v.value.data=a.ajaxParams),e("update:init",v.value);const f=`${a.api}Table`;return await X(f,v.value).then(p=>{const _=p.data;o.value=_==null?void 0:_.realTable,l.value=_==null?void 0:_.tabsConfig,s.value=Hn(a.api,a.method,_.tableConfig,a.ajaxParams,n.value),c.value=_.topButtonList,i.value=_.rightButtonList,u.value=_.selectButtonList,Bl({xGrid:n.value,vxeTableConfig:s.value}),e("update:init-ok",_)}).catch(p=>{e("update:init-error",p)})},h=()=>{var v,f,p;if((v=o.value)!=null&&v.enable&&((f=o.value)!=null&&f.time_interval)){const _=((p=o.value)==null?void 0:p.time_interval)*1e3;setInterval(()=>{var P;(P=n.value)==null||P.commitProxy("reload")},_)}};return ue(async()=>{await d(),await h()}),(v,f)=>{var _,P,y,S,R;const p=E("vxe-grid");return(_=r(s))!=null&&_.id?(m(),$(p,O({key:0,ref_key:"xGrid",ref:n,class:"xh-table"},r(s),{onEditClosed:f[0]||(f[0]=({column:I,row:b})=>r(Wn)(I,b,r(s),r(n)))}),We({topButtonList:C(({$grid:I})=>[k(r(Ss),z(Z({gridConfig:r(s),topButtonList:r(c),selectButtonList:r(u),xGrid:I})),null,16)]),rightButtonList:C(({row:I,column:b,$grid:A})=>[k(r(bs),z(Z({gridConfig:r(s),rightButtonList:r(i),row:I,column:b,xGrid:A})),null,16)]),childrenData:C(()=>[Ul]),html:C(({row:I,column:b,$grid:A})=>[k(r(Il),z(Z({gridConfig:r(s),row:I,column:b,xGrid:A})),null,16)]),remote:C(({row:I,column:b,$grid:A})=>[k(r(_l),z(Z({gridConfig:r(s),row:I,column:b,xGrid:A})),null,16)]),tags:C(({row:I,column:b,$grid:A})=>[k(r(Al),z(Z({gridConfig:r(s),row:I,column:b,xGrid:A})),null,16)]),link:C(({row:I,column:b,$grid:A})=>[k(r(Tl),z(Z({gridConfig:r(s),row:I,column:b,xGrid:A})),null,16)]),input:C(({row:I,column:b,$grid:A})=>[k(r(el),z(Z({gridConfig:r(s),row:I,column:b,xGrid:A})),null,16)]),InputNumber:C(({row:I,column:b,$grid:A})=>[k(r(al),z(Z({gridConfig:r(s),row:I,column:b,xGrid:A})),null,16)]),assets:C(({row:I,column:b,$grid:A})=>[k(r(Ms),z(Z({gridConfig:r(s),row:I,column:b,xGrid:A})),null,16)]),money:C(({row:I,column:b,$grid:A})=>[k(r(ol),z(Z({gridConfig:r(s),row:I,column:b,xGrid:A})),null,16)]),image:C(({row:I,column:b,$grid:A})=>[k(r(qs),z(Z({gridConfig:r(s),row:I,column:b,xGrid:A})),null,16)]),images:C(({row:I,column:b,$grid:A})=>[k(r(Xs),z(Z({gridConfig:r(s),row:I,column:b,xGrid:A})),null,16)]),photos:C(({row:I,column:b,$grid:A})=>[k(r(Ks),z(Z({gridConfig:r(s),row:I,column:b,xGrid:A})),null,16)]),icons:C(({row:I,column:b,$grid:A})=>[k(r(Ls),z(Z({gridConfig:r(s),row:I,column:b,xGrid:A})),null,16)]),switch:C(({row:I,column:b,$grid:A})=>[k(r(Sl),z(Z({gridConfig:r(s),row:I,column:b,xGrid:A})),null,16)]),select:C(({row:I,column:b,$grid:A})=>[k(r(jl),z(Z({gridConfig:r(s),row:I,column:b,xGrid:A})),null,16)]),_:2},[(y=(P=r(s))==null?void 0:P.screenRemote)!=null&&y.file||(R=(S=r(l))==null?void 0:S.list)!=null&&R.length?{name:"form",fn:C(({$grid:I})=>{var b,A,N;return[k(r(Cl),z(Z({gridConfig:r(s),xGrid:I,formScreen:{...(b=r(s))==null?void 0:b.formConfig,screenConfig:(A=r(s))==null?void 0:A.screenConfig},formRemote:(N=r(s))==null?void 0:N.screenRemote,tabsConfig:r(l)})),null,16)]}),key:"0"}:void 0]),1040)):T("",!0)}}}),Ml={class:"xhadmin-table-pro"},Ll=j({__name:"table-modal",props:{api:{},method:{},ajaxParams:{}},setup(t){return(e,a)=>(m(),x("div",Ml,[k(r(Kt),{api:e.api,method:e.method,"ajax-params":e.ajaxParams,"is-modal":!0},null,8,["api","method","ajax-params"])]))}});const ft=U(Ll,[["__scopeId","data-v-62ed6f04"]]),Fl={class:"xh-modal-container"},Ol=j({__name:"remote-modal",props:{file:{},ajaxParams:{}},emits:["update:close"],setup(t,{emit:e}){const a=()=>{e("update:close")};return(n,s)=>(m(),x("div",Fl,[k(r(ne),{file:n.file,"ajax-params":n.ajaxParams,"is-modal":!0,"onUpdate:close":a},null,8,["file","ajax-params"])]))}});const Ge=U(Ol,[["__scopeId","data-v-523e3818"]]),ql={class:"xhadmin-table-pro"},zl=j({name:"/table"}),Nl=j({...zl,setup(t){const e=de(),a=ve(),n=e.meta.method,s=e.query??{};return(o,l)=>(m(),x("div",ql,[k(r(Kt),{api:r(a),method:r(n),"ajax-params":r(s)},null,8,["api","method","ajax-params"])]))}});const Hl=U(Nl,[["__scopeId","data-v-a39226b1"]]),Wl=t=>(we("data-v-7ca0a0aa"),t=t(),be(),t),Xl={class:"xhadmin-page-pro"},Ql={key:0,class:"flex items-center bg-white px-5 py-4 mb-[10px]"},Zl=Wl(()=>w("span",{class:"pl-1 text-[16px]"},"返回",-1)),Gl={key:0,class:"pl-20px text-[16px] select-none"},Jl={class:"form-pro flex-1"},Kl=j({name:"/form"}),Yl=j({...Kl,setup(t){const e=de(),a=g(),n=g(),s=ve(),o=e.meta.method,l={...e.query};l!=null&&l.isBack&&(l==null||delete l.isBack);const c=g({...l}),i=g({submitBtn:{},resetBtn:{}}),u=p=>{var P;const _=(P=p==null?void 0:p.response)==null?void 0:P.extraConfig;i.value=_},d=()=>{a.value.submit()},h=()=>{a.value.reset(),J("数据重置完成")},v=()=>{n.value.setDisabled(!0)},f=()=>{n.value.setDisabled(!1)};return(p,_)=>{var y,S,R;const P=G;return m(),x("div",Xl,[(y=r(e).query)!=null&&y.isBack?(m(),x("div",Ql,[w("div",{class:"flex items-center cursor-pointer select-none",onClick:_[0]||(_[0]=(...I)=>r(Ne)&&r(Ne)(...I))},[k(P,{icon:"ArrowLeftOutlined",size:16}),Zl]),(S=r(e).meta)!=null&&S.title?(m(),x("div",Gl,M((R=r(e).meta)==null?void 0:R.title),1)):T("",!0)])):T("",!0),w("div",Jl,[k(r(dt),{ref_key:"formRef",ref:a,class:"xh-form-create",api:r(s),method:r(o),"ajax-params":r(c),"onUpdate:initOk":u,"onUpdate:submit":v,"onUpdate:submitOk":f,"onUpdate:submitError":f,"onUpdate:restOk":f,"onUpdate:initError":f},null,8,["api","method","ajax-params"])]),k(r(Mn),{ref_key:"buttonRef",ref:n,class:"xh-buttons-pro","extra-config":r(i),"onUpdate:submit":d,"onUpdate:rest":h},null,8,["extra-config"])])}}});const ec=U(Yl,[["__scopeId","data-v-7ca0a0aa"]]),tc={class:"h-100%"},ac=j({name:"remote"}),oc=j({...ac,setup(t){const a=de().meta.ajaxParams;return(n,s)=>(m(),x("div",tc,[k(r(ne),{file:r(a)},null,8,["file"])]))}}),nc={};function sc(t,e){return m(),x("div",null," Html内容文件 ")}const lc=U(nc,[["render",sc]]),cc={class:"h-100%"},rc=j({name:"remote"}),ic=j({...rc,setup(t){const e=ve();return(a,n)=>(m(),x("div",cc,[k(r(ne),{file:r(e),"is-api":!0},null,8,["file"])]))}}),uc=Object.freeze(Object.defineProperty({__proto__:null,formIndex:ec,htmlIndex:lc,remoteIndex:oc,tableIndex:Hl,vueIndex:ic},Symbol.toStringTag,{value:"Module"})),Ye={routeView:()=>ge(()=>import("./index.5d9a3e93.js"),["assets/js/index.5d9a3e93.js","assets/js/.pnpm.b5502b09.js","assets/css/.pnpm.1d3e7f35.css"]),exceptionView:()=>ge(()=>import("./exception.d2d92241.js"),["assets/js/exception.d2d92241.js","assets/js/.pnpm.b5502b09.js","assets/css/.pnpm.1d3e7f35.css"])},dc=t=>{if(!t)return Ye.blankView;if(t in Ye)return Ye[t];const e=Ar(t??"");return uc[e]},pc=t=>{for(const e of t){const a=e.remote,n=a.replace("/","_"),s=()=>He(ne,{file:a});s.displayName=n;const o={path:e==null?void 0:e.path,name:n,component:s,meta:{title:(e==null?void 0:e.title)||"未知页面",path:(e==null?void 0:e.path)||"未知路径",pid:0,method:"GET",ajaxParams:{}}};W.addRoute(o)}},mc=t=>{const e=[];for(const a of t)if(a.path){const n={path:`/${a.path}`,name:a.path.replace("/","_"),component:Mt(dc(a.component)),meta:{title:a.title,path:a.path,pid:a.pid,icon:a.icon,method:a.method,ajaxParams:a.auth_params},children:[]};(!n.children||n.children.length<1)&&delete n.children,e.push(n)}return e},Yt=new Map,ea=(t,e,a)=>{var o;const n=[];let s=[];e?s=t.filter(l=>(l==null?void 0:l.pid)===e):s=t.filter(l=>!l.pid);for(const l of s){const c=a?`${a}-${l.id}`:`${l.id}`;let i=`/${l.path}`;if(l!=null&&l.auth_params&&(l!=null&&l.auth_params.includes("group"))){const h=Je(`?${l==null?void 0:l.auth_params}`);i+=`_group=${h==null?void 0:h.group}`}else l!=null&&l.auth_params&&(i+=`_${l==null?void 0:l.auth_params}`);Yt.set(i,c);const u={activeId:c,title:l.title,icon:l.icon,ajaxParams:l.auth_params,path:l.path,show:l.show==="1",target:l.target??"_blank",isGroup:!1,children:ea(t,l.id,c)},d=(o=u.children)==null?void 0:o.some(h=>h.show);u.show&&d&&(u.isGroup=!0),n.push(u)}return n},Dt=Yt,_c=g("OS");matchMedia("(prefers-color-scheme: dark)");function fc(){return{theme:_c}}const _e=zt("user",()=>{const t=Ue(),e=g({...bt}),a=g([]),n=g([]),s=g({...Ke}),o=p=>{if(!(p!=null&&p.menus)){D("用户信息缺少Menus字段参数");return}p.menus instanceof Array&&p.menus.length>0&&(a.value=mc(p.menus),n.value=ea(p.menus)),p!=null&&p.theme&&(s.value={...s.value,...p.theme}),e.value=p};return{layoutInfo:s,userInfo:e,Authorization:t,login:async p=>{var S,R,I,b;const P=(R=(S=Q().siteInfo)==null?void 0:S.public_api)==null?void 0:R.login;if(!P){D("请配置登录接口");return}const y=await xe(P,p);if((I=y==null?void 0:y.data)!=null&&I.token){let A=y==null?void 0:y.data.token;A.includes("Bearer")||(A=`Bearer ${A}`),t.value=A,J((y==null?void 0:y.msg)??"登录成功","温馨提示");const H=((b=W.currentRoute.value.query)==null?void 0:b.redirect)??y.data.url;W.push(H)}else D((y==null?void 0:y.msg)??"登录失败","温馨提示")},loginOut:()=>{he("是否确认退出登录？","温馨提示","error").then(()=>{t.value="",o({...bt}),W.push(Oe)})},getUserInfo:async()=>{var y;const _=(y=Q().siteInfo.public_api)==null?void 0:y.user;if(!_){D("请配置用户信息接口");return}const{data:P}=await ye(_);P&&o(P)},routeList:a,menuList:n,setTheme:p=>{s.value.theme=p,fc().theme.value=p},setLayout:p=>{s.value.layout=p},setLayoutMenu:p=>{s.value.layoutMenu=p},hanldCollapse:p=>{let _=0;p?_=Ke.sideWidth:_=s.value.sideMenuWidth,s.value.sideMenuCollapse=p,s.value.sideWidth=_},setLayoutMenuCollapse:()=>{let p=0,_=!1;s.value.sideMenuCollapse?(p=Ke.sideWidth,_=!1):(p=s.value.sideMenuWidth,_=!0),s.value.sideMenuCollapse=_,s.value.sideWidth=p}}}),hc={class:"xhadmin-menus-pro"},vc=["onClick"],gc={class:"text"},yc={key:0,class:"mask"},xc=j({__name:"menu",props:{active:{},menus:{},sideMenuWidth:{default:60},sideWidth:{default:200}},setup(t){const e=t;Pe(f=>({"06dafc47":r(c),"7812d3c6":r(l)}));const a=$e(),n=Be(_e()).layoutInfo,s=V(()=>{var f;return((f=n.value)==null?void 0:f.layoutMenu)||"group"}),o=V(()=>{var f;return((f=n.value)==null?void 0:f.layoutTabsTheme)||"radius"}),l=V(()=>`${e.sideMenuWidth}px`),c=V(()=>`${e.sideWidth}px`),i=g(""),u=g(""),d=f=>{i.value=f;const p=i.value.split("-");u.value=p[0]},h=f=>{var P;const p=f[0],_=(P=p==null?void 0:p.children)==null?void 0:P.find(y=>y.show===!0);return p!=null&&p.children&&_?h((p==null?void 0:p.children)??[]):p},v=f=>{var I;const p=(I=f==null?void 0:f.children)==null?void 0:I.find(b=>b.show===!0);let _=f;f!=null&&f.children&&p&&(_=h((f==null?void 0:f.children)??[]));const P=_.path,y=g({});_.ajaxParams&&(y.value=Je(_.ajaxParams));const S=_.activeId;d(S);let R={...y.value};a.value&&(R={...R,appid:a.value}),ae(`/${P}`,R)};return ue(()=>{d(e.active)}),(f,p)=>{const _=G,P=E("el-menu");return m(),x("div",hc,[(m(!0),x(F,null,K(f.menus,y=>(m(),x("div",{key:y.id,class:"item"},[y.show?(m(),x("div",{key:0,class:ie({"item-triangle":r(o)==="triangle","item-radius":r(o)==="radius",active:r(u)===y.activeId}),onClick:S=>v(y)},[k(_,{icon:y.icon,size:"22",type:(y==null?void 0:y.iconType)||""},null,8,["icon","type"]),w("div",gc,M(y.title),1),r(o)==="triangle"?(m(),x("div",yc)):T("",!0)],10,vc)):T("",!0),w("div",{class:ie(["item-children",{active:r(u)===y.activeId}])},[k(P,{"default-active":f.active,"unique-opened":r(s)==="level"},{default:C(()=>[(m(!0),x(F,null,K(y.children,S=>(m(),x(F,{key:S.activeId},[r(s)==="level"?(m(),$(Co,{key:0,"menu-data":S},null,8,["menu-data"])):(m(),$(Xe,{key:1,"menu-data":S},null,8,["menu-data"]))],64))),128))]),_:2},1032,["default-active","unique-opened"])],2)]))),128))])}}});const kc=U(xc,[["__scopeId","data-v-c24f2e49"]]),jt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAADPCAMAAACKnR5TAAABMlBMVEVHcEx7pvgH+9srxdIsw9ItxdAD/9zLdv0bj/wajv4o3Nsajv6oS/13UvscZfDUdv1Yi/eeSvwg19UbfvkH+tsswdMcYe+CUPttd/sjp+kcavKrWf0E/ttfZ/ootd3Bbv0U6NguxNS0Zf2iTfwfnPIbfvkvwNCKfv4txs4Zjf8da/Md/uIbY/EaY/AH/9x6Y/wY/+CHbv0obPMqbfIcZfEeZfPEeP0O/92ahf6nf/6TTPyOTfsF/92ze/4E/90K/+GGTvucSfyre/6YgP5+UPvCev4eY/Cagf/D6vu2ef6T5fNDffJwXfpBjfmKfvg5Y/Qj09U6vNgtw9Aajf6uR/wE/9sdY+/advzddv2yRv2vRvwC/9sZi/8WZO+pRvwSjv6gSfuQf/11UvdBiP46XfI7XfL04pvpAAAAUnRSTlMABt7b7fX5/e32Ftz8b/L+DuHc1+zM+pgZ0ev58yXb+txi+Pfg5Poz+/vYMJbjx0J7UjlzuFXrrWOj1MJfyZZLre64fYbayo4j2USm7tvE8qtylTSQZQAAColJREFUeNrtnAtf2kgUxQ0QHhUhKGJAAVdUxFoRWt+1lWpb+9pHAUFhWffR7/8VdgKIREgy50qG7G9z/QLe39w5+c85M8zMuOWWW2655ZZbbrn1fyopXZyDq6hKDm1HKc5dLoF1OZdXHNpO+vIkhtbJzxdpZ3ajlk7vajc3t9x1c1MLL6+9KylOHDe1uBRj3UBVW84G3l84ctzSc6c59g9y1+1th61NtHHw7kh1YDvF80rt5hZpJ5xbzjaa0YPjvANFeu6kw/YD1M7yWqDZbAbOjhwn1urceeUWGDVWnfBaNsraaR4cO27c8kuxMLY2bOdko41Ggy3Pp48OGzeldBrGRq0Wzq0FGk2tnUaAibWjdk7xMgaPGhNp1oq2Po33H4tO2j2MBzCR7nXT6JWmBk5iA6V4nuvcoiLdXxutnWjWQeMm5bsiXcNFunG/PtFPzmED5ei8cgPtnE5fpAfT1nQQG1wdV+5AvMn1RHqwOs5hA0k9OruDd87wqHXFzSlsoJaOYx1k42jfnOFR6/dzcFxS/4si3eWBwPCsOYkNNJHG2umR9ON2HMEGOElrX9BHO6dxzwb5ae8e7dB2i/EAE+lAdEw7TmCD/HkFVLXOmFHrrc702UCdO4UPbblxo+YINlCKSzHaoW1cN1NnA4JI3+l5oOEgNmCHtrsnkPTo7pkqGyjs0AbygEbSUaN2pswGTAcquLMWMJq1abNBfqnSwZ01k276bDCVaWMkfdKpTUqkh9jgYipsoJbOKzVo59RqhiI9fTZIL52Eb28ozpr56jA2mIKtI5VOc4RRazQbVqWxgeh+pPzlCRs1pB0Dkh7DBsdHz5wefzCSXuZaHI0NPl6Jtj0pJM3TjUaijA2eiRw3evzR4OlHNBsopfPYk5w1i3ETzAbppVh4ciQ9hg2yItmgm1FPmgdG2EDUQa6bUcMkzTtqwtlAvaRk1AHeWeuzgbCDnCbSBJJuIu00omdFp4p0jV+khw4KYtrBM2pEpAdk8EnQsNEzaqQdUeG8llHbKtI9qhZkgTwto+YeNVEGFc1ZC6CjdnYhZtTwjLpj4qwZMsHHoggm6GXUsLOGjlrgTMyVPRXNqLs8gIq0MJ7Owxm1lbM2XqSF5CKSenT65Iya4zB6dpQWMmolRtK1STtrY0RajDGliTTurKEiLexo0BXpJ2fUHAc3EYujdEkaO7blKCQt5lg9uYzaESJdnFhG7QRLipJRLzuWpPGMutPJUUTaySQN84CYIF6acEY9ZXeNllHDoybqztTkM2oDkRbDA/mlSth+kn5/LObQRsmolykkLeaTA2fUJGftQJizBmfU+KgxWDsSsnMkWvzhUJKW8pcxWzJq/ahlBXnShCd6d1pG7UyRtjOjHupHEEnbm1EPQFrUtTx7M+rBqB0IjD8EOGvvRH1Bbc6oBxeOhThrtmfUYkmaklFncZIW5qzR3lGDJC3mmaWIjLpndwg6tGEZNc1ZE0bSTAc60K9D9J01rESJdP8dNVJ9kQbu3mgknRaXUYPt9J/s81dDmLPGSPoOq1xuLRvA6uDsIq8oz6Ai5ablL1//Auvr1z/h+vnLbz+B9Zxwj1fd//DPjx8//gHql+1vf4P17VvGuwjWr3t4P1J558XvUCUiqYXZ0B9QBZNJ3/fvW+yPv7ZWD/eeo+N29fJDAmsn8mJhI1RA21n0fYdqU5bj8d098J619PlL6vdrqCLbC8HqH1WgCsH1jFfG2pG98/FW/PCzhOHNyw/XaDts1KpQBdeTGXkLbGd+daXV2sXGTd1/9QJrJhHZ2AhC7bTbs/io+eZX4yt1tjyvETVgOpDARy1UgEYthI+azzvv8dfrdb/nzXNoccBuEqkFtnOgCs0mM74ttJ3VeKtVr7fqu6+5XykobHHQUUuBo1Zta6q2BbWzuelb9axo7dTr8TdveceN6UAEbOfFBjpqhXV458i+ebZxerXC1ID3C/oK7OaaMGpMpPFRm4/XW/f9HL5VOEV6G1wbtnNmg+CorSfBbja7stbqt9NqefjEmukAuDhs42xgo9bbOQSR9tfvq+XnYwOaSIOjpom0j8ADrYd2+NiAkTTYDYUHCCLd44H6Qz91DjYgiTTYTrvdI2l01Dy6dphYW7MBE2l81ATsHI0HVvx1XVmygaQQRHqbItI43qzG9WvDwQZKGRVphjcb8M5JJr0gSQ/xgG7czNlAffkqBXeDknSVRNIjo8bBBjSRxjYOkaQfeEDXjwkbSEykr+0nafjQpucB3e4xYwN1XxhJU3hg3OqYsUEZJukII2l41HCS1vOAfnkM2UDZF0HSs+sUHjBqx4QNYJHu8kAQtjsmwAMcbMBEGh61afGANRtIMKwRSLoQpIm08doYsIGEw9p1SoSztimbjpoBGygEkd4gifRkeMCCDdI727Y7a+1CkDRqFt2w7fOYDRTYWaPaHTL+BTUftTFswA5tYkgadda6PGDVzggbpF8S7A541Gg8ULdqZpQNyjsR20macmiTOUZtlA20+MN2Zy20Do+a7LMU6TFswEiacmibOg8YsEGZJNJVmKS9kyNpEzYgkHRkYUGIs8Y7avdsIFFgDXfWqkRnzeDQZsgGyox0hTtrMEm3aTsn7q8DtXL49vnMFZ5Rp0SQNBcPPGaD1zNFQRm1T4ZFmoMHdP2sHO7N7MNnUNxZo5A0Omp1Lc/emymjZpSYjFoGR00rbdhU0CokOGuF2fUMPGqP4g9eKZAwI5fmrKF4IwM8oBdq9t1Bdo/mrGHdFAoTddasPqMYFUSEZNQyPGpDBgi/60Eg6WoIz6j7N2+QdvzxAYLy2x5s1AQ5a+DG0ZmHKu/yEDPqCSRtVqPm6eoAaBnSMmqZfPMGAIJhL4fP0NVEGifpzBNu3vB249c7bXxiTXDW2sHJJW1mPPBGb7TxiHUiIsBZ24RJWpO13cchQnrHMqoS6Kxha6P5BBLqUeN2R7sQFMIDK6MJD0O3D9aHNvszapwHNJIek7+Vd1KJiWfU6KHNImkbO2pMpKVxt3HM1IBG0hkbnTWLqxLmF1gStFHz2c0DXZF+ZpBcJ6ZL0hQe8BteMzKOrEjO2nrGhqRtpB3jS2DGYk3LqL0++3nA5IqeZJgkiMioKTxgfoHSkKyFOGugidv3osyut44Xa8rrDwJJE3jA4vKxNDYjxUm6SsioSc7aG/O7umPJWsSVfAoPsC+o1VXd0egqkRDhrFF4gOMVjzISLFIyappItyYn0sZiHdkWwQMyPmpMpK2fJEn6UJ7srG3ZzQNscd5KPI+RhtWAllFn7E7atG7Y4vA9Fdt+YkZte9L22FmzEOvEkzJqOP7gu3nzmKR5H789JD5iSFomoCfw1FIZPIIlvf4QwgPAy0RlINY0kgadNdk3TxDp1/zPlAcPyAnOGkzSFB5gi4M8uu5dnaC8/hBC0q34LvTmunfw6d5ZAzNqys7xTMZZs3h1nSCRtIhDG+8TWB1Zp2jO2pbtPMD/QHn48cv2RhtbG7ZzMl7bQ11IpB/Iev/LQihUCCHVFWlWmzJfdW9DMFmDqntog38pRy3vvJrFaiGZXFz0QrW4uLvrwSru4SLpkfWZccstt9xyyy233HLLLbfccssx9S/OTXvmn2y+VgAAAABJRU5ErkJggg==",wc=["src"],bc=j({__name:"image",props:{logoSrc:{},logoHeight:{default:35}},setup(t){const e=t;Pe(s=>({"2035992c":r(n)}));const a=V(()=>e.logoSrc?e.logoSrc:jt),n=V(()=>`${e.logoHeight}px`);return(s,o)=>{const l=E("el-image");return m(),$(l,{src:r(a),class:"logo"},{error:C(()=>[w("img",{src:r(jt),class:"logo"},null,8,wc)]),_:1},8,["src"])}}});const ta=U(bc,[["__scopeId","data-v-25a57a60"]]),Pc=j({__name:"title",props:{sideName:{default:"XhAdmin"}},setup(t){return(e,a)=>(m(),x("span",null,M(e.sideName),1))}}),Cc={class:"xhadmin-logo-pro"},$c={class:"logo-image"},Ic={class:"logo-text"},Dc=j({__name:"index",props:{headerHeight:{},sideWidth:{},sideMenuWidth:{},logoHeight:{},logoSrc:{},sideName:{}},setup(t){const e=t;Pe(c=>({eb290234:r(s),c8095676:r(l),"375a2236":r(o)}));const a=_e(),{layoutInfo:n}=Be(a),s=V(()=>`${e.sideWidth}px`),o=V(()=>`${e.sideMenuWidth}px`),l=V(()=>`${e.headerHeight}px`);return(c,i)=>(m(),x("div",Cc,[w("div",$c,[k(ta,{"logo-src":c.logoSrc,"logo-height":c.logoHeight},null,8,["logo-src","logo-height"])]),Ft(w("div",Ic,[k(Pc,{"side-name":c.sideName,"logo-height":c.logoHeight},null,8,["side-name","logo-height"])],512),[[Ot,!r(n).sideMenuCollapse]])]))}});const jc=U(Dc,[["__scopeId","data-v-2826983b"]]),aa=j({__name:"index",setup(t){const e=de(),a=()=>`${new Date().getTime()}${Math.random()}`,n=g("");return Nt(()=>e.fullPath,()=>{n.value=a()}),(s,o)=>{const l=E("router-view");return m(),$(l,{key:r(n)})}}}),St="OUtzMas9edTHUH/JnNdjl4lHWYG9gISU6vl1DnlCzkumaS2EkD8OLhRzTMziPeF5AxwRwukfkvIVs2nzq7KWi2RxbtTzzLtOQMml5cLVHkQZs8dhEMLkXtyVFKOTAjsXTvU2NFMCfwUc8LhqIrDnbd11kU5oQoTcysWvQbk/P6wfBMd7p3TOZwWewFg+oz5qHfwhgtW2dXev4p+a9fknRNBKUgdBxStKVsImmh4SlXRfOlhgMhOoL6ycaOdbhz6LgvDynfuWIA7dngosFv6x9SXIW2WndIoztR/4A+9uYG6xxiuH7Por9QJjFVU/VzLytposud3gAQi7ba2gyN9I6g==e3dqJ6AL4KUa3qpU0WtHV215X5FP5e1CZeyTqT2ap9dEOIS8hp94xpVIod9MSyYorLrNVOo8OyocipT9zLZITtPJ5LNVczJcnzHrNi6goXzojZ7etvuGK0HRj8CygkIhZMb7PUF9lNodtoUJ8BOjKvvETpXXSnHmyhwyskBRtBZ3LwAbKNCNKPCDhDQgF/Zo8P0h+oUjCZ/3B2kvSxPhPS9OjPU583PqOlZZNf0/2TzC+JxCI2Du/87kDGUXS8Y7UKP2NzdlqT21VkOQnbsFHRGg3jfT/+uJu6M/qljnvGo6bp6nL0vpD0paZmKrSUGVE99FWkLYNRiWAKkttCDn2g==",At=`-----BEGIN PRIVATE KEY-----
MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCz+Ny6Y+2LRQb5
d81sZgzExl3EwWHJnP/BDOqD90UxEYStdzVulGtykumcfUPW+Hugspq8waetBGb7
MEFcbl3y7cTmrK/4Uninmy5Nf4nsGQk+/5WvQE2pzlLfPH0ZgxWyFepNdIXc6+k/
loXCOLus0jUZoDnN1YJfDMtGi+VyYl1jbatu3TQohO15NRb4KZ1TUeWQbOSnpXDA
WA2x9qVJtgKn1sD3KlxPu9Lm01QqCiIrEHEBWWCJQesgwP98JS438kCRmZMQBEJV
urr4UsLH889TMFg5ySKoGFLs3NOwOKbf0wwSpl4t7kAqyKOhbd4IprPVih/E9We5
VvYn5+7JAgMBAAECggEAMGRcRaoU93vKEk5KaDlQeaC1GfC9sI6MnoYwkOduLXF+
cX46Wc+CzL4AHtn34dfStjUQMm0H/xfN8QDaslXi4S1Z4oTQlD7ovniVjLUciuV4
fP4Qa50oxN37npcPNErxDH+kDsukKvEsOLLqqHzEygWDza4tnNEqSxCPoBqBya2B
TZomn3559fCOxGbKn7+3wlF7kKqr1HCbgX04RGISksh/EA1KPZRxOIol3B4dtz+H
xG/aG5aAGGnsFhlk/V/UiCBpyNYyJjVidJE9r8sY+GrszIEzsCLePhSWwG0UoTTN
PRt1o+nMCTuF8VoCkWGI7K6S5J5mQKdsFSaLPbLj4QKBgQDuEkf17kRNxWd2zBE7
fLGeRoezjyTBxcn6zzaJ1jQXs/ROV08q/LxNdRRNJ3jPk3V9y9Ceh6tyGvitumDF
m2fsrb+yofXQ8gL8xKFXhJHhbPRVqNKfb0DIWIeLSmhDM4xvmK3E+EuDQCe+t+7d
KRhUzYVXtsfid2MOrCfCkTwR5QKBgQDBhn/cs78V6hheZt0JUpV+bL01qelEC+SV
qwprkxbp6HWkRLp0yQb18Khq1s0NtMAQXlM5BGCQR9i7syy5vGi80a/lsR1O8F3y
PSo1GFYX9MGhIUHp7pw/6ls4WgZQ4eDMW7w0mrJ8DPUXlw2q/kY4SCAAHbGqarBo
nc8cv4UrFQKBgDbF0fSM+v4BmspELPrIt3y4sWPoXQaP4OZpYhzYQWfqqRyVDcvQ
FeqkMyWFHVB0lqV4jOjMQe+gsPIXXUhZdtGHMAGDLbEC3RkWjCA8ieuZS6Whj8PK
rtbpN1Yeqlo7s+XA9MnKbmUmD37bhoMvfz+TgUgq71X1Lb8kcIldLLrZAoGAJR1/
fjt25WQNImXF9JjDFQkTzKv2kddaEp5IFFOUbG3pygRoYid/z0FFe6AQmZVV1I3S
ljfRsTomRfFaHZEV4Uix3HJ4dYBB9EhoxOAS+us1C4sOUigyDUwMDKWvWmnHrEnX
sZsNqh7uDoUo2OeFXhvvDzaisVVe2eGSLChLCPUCgYEAqIu/Ws/C2OceneO25l/3
2WxcN3UbVT6x8TkwFjYv9UWs0/Opqlnj8aFy4zgU76zIDRGjVyObv53Gwhaaim1z
TeIrGe7RcWmPjzsERGlb+qe7tvCiNNDTd6RK0ywIrcSUrkEaZepqUepGFgB/vq9T
v07JgHIyR8viVUUqohaz5hM=
-----END PRIVATE KEY-----`,Vt=window.location.hostname,et=(t,e)=>{const a=new Na;a.setPrivateKey(e);const n=t.match(/.{1,344}/g);if(!n)throw new Error("令牌表单解密失败");let s="";if(n==null||n.forEach(o=>{const l=a.decrypt(o);l&&(s+=l)}),!s)throw new Error("解密失败");return JSON.parse(new TextDecoder().decode(Uint8Array.from(window.atob(s),o=>o.charCodeAt(0))))},Sc=()=>{const e=Q().siteInfo;if(e!=null&&e.empower_token&&e.empower_private_key)try{const a=et(e.empower_token,e.empower_private_key);return console.log("当前域名",Vt),a.systemUrl.includes(Vt)||a!=null&&a.isChannels?(console.log("使用自定义版权"),console.log("版权数据",a),a):(console.log("使用原生版权"),et(St,At))}catch(a){console.error("服务端授权失败",a)}try{return et(St,At)}catch(a){console.error("系统授权错误",a)}},oa=()=>{const e=Q().siteInfo;return{version_name:(e==null?void 0:e.version_name)??"v1.0.0",version:(e==null?void 0:e.version)??1e3}},Ac={class:"copyright-set"},Vc={key:0},Ec=["href"],Tc=["href"],Rc=j({__name:"index",setup(t){const{systemAbout:e,systemAboutUrl:a,systemName:n,systemUrl:s}=Sc(),{version_name:o}=oa(),l=window.location.protocol;return(c,i)=>(m(),x("div",Ac,[L(" copyright © 2023 "),r(a)==="#"?(m(),x("span",Vc,M(r(e)),1)):(m(),x("a",{key:1,href:`${r(l)}//${r(a)}`,target:"_blank",class:"pl-10px"},M(r(e)),9,Ec)),L(" All Rights Reserved "),w("a",{href:`${r(l)}//${r(s)}`,target:"_blank",class:"pl-10px"},M(r(n))+" "+M(r(o)),9,Tc)]))}});const na=U(Rc,[["__scopeId","data-v-448a4e9c"]]),Bc={class:"flex items-center"},Uc={class:"xhadmin-header-breadcrumb"},Mc=j({__name:"side",setup(t){var o;const e=Q(),a=_e(),{layoutInfo:n}=Be(a),s=((o=e.siteInfo.public_api)==null?void 0:o.header_left_file)??"";return(l,c)=>{const i=G;return m(),x("div",Bc,[w("div",Uc,[w("div",{class:"side-action",onClick:c[0]||(c[0]=u=>r(a).setLayoutMenuCollapse())},[k(i,{icon:r(n).sideMenuCollapse?"Expand":"Fold",color:"#555"},null,8,["icon"])])]),r(s)?(m(),$(r(ne),{key:0,file:r(s)},null,8,["file"])):T("",!0)])}}});const Lc=U(Mc,[["__scopeId","data-v-852079fd"]]),Fc={class:"xh-dropdown-link"},Oc={class:"text"},qc=j({__name:"index",setup(t){const e=Q(),a=_e(),{userInfo:n}=Be(a),s=()=>{var c,i;if(!((c=e.siteInfo.public_api)!=null&&c.user_edit_path)){he("当前系统未开启个人资料修改功能","温馨提示");return}ae((i=e.siteInfo.public_api)==null?void 0:i.user_edit_path)},o=()=>{a.loginOut()},l=c=>{switch(c){case"hanldProfile":s();break;case"loginout":o();break}};return(c,i)=>{const u=G,d=E("el-dropdown-item"),h=E("el-dropdown-menu"),v=E("el-dropdown");return m(),$(v,{class:"xh-dropdown",onCommand:l},{dropdown:C(()=>[k(h,null,{default:C(()=>[k(d,{command:"hanldProfile"},{default:C(()=>[L(" 个人中心 ")]),_:1}),k(d,{command:"loginout"},{default:C(()=>[L(" 退出登录 ")]),_:1})]),_:1})]),default:C(()=>{var f;return[w("div",Fc,[w("span",Oc,M((f=r(n))==null?void 0:f.nickname),1),k(u,{icon:"ArrowUp",size:14})])]}),_:1})}}});const sa=U(qc,[["__scopeId","data-v-a7b40429"]]),zc={class:"flex-1 flex items-center justify-end"},Nc=j({__name:"tools",setup(t){var n;const a=((n=Q().siteInfo.public_api)==null?void 0:n.header_right_file)??"";return(s,o)=>(m(),x("div",zc,[r(a)?(m(),$(r(ne),{key:0,file:r(a)},null,8,["file"])):T("",!0),k(sa)]))}}),Hc={class:"flex justify-between"},Wc=j({__name:"index",setup(t){return(e,a)=>(m(),x("div",Hc,[k(Lc),k(Nc)]))}});const Xc={class:"xhadmin-mix-layout"},Qc={class:"xhadmin-header-pro"},Zc={class:"xhadmin-main-pro"},Gc={class:"xhadmin-side-pro"},Jc={class:"xhadmin-content-pro"},Kc={class:"xhadmin-content pt-4 pl-4 pr-4"},Yc={class:"xhadmin-copyright-pro"},er=j({__name:"index",props:{active:{},menus:{},sideName:{},sideLogo:{},logoHeight:{},sideWidth:{},sideMenuWidth:{},headerHeight:{}},setup(t){const e=t;Pe(s=>({ea5e16fa:r(a),"10abb030":r(n)}));const a=V(()=>`${e.headerHeight}px`),n=V(()=>e.sideWidth);return(s,o)=>(m(),x("div",Xc,[w("div",Qc,[k(jc,{"header-height":s.headerHeight,"side-width":s.sideWidth,"logo-src":s.sideLogo,"side-name":s.sideName,"logo-height":s.logoHeight,"side-menu-width":s.sideMenuWidth},null,8,["header-height","side-width","logo-src","side-name","logo-height","side-menu-width"]),k(Wc,{class:"xhadmin-toolbar"})]),w("div",Zc,[w("div",Gc,[k(kc,{"side-width":s.sideWidth,"side-menu-width":s.sideMenuWidth,active:s.active,menus:s.menus},null,8,["side-width","side-menu-width","active","menus"])]),w("div",Jc,[w("div",Kc,[k(aa)]),w("div",Yc,[k(na)])])])]))}});const tr=U(er,[["__scopeId","data-v-82ea02ce"]]),ar={};function or(t,e){return m(),x("div",null," 侧边栏布局 ")}const nr=U(ar,[["render",or]]),sr=j({__name:"menus",props:{active:{},menus:{}},setup(t){return(e,a)=>{const n=E("el-menu");return m(),$(n,{mode:"horizontal",class:"menus","default-active":e.active},{default:C(()=>[(m(!0),x(F,null,K(e.menus,s=>(m(),$(Xe,{key:s.id,"menu-data":s},null,8,["menu-data"]))),128))]),_:1},8,["default-active"])}}});const lr={class:"xhadmin-top-layout"},cr={class:"xhadmin-header-pro"},rr={class:"xhadmin-header"},ir={class:"logo"},ur={class:"menus"},dr={key:0,class:"tools"},pr={class:"user"},mr={class:"xhadmin-main-pro"},_r={class:"xhadmin-main"},fr={class:"xhadmin-content"},hr={class:"xhadmin-copyright"},vr=j({__name:"index",props:{headerHeight:{},active:{},menus:{}},setup(t){Pe(o=>({"6794f285":r(s)}));const e=Q().siteInfo,n=_e().layoutInfo.layoutSize,s=V(()=>n?"100%":"1200px");return(o,l)=>{var c,i,u;return m(),x("div",lr,[w("div",cr,[w("div",rr,[w("div",ir,[k(ta,{"logo-src":((c=r(e))==null?void 0:c.web_logo)??""},null,8,["logo-src"])]),w("div",ur,[k(sr,{active:o.active,menus:o.menus},null,8,["active","menus"])]),(i=r(e).public_api)!=null&&i.header_right_file?(m(),x("div",dr,[k(r(ne),{file:(u=r(e).public_api)==null?void 0:u.header_right_file},null,8,["file"])])):T("",!0),w("div",pr,[k(sa)])])]),w("div",mr,[w("div",_r,[w("div",fr,[k(aa)]),w("div",hr,[k(na)])])])])}}});const gr=U(vr,[["__scopeId","data-v-e4f32260"]]),yr={};function xr(t,e){return m(),x("div",null," 用户中心布局 ")}const kr=U(yr,[["render",xr]]),wr=()=>{const t=de(),e=st({active:""}),a=n=>{let s=Dt.get(n);s||(s=Dt.get(Wt)),e.active=s??""};return Nt(()=>t.fullPath,()=>{var s,o;let n="";(s=t.query)!=null&&s.group&&t.meta.ajaxParams.includes("group")?n=`${t.path}_group=${(o=t.query)==null?void 0:o.group}`:t.meta.ajaxParams&&!n?n=`${t.path}_${t.meta.ajaxParams}`:n=t.path,a(n)}),{...Wa(e),updateActive:a}},[br,Pr]=Ha(wr),Cr=()=>Pr()??{active:g(""),updateActive:()=>{}},$r=j({__name:"index",setup(t){const e=Q(),a=_e(),{active:n}=Cr(),{layoutInfo:s}=Be(a),o=e.siteInfo,l=a.menuList;return(c,i)=>{var u,d;return m(),x(F,null,[r(s).layout==="mix"?(m(),$(r(tr),{key:0,"header-height":r(s).headerHeight,"side-width":r(s).sideWidth,"side-menu-width":r(s).sideMenuWidth,"side-logo":(u=r(o))==null?void 0:u.web_logo,"side-name":(d=r(o))==null?void 0:d.web_name,"logo-height":r(s).logoHeight,active:r(n),menus:r(l)},null,8,["header-height","side-width","side-menu-width","side-logo","side-name","logo-height","active","menus"])):T("",!0),r(s).layout==="side"?(m(),$(r(nr),{key:1})):T("",!0),r(s).layout==="top"?(m(),$(r(gr),{key:2,"header-height":r(s).headerHeight,active:r(n),menus:r(l)},null,8,["header-height","active","menus"])):T("",!0),r(s).layout==="user"?(m(),$(r(kr),{key:3})):T("",!0)],64)}}}),Ir={path:"/",name:"default-router",component:$r,redirect:Wt,children:[]},Dr=[{path:"/workspace/exception",name:"workspaceException",component:()=>ge(()=>import("./index.53f9845b.js"),["assets/js/index.53f9845b.js","assets/js/.pnpm.b5502b09.js","assets/css/.pnpm.1d3e7f35.css"]),meta:{title:"出现错误啦~"}}],jr=[{...Ir,children:[...Dr]},{path:"/login",name:"Login",component:()=>ge(()=>import("./index.f7e447b1.js"),["assets/js/index.f7e447b1.js","assets/js/.pnpm.b5502b09.js","assets/css/.pnpm.1d3e7f35.css","assets/css/index.2e77e8b7.css"]),meta:{title:"用户登录"}},{path:"/redirect/:path(.*)",name:"redirect",component:()=>ge(()=>import("./index.a76c2eb4.js"),["assets/js/index.a76c2eb4.js","assets/js/.pnpm.b5502b09.js","assets/css/.pnpm.1d3e7f35.css"])},{path:"/exception",name:"exception",meta:{title:"抱歉，你访问的页面不存在~"},component:()=>ge(()=>import("./index.53f9845b.js"),["assets/js/index.53f9845b.js","assets/js/.pnpm.b5502b09.js","assets/css/.pnpm.1d3e7f35.css"])},{path:"/:pathMatch(.*)",component:()=>ge(()=>import("./index.53f9845b.js"),["assets/js/index.53f9845b.js","assets/js/.pnpm.b5502b09.js","assets/css/.pnpm.1d3e7f35.css"])}],Sr=Xa({routes:[...jr],history:Qa("/")}),W=Sr,Ie=()=>location.pathname.replace(/^\/+|\/+$/g,""),ve=(t="",e=!1)=>{const a=W.currentRoute.value,n=Ie(),s=g(a.path);if(e){const o=s.value.indexOf("/",1);s.value=s.value.substring(0,o),s.value=`${s.value}/`}return`${n}${s.value}${t}`},ht=t=>{let e;try{e=new URL(t)}catch{return!1}return e.protocol==="http:"||e.protocol==="https:"},ae=(t,e)=>{ht(t)?location.href=t:W.push({path:t,query:e})};function tt(t=6){let e="";for(let a=0;a<t;a++)e+=Math.floor(Math.random()*10);return e}const Re=(t,e)=>{for(const a in e)if(e[a]===t)return!0;return!1},Ne=()=>{var e;(e=W.currentRoute.value.query)!=null&&e.isBack||D("返回上次页面错误"),W.back()},Ar=t=>t.replace(/\/(\w)/g,(e,a)=>a.toUpperCase()),Vr=(t,e="Enter")=>{const a=n=>{n.key===e&&(t(),n.preventDefault())};Za(()=>document.addEventListener("keydown",a)),Lt(()=>document.removeEventListener("keydown",a))},Je=t=>{let e;const a={},n=t.slice(t.indexOf("?")+1).split("&");for(let s=0;s<n.length;s++)e=n[s].split("="),a[e[0]]=e[1];return a},Q=zt("app",()=>{const e=`/${Ie()}/Index/site`,a=$e(),n=g({...xo}),s=g(),o=i=>{n.value=i};return{useAppId:a,siteInfo:n,getSite:async()=>{const{data:i}=await ye(e);return o(i),i},setSiteInfo:o,setLoginLink:i=>{s.value=i}}}),Er=async t=>{var n;const e=Q().siteInfo,a=((n=e==null?void 0:e.uploadify_api)==null?void 0:n.index)||"";return await ye(a,t).then(s=>s==null?void 0:s.data)},Tr=async t=>{var s;const e=Q().siteInfo,a=(s=e==null?void 0:e.uploadify_api)==null?void 0:s.edit;if(!a)return D("请先配置附件修改接口"),!1;const n=g();return await me(yo,{modelValue:t,"onUpdate:init":o=>{n.value=o}},{title:"修改附件",customStyle:{width:"450px",height:"500px"},beforeClose:(o,l,c)=>{var i;o==="confirm"?(i=n.value)!=null&&i.getFormData()&&c():c()}}).then(()=>{var l;const o=(l=n.value)==null?void 0:l.getFormData();if(o)return xe(`${a}?id=${t==null?void 0:t.id}`,o).then(c=>{J((c==null?void 0:c.msg)||"修改成功")})})},Rr=async(t,e)=>{var c;const a=Q().siteInfo,n=(c=a==null?void 0:a.uploadify_api)==null?void 0:c.move;if(!n)return D("请先配置文件移动接口"),Promise.reject(new Error("请先配置文件移动接口"));const s=(t==null?void 0:t.id)??"",o=e.map(i=>i.id);return s?o.length<=0?(Ee("请选择需要移动的文件","error"),Promise.reject(new Error("请选择需要移动的文件"))):await xe(n,{cid:s,ids:o}).then(i=>{J((i==null?void 0:i.msg)||"移动成功")}):(Ee("请选择需要移动到的分类","error"),Promise.reject(new Error("请选择需要移动到的分类")))},Br=async t=>{var s;const e=Q().siteInfo,a=(s=e==null?void 0:e.uploadify_api)==null?void 0:s.del;if(!a)return D("请先配置文件删除接口"),Promise.reject(new Error("请先配置文件删除接口"));if(t.length<=0)return D("请选择需要删除的文件"),Promise.reject(new Error("请选择需要删除的文件"));const n={ids:t.map(o=>o.id)};return await he("是否确认删除选中的文件？","温馨提示","error").then(()=>ze(a,n).then(o=>{J((o==null?void 0:o.msg)||"删除成功")}))},vt=t=>(we("data-v-f91b0178"),t=t(),be(),t),Ur={class:"category-container"},Mr={class:"item"},Lr=vt(()=>w("div",{class:"title"}," 分类名称 ",-1)),Fr={class:"item"},Or=vt(()=>w("div",{class:"title"}," 分类目录 ",-1)),qr={class:"item"},zr=vt(()=>w("div",{class:"title"}," 分类排序 ",-1)),Nr=j({__name:"category",props:{modelValue:{}},emits:["update:init"],setup(t,{expose:e,emit:a}){const n=t,s=ke(),o=g({sort:0,...n.modelValue}),l=()=>o.value.title?o.value.dir_name?o.value.sort===""?(D("请输入分类排序"),!1):o.value:(D("请输入分类目录"),!1):(D("请输入分类名称"),!1);return ue(()=>{a("update:init",s.exposed)}),e({getFormData:l}),(c,i)=>{const u=E("el-input");return m(),x("div",Ur,[w("div",Mr,[Lr,k(u,{modelValue:r(o).title,"onUpdate:modelValue":i[0]||(i[0]=d=>r(o).title=d),placeholder:"请输入分类名称"},null,8,["modelValue"])]),w("div",Fr,[Or,k(u,{modelValue:r(o).dir_name,"onUpdate:modelValue":i[1]||(i[1]=d=>r(o).dir_name=d),placeholder:"请输入分类目录"},null,8,["modelValue"])]),w("div",qr,[zr,k(u,{modelValue:r(o).sort,"onUpdate:modelValue":i[2]||(i[2]=d=>r(o).sort=d),placeholder:"请输入分类排序"},null,8,["modelValue"])])])}}});const la=U(Nr,[["__scopeId","data-v-f91b0178"]]),Hr=async()=>{var e;const t=Q().siteInfo;return await ye(((e=t==null?void 0:t.uploadify_cate)==null?void 0:e.index)||"").then(a=>(a==null?void 0:a.data)||[])},Wr=async()=>{var n;const t=Q().siteInfo,e=(n=t==null?void 0:t.uploadify_cate)==null?void 0:n.add;if(!e)return D("请先配置分类添加接口"),!1;const a=g();return await me(la,{"onUpdate:init":s=>{a.value=s}},{title:"添加分类",customStyle:{width:"350px",height:"400px"},beforeClose:(s,o,l)=>{var c;s==="confirm"?(c=a.value)!=null&&c.getFormData()&&l():l()}}).then(()=>{var o;const s=(o=a.value)==null?void 0:o.getFormData();if(s)return xe(e,s).then(l=>{J((l==null?void 0:l.msg)||"添加成功")})})},Xr=async t=>{var s;const e=Q().siteInfo,a=(s=e==null?void 0:e.uploadify_cate)==null?void 0:s.edit;if(!a)return D("请先配置分类修改接口"),!1;const n=g();return await me(la,{modelValue:t,"onUpdate:init":o=>{n.value=o}},{title:"修改分类",customStyle:{width:"350px",height:"400px"},beforeClose:(o,l,c)=>{var i;o==="confirm"?(i=n.value)!=null&&i.getFormData()&&c():c()}}).then(()=>{var l;const o=(l=n.value)==null?void 0:l.getFormData();if(o)return qe(`${a}?id=${t==null?void 0:t.id}`,o).then(c=>{J((c==null?void 0:c.msg)||"修改成功")})})},Qr=async t=>{var n;const e=Q().siteInfo,a=(n=e==null?void 0:e.uploadify_cate)==null?void 0:n.del;if(!a){D("请先配置分类删除接口");return}return await he("是否确认删除该分类？","温馨提示","error").then(()=>{const s={id:t==null?void 0:t.id};return ze(a,s).then(o=>{J((o==null?void 0:o.msg)||"删除成功")})})};const Zr={class:"uploadify-modal"},Gr={class:"category-container"},Jr={class:"category-title"},Kr={class:"title"},Yr=w("span",null,"附件分类",-1),ei={class:"category-content"},ti={class:"title"},ai=w("span",null,"全部数据",-1),oi=["onClick"],ni={class:"title"},si={key:0,class:"action"},li={class:"content-container"},ci={class:"action-box"},ri={class:"action"},ii={key:0,class:"content-box"},ui=["title","onClick","onDblclick"],di=["src","alt","title"],pi={key:1,class:"preview"},mi={key:1,class:"empty-box"},_i={key:2,class:"paginate-box"},ca=j({__name:"modal",props:{limit:{default:1},suffix:{default:"*"}},emits:["update:init"],setup(t,{expose:e,emit:a}){var gt;const n=t,s=g(!1),o=g([]),l=g([]),c=Q().siteInfo,i=Ue(),u=$e(),d=g({active:"",dir_name:"",list:[]}),h=(gt=c.uploadify_api)==null?void 0:gt.upload,v=g({[rt]:i.value||"",ACCEPT:"application/json"});u.value&&(v.value={...v.value,[it]:u.value});const f=g({action:`${ut}${h}`,data:{cid:d.value.active||"",dir_name:d.value.dir_name||""},headers:v.value,multiple:!0,withCredentials:!0,showFileList:!1}),p=g({background:!0,layout:"prev, pager, next, jumper",total:0}),_=g({page:1,limit:20}),P=ke(),y=g([]),S=()=>{_.value.page=1,_.value.limit=20,d.value.active="",y.value=[],o.value=[],l.value=[]},R=async()=>await Hr().then(B=>{d.value.list=B}),I=async()=>{var le;let B=n.suffix;typeof n.suffix=="object"&&(B=n.suffix.join(","));const se={cid:((le=d.value)==null?void 0:le.active)||"",page:_.value.page,limit:_.value.limit,suffix:B};return await Er(se).then(te=>{y.value=(te==null?void 0:te.data)||[],p.value.total=(te==null?void 0:te.total)||0})},b=B=>{S(),d.value.active=(B==null?void 0:B.id)??"",d.value.dir_name=(B==null?void 0:B.dir_name)??"",_.value.page=1,I()},A=B=>{s.value?l.value.includes(B)?l.value.splice(l.value.indexOf(B),1):l.value.push(B):n.limit===1?o.value[0]=B:o.value.includes(B)?o.value.splice(o.value.indexOf(B),1):(n.limit===0||o.value.length<n.limit)&&o.value.push(B)},N=()=>o.value,H=()=>{s.value=!1,l.value=[]},ee=()=>{l.value.length===y.value.length?l.value=[]:l.value=[...y.value]},fe=B=>{Rr(B,l.value).then(()=>{S(),I(),l.value=[],s.value=!1})},ra=B=>{Tr(B).then(()=>{I()})},ia=()=>{Br(l.value).then(B=>{S(),I(),l.value=[],s.value=!1})},ua=B=>{_.value.page=B,I()},da=B=>{(B==null?void 0:B.code)!==200?D((B==null?void 0:B.msg)||"上传失败"):(S(),I(),J((B==null?void 0:B.msg)||"上传成功"))},pa=B=>{console.error(B),D("上传失败")},ma=()=>{R().then(()=>{I(),a("update:init",P.exposed)})};return e({getSelected:N}),ue(()=>ma()),(B,se)=>{const le=G,te=E("el-button"),_a=E("el-dropdown-item"),fa=E("el-dropdown-menu"),ha=E("el-dropdown"),va=E("el-upload"),ga=E("el-text"),ya=E("el-empty"),xa=E("el-pagination");return m(),x("div",Zr,[w("div",Gr,[w("div",Jr,[w("div",Kr,[k(le,{icon:"Folder",size:18}),Yr]),w("div",{class:"created",onClick:se[0]||(se[0]=q=>r(Wr)().then(()=>R()))},[k(le,{icon:"FolderAdd",color:"#409eff"})])]),w("div",ei,[w("div",{class:ie([{active:r(d).active===""},"item"]),onClick:se[1]||(se[1]=q=>b())},[w("div",ti,[k(le,{icon:"Folder",size:17}),ai])],2),(m(!0),x(F,null,K(r(d).list,(q,Ve)=>(m(),x("div",{key:Ve,class:ie([{active:q.id===r(d).active},"item"]),onClick:Le=>b(q)},[w("div",ni,[k(le,{icon:"Folder",size:17}),w("span",null,M(q.title),1)]),q.is_system==="10"?(m(),x("div",si,[k(le,{icon:"Edit",onClick:Le=>r(Xr)(q).then(()=>R())},null,8,["onClick"]),k(le,{icon:"Delete",onClick:Le=>r(Qr)(q).then(()=>R())},null,8,["onClick"])])):T("",!0)],10,oi))),128))])]),w("div",li,[w("div",ci,[w("div",ri,[r(s)?T("",!0):(m(),$(te,{key:0,type:"primary",onClick:se[2]||(se[2]=q=>s.value=!0)},{default:C(()=>[L(" 管理 ")]),_:1})),r(s)?(m(),$(te,{key:1,type:"primary",onClick:H},{default:C(()=>[L(" 退出 ")]),_:1})):T("",!0),r(s)?(m(),$(te,{key:2,type:"info",onClick:ee},{default:C(()=>[L(" 全选 ")]),_:1})):T("",!0),r(s)?(m(),$(te,{key:3,type:"danger",onClick:ia},{default:C(()=>[L(" 删除 ")]),_:1})):T("",!0),r(s)?(m(),$(ha,{key:4,class:"dropdown",onCommand:se[3]||(se[3]=q=>fe(q))},{dropdown:C(()=>[k(fa,null,{default:C(()=>[(m(!0),x(F,null,K(r(d).list,(q,Ve)=>(m(),$(_a,{key:Ve,command:q},{default:C(()=>[L(M(q.title),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:C(()=>[k(te,{type:"warning"},{default:C(()=>[L(" 移动 ")]),_:1})]),_:1})):T("",!0)]),k(va,O({class:"upload"},r(f),{"on-success":da,"on-error":pa}),{default:C(()=>[k(te,{type:"success"},{default:C(()=>[L(" 上传 ")]),_:1})]),_:1},16)]),r(y).length?(m(),x("div",ii,[(m(!0),x(F,null,K(r(y),(q,Ve)=>(m(),x("div",{key:Ve,class:ie(["item",{active:!r(s)&&r(o).includes(q),"active-warning":r(s)&&r(l).includes(q)}]),title:q.title,onClick:Le=>A(q),onDblclick:Le=>ra(q)},[r(Qt)(q.url)?(m(),x("img",{key:0,src:q.url,alt:q.title,title:q.title,class:"preview"},null,8,di)):(m(),x("div",pi,[k(le,{icon:"Document",size:42})])),k(ga,{class:"title",truncated:""},{default:C(()=>[L(M(q.title),1)]),_:2},1024)],42,ui))),128))])):(m(),x("div",mi,[k(ya,{description:"当前没有更多附件"})])),r(y).length?(m(),x("div",_i,[k(xa,O(r(p),{onCurrentChange:ua}),null,16)])):T("",!0)])])}}});class fi{constructor(){Fe(this,"title","");Fe(this,"iconSvg","");Fe(this,"tag","");this.title="附件库",this.iconSvg='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 75"><defs><style>.cls-1{fill:#1677ff;fill-rule:evenodd;}</style></defs><title>xhadmin</title><g id="图层_2" data-name="图层 2"><g id="svg26"><g id="g24"><path id="path14" class="cls-1" d="M30.8,32.9q22.35-17.38,42.46-4c10,6.64,14.29,8.63,17.26,6.64,6-4,.66-12-10.62-15.92Q54,10.47,30.8,32.9Z"/><path id="path16" class="cls-1" d="M24.16,38.2q7.45-23.75,30.65-24.64C66.29,13.11,70.73,12.23,72,9c2.4-6.46-6.22-9.66-17.24-6.42Q29.43,10.07,24.16,38.2Z"/><path id="path18" class="cls-1" d="M20,51.8q-3-23,11.75-36.39c7.31-6.64,9.75-9.7,8.77-12.47-2-5.57-9.45-2.91-14.89,5.31Q13.2,27.12,20,51.8Z"/><path id="path20" class="cls-1" d="M26.41,65Q13.5,49,14.19,32.24c.35-8.28,0-11.66-2-13.09-4-2.86-5.7,4.85-5.68,11.37Q6.6,51.93,26.41,65Z"/><path id="path22" class="cls-1" d="M35.44,69.4c1.5-.67-17.24.66-25.8-14.8-3.39-6.12-5.18-8.39-7.3-8.36-4.22.06-2,6.45.92,11.14C12.88,72.71,34,70.05,35.44,69.4Z"/></g><text data-v-4db12289="" class="logo-svg-cls-2 logo-svg-text theme--transparent" transform="translate(28.28 57.81)">xhadmin</text></g></g></svg>',this.tag="button"}getValue(e){return""}isActive(e){return!1}isDisabled(e){return!1}exec(e,a){const n=g();me(ca,{"onUpdate:init":s=>{n.value=s}},{title:"附件库",center:!0,customStyle:{width:"60%",height:"85vh"},beforeClose:(s,o,l)=>{var c;if(s==="confirm"){const i=(c=n.value)==null?void 0:c.getSelected();i.length?(i.map(d=>d==null?void 0:d.url).forEach(d=>{const h=d.lastIndexOf("."),v=d.substr(h+1);let f="";["gif","jpg","jpeg","png"].includes(v.toLowerCase())?f=`<img src="${d}" />`:["mp4"].includes(v.toLowerCase())?f=`<video src="${d}" controls="controls" />`:["mp3","ogg","wav"].includes(v.toLowerCase())?f=`<audio src="${d}" controls="controls" />`:f=`<a href="${d}">${d}</a>`,e.setHtml(f)}),l()):D("请选择文件")}else l()}})}}const hi=j({__name:"index",setup(t){const e=g("zh-cn"),a=V(()=>e.value==="zh-cn"?Ga:Ja),n=st({autoInsertSpace:!1}),s=st({max:1});return(o,l)=>{const c=E("router-view"),i=E("el-config-provider");return m(),$(i,{button:r(n),message:r(s),locale:r(a)},{default:C(()=>[k(c)]),_:1},8,["button","message","locale"])}}}),vi=j({__name:"App",setup(t){const e={key:"xhUploadify",factory(){return new fi}};return Ka.registerMenu(e),br(),(a,n)=>(m(),$(hi))}}),gi=t=>{let e="",a=0;t=(t||0).toString();for(let n=t.length-1;n>=0;n--)a++,e=t.charAt(n)+e,!(a%3)&&n!==0&&(e=`,${e}`);return e},Et=(t,e,a,n)=>{let s;const o=a-e;function l(c){s||(s=c);const i=c-s,u=Math.min(i/n,1),d=e+Math.floor(u*o);d>999&&t.dataset.numberScrollThousandsOff===void 0?t.innerHTML=gi(d):t.innerHTML=d.toString(),i<n&&globalThis.requestAnimationFrame(l)}globalThis.requestAnimationFrame(l)},yi={mounted(t,e,a){const{value:n}=e,s=parseFloat(t.dataset.numberScrollValue??"0"),o=n?parseFloat(n.toString()):0,l=parseInt(t.dataset.numberScrollDuration??"1000");Et(t,s,o,l),t.dataset.numberScrollValue=o.toString()},updated(t,e){if(t.dataset.numberScrollOnceExecuted)return;console.log("updated");const{value:a}=e,n=parseFloat(t.dataset.numberScrollValue??"0"),s=a?parseFloat(a.toString()):0,o=parseInt(t.dataset.numberScrollDuration??"1000");s!==n&&(Et(t,n??0,a,o),e.modifiers.once&&(t.dataset.numberScrollOnceExecuted="true")),t.dataset.numberScrollValue=s.toString()}};function xi(t){t.directive("number-scroll",yi)}const Se=g(Oe),ct=g([...bo]),at=g([...ct.value,Se.value]),Tt=g(!1);W.beforeEach(async(t,e,a)=>{var u,d,h,v,f;if(Ht.start(),ct.value.includes(t.path)){a();return}const n=_e(),s=$e(),o=Ue(),l=V(()=>n.userInfo);if((u=t.query)!=null&&u.token){let p=(d=t.query)==null?void 0:d.token;p=p.includes("Bearer")?p:`Bearer ${p}`,o.value=p}if((h=t.query)!=null&&h.appid&&(s.value=(v=t.query)==null?void 0:v.appid),o.value&&[Se.value].includes(t.path)){a({path:"/"});return}const c=Q(),i=V(()=>c.siteInfo);if(!i.value.web_name){if(await c.getSite(),!i.value.web_name){D("站点名称web_name字段缺失");return}if(i.value.login_link&&c.setLoginLink(i.value.login_link),(f=i.value)!=null&&f.remote_url&&!Tt.value){const p=i.value.remote_url;Se.value&&(at.value=[...at.value,Se.value]),pc(p),Tt.value=!0,a({...t,replace:!0});return}}if(o.value){if(!l.value.username&&!ct.value.includes(t.path))try{if(await n.getUserInfo(),!l.value.username){D("用户信息缺少username字段");return}const p=n.routeList;if(p.length===0){n.Authorization="",D("您没有任何权限，请联系管理员！"),a({path:Se.value});return}p.forEach(_=>{W.addRoute("default-router",_)}),a({...t,replace:!0});return}catch(p){console.error("前置路由错误",p)}}else if(!at.value.includes(t.path)){a({path:Se.value,query:{redirect:t.path}});return}a()});W.afterEach(t=>{var c,i,u;const{version_name:e}=oa(),n=((c=Q().siteInfo)==null?void 0:c.web_name)||"XHAdmin",s=`${n} ${e}`;let o=(i=t.meta)==null?void 0:i.title;const l=(u=t.query)==null?void 0:u.code;l&&(o=Po[l]||"抱歉，你访问的页面不存在"),o?document.title=`${o} - ${s}`:n&&(document.title=s),Ht.done()});const ki=t=>{t.use(je),t.config.globalProperties.$XModal=je.modal,t.config.globalProperties.$XPrint=je.print,t.config.globalProperties.$XSaveFile=je.saveFile,t.config.globalProperties.$XReadFile=je.readFile},wi=Ya(),De=eo(vi);ki(De);De.use(wi);De.use(W);De.use(to);De.use(xi);De.mount("#app");Jt.vue=De;export{G as _,Q as a,Vr as b,na as c,U as d,Ue as e,Po as f,Qe as g,aa as h,Oe as l,ae as o,_e as u};
